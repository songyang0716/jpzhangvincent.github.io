<!DOCTYPE html>
<html lang="en-us">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Predict when Stephen Curry shoots the ball</title>
<meta name="description" content="Describe your website">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="all,follow">
<meta name="googlebot" content="index,follow,snippet,archive">
<link rel="stylesheet" href="../../css/bootstrap.min.css">
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,300,700,400italic">
<link rel="stylesheet" href="../../css/font-awesome.min.css">
<link rel="stylesheet" href="../../css/owl.carousel.css">
<link rel="stylesheet" href="../../css/owl.theme.css">
<link rel="stylesheet" href="../../css/github-gist.css">
<script src="../../js/highlight.pack.js"></script>
<script>
  hljs.initHighlightingOnLoad();
</script>


  <link href="../../css/style.default.css" rel="stylesheet" id="theme-stylesheet">


<link href="../../css/custom.css" rel="stylesheet">
<link rel="shortcut icon" href="../../img/favicon.png">


<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-89721810-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>

</head>
<body>
  <div id="all">
      <div class="container-fluid">
          <div class="row row-offcanvas row-offcanvas-left">
              
<div id="sidebar" class="col-sb-fixedpos col-xs-6 col-sm-4 col-md-3 sidebar-offcanvas">
  <div class="sidebar-content">
    <h1 class="sidebar-heading"><a href="../../">Vincent Zhang</a></h1>

    <ul class="sidebar-menu">
      
      
        <li><a href="../../">Home</a></li>
      
        <li><a href="../../about/">About</a></li>
      
        <li><a href="../../projects/">Projects</a></li>
      
        <li><a href="../../blog/">Blog</a></li>
      
        <li><a href="../../contact/">Get in touch</a></li>
      

       

<div class="panel panel-default sidebar-menu">

   

    <div class="panel-body">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" role="search">
            <div class="input-group">
                <input type="search" name="q" results="0" class="form-control" placeholder="Search">
                <input type="hidden" name="q" value="site:/">
                <span class="input-group-btn">
                    <button type="submit" class="btn btn-template-main"><i class="fa fa-search"></i></button>
                </span>
            </div>
        </form>
    </div>
</div>



 

      





 

      


<div class="panel sidebar-menu">
    <div class="panel-heading">
        <h3 class="panel-title">Tags</h3>
    </div>

    <div class="panel-body">
        <ul class="tag-cloud">
            
            <li><a href="../../tags/air-quality"><i class="fa fa-tags"></i> air-quality</a>
            </li>
            
            <li><a href="../../tags/data-viz"><i class="fa fa-tags"></i> data-viz</a>
            </li>
            
            <li><a href="../../tags/eda"><i class="fa fa-tags"></i> eda</a>
            </li>
            
            <li><a href="../../tags/github"><i class="fa fa-tags"></i> github</a>
            </li>
            
            <li><a href="../../tags/nba"><i class="fa fa-tags"></i> nba</a>
            </li>
            
            <li><a href="../../tags/python"><i class="fa fa-tags"></i> python</a>
            </li>
            
            <li><a href="../../tags/r"><i class="fa fa-tags"></i> r</a>
            </li>
            
            <li><a href="../../tags/sql"><i class="fa fa-tags"></i> sql</a>
            </li>
            
            <li><a href="../../tags/timeseries"><i class="fa fa-tags"></i> timeseries</a>
            </li>
            
        </ul>
    </div>
</div>



 

    </ul>
    <p class="social">
  
  
  
  <a href="https://twitter.com/Mr_AppleV" data-animate-hover="pulse" class="external twitter">
    <i class="fa fa-twitter"></i>
  </a>
  
  
  
  <a href="mailto:jpzhang@ucdavis.edu" data-animate-hover="pulse" class="email">
    <i class="fa fa-envelope"></i>
  </a>
  
  
  <a href="https://www.linkedin.com/in/jpzhangv" data-animate-hover="pulse">
    <i class="fa fa-linkedin"></i>
  </a>
  
  
  
<a href="https://www.github.com/jpzhangvincent">
  <i class="fa fa-github"></i>
</a>

</p>


    <div class="copyright">
      <p class="credit">
        
          &copy;2016 Vincent Zhang
        
        | Template by <a href="https://bootstrapious.com/free-templates" class="external">Bootstrapious.com</a>

&amp; ported to Hugo by <a href="https://github.com/kishaningithub">Kishan B</a>

      </p>
    </div>
  </div>
</div>

<div class="col-xs-12 col-sm-8 col-md-9 content-column white-background col-main-fixedpos">
  <div class="small-navbar visible-xs">
  <button type="button" data-toggle="offcanvas" class="btn btn-ghost pull-left"> <i class="fa fa-align-left"> </i>Menu</button>
  <h1 class="small-navbar-heading"><a href="../../">Vincent Zhang</a></h1>
</div>


            <div class="row">
                  <div class="col-sm-4">
                    <div class="image">
                      <img src="../../projects/PMC-project_files/shots_area.jpg" class="img-responsive" alt="">
                    </div>
                  </div>

                  <div class="col-md-8">
                      <h2>Predict when Stephen Curry shoots the ball</h2>
                          <p class="author-category">
                            Vincent Zhang
                          </p>

                          <p class="date-comments">
                          <i class="fa fa-calendar-o"></i> January 13, 2017
                          </p>

                          
                  
                      </div>
                    </div>
                  </br>

<div class="row">
   <div class="content-column-content">
          <div class="col-lg-8">



<ul>
<li><a href="#iidata-2017-predictive-modeling-competition">IIDATA 2017 Predictive Modeling Competition</a></li>
<li><a href="#exploratory-data-analysis">Exploratory Data Analysis</a></li>
<li><a href="#first-shot">Fisrt Shot</a></li>
<li><a href="#to-be-continued">To be continued</a></li>
</ul>

<h2>IIDATA 2017 Predictive Modeling Competition</h2>
<p>
<strong>IIDATA</strong> is a one-day data science convention hosted by UC Davis undergraduate students. This year will be on Feb.4, 20117. There will be hands-on workshops, tech talks and modeling competitions in this event. I think it would be a good learning opportunity for people interesed in data science to attend. For more information, please visit the <a href="http://www.iidata.net/">website</a>. Lately, the organization team released their dataset for the Predictive Modeling Competition(PMC). This year the challenge is quite interesting. </p>

<p><i>Given Stephen Curry’s distance to ball, hoops and the opposing team’s defenders, can 
you determine when he is releasing the ball?</i></p>

<p>
They also have a leaderboard with more detailed information about the competition <a href="https://pmc-leaderboard.com/">here</a>, especially the submission format.
</p>

<h2> Data </h2>

<p>This dataset contains temporal snapshots taken every 0.04 seconds during the November 12th, 2015 Golden State Warriors vs. Minnesota Timberwolves game (upon which Curry is on the court). It was told that Curry took **24** shots. For each shot, you are expected to find when he is releasing the ball from his hands with as much accuracy as possible. The data source is from [SportVU](https://www.stats.com/sportvu-basketball/). These are the variables:
<ul type="disc">
<li>“Time” - time left in the game (In fractional minutes)</li>
<li>“currylhoop” - distance from Curry to the left hoop</li>
<li>“curryrhoop” - distance from Curry to the right hoop</li>
<li>“balllhoop” - distance from the ball to the left hoop</li>
<li>“ballrhoop” - distance from the ball to the right hoop</li>
<li>“def1dist” - distance from the 1st defender to Curry</li>
<li>“def2dist” - distance from the 2nd defender to Curry</li>
<li>“def3dist” - distance from the 3rd defender to Curry</li>
<li>“def4dist” - distance from the 4th defender to Curry</li>
<li>“def5dist” - distance from the 5th defender to Curry</li>
</ul>
</p>

<p>It is a little bit surprise to me at first because it's not a typically supervised learning problem. There are some challenges or ambiguities involved: 
<ol type="a">
<li>They don't provide the actual times that Curry shot the balls. This makes it difficult to apply a supervised learning algorithm. Maybe it leaves for competitors to get the information so that it's possible to use in a supervised training and testing framework, since it allows competitors to ultilize other data/resources. On the other hand, it's possible to be treated as a unsupervised problem, for example, anomaly detection based on the activity patterns. So I see there are two direction here.</li>
<li>Note that they will evaluate the final score of our algorithm/model with another new dataset. So we need to be careful about generalization ability of our model.</li>
<li>Interestingly, it asks to predict the interval of times and it would evaluate an overall score based on the following formula. 
<div>
$$score = \frac{\sum_{i=1}^{|s|}I_{T_i}\frac{1}{1+s_{i2}-s_{i1}}}{|T|+(|S|-|T|)^2}$$</div>
where <div> $$S_i: \{(s_{i1}, s_{i2})\mid s_{i1} \leq s_{i2}\}, \| T\|=24, \|S\|\geq \|T\|, I_{T_i}:\{1 \mid S_i \in T_i\}$$. </div>

Thus, there is room and trade-off for us to determine the interval of the times to get a higher overall prediction score to win the competition.
</li> 
</ol>
</p>

<h2> Load Libraries</h2>

<pre><code class="language-python">import numpy as np
import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt
%matplotlib inline
</code></pre>

<pre><code class="language-python">import matplotlib.pylab as pylab
params = {'legend.fontsize': 'x-large',
         'axes.labelsize': 'x-large',
         'axes.titlesize':'x-large',
         'xtick.labelsize':'x-large',
         'ytick.labelsize':'x-large'}
pylab.rcParams.update(params)
</code></pre>

<pre><code class="language-python">pd.set_option('display.max_colwidth', -1)
plt.rcdefaults()
</code></pre>

<pre><code class="language-python">sns.set(style=&quot;whitegrid&quot;)
</code></pre>

<pre><code class="language-python">curry_df = pd.read_csv(&quot;curry.csv&quot;)
</code></pre>

<pre><code class="language-python">curry_df.head()
</code></pre>

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>time</th>
      <th>curryball</th>
      <th>currylhoop</th>
      <th>curryrhoop</th>
      <th>balllhoop</th>
      <th>ballrhoop</th>
      <th>def1dist</th>
      <th>def2dist</th>
      <th>def3dist</th>
      <th>def4dist</th>
      <th>def5dist</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>47.925333</td>
      <td>0.965270</td>
      <td>15.652612</td>
      <td>92.829463</td>
      <td>16.323108</td>
      <td>91.876879</td>
      <td>8.603274</td>
      <td>16.950232</td>
      <td>27.471575</td>
      <td>30.409634</td>
      <td>35.474795</td>
    </tr>
    <tr>
      <th>1</th>
      <td>47.924500</td>
      <td>0.797786</td>
      <td>15.223746</td>
      <td>93.094109</td>
      <td>15.935113</td>
      <td>92.307938</td>
      <td>8.298388</td>
      <td>16.730251</td>
      <td>27.240581</td>
      <td>30.249721</td>
      <td>35.246274</td>
    </tr>
    <tr>
      <th>2</th>
      <td>47.923833</td>
      <td>1.035342</td>
      <td>14.806208</td>
      <td>93.324333</td>
      <td>15.593023</td>
      <td>92.293618</td>
      <td>7.992415</td>
      <td>16.471735</td>
      <td>26.975070</td>
      <td>30.059684</td>
      <td>34.973485</td>
    </tr>
    <tr>
      <th>3</th>
      <td>47.923167</td>
      <td>2.126335</td>
      <td>14.375951</td>
      <td>93.577226</td>
      <td>15.994375</td>
      <td>91.469738</td>
      <td>7.693763</td>
      <td>16.237772</td>
      <td>26.712746</td>
      <td>29.885916</td>
      <td>34.705748</td>
    </tr>
    <tr>
      <th>4</th>
      <td>47.922500</td>
      <td>2.704138</td>
      <td>13.937750</td>
      <td>93.836626</td>
      <td>15.895369</td>
      <td>91.200628</td>
      <td>7.393487</td>
      <td>15.996931</td>
      <td>26.437723</td>
      <td>29.697227</td>
      <td>34.429396</td>
    </tr>
  </tbody>
</table>
</div>

<pre><code class="language-python">curry_df.shape
</code></pre>

<pre><code>(55615, 18)
</code></pre>

<pre><code class="language-python">sum(map(lambda i,j: i&lt;j, curry_df['currylhoop'],curry_df['curryrhoop']))
</code></pre>

<pre><code>50636
</code></pre>

<pre><code class="language-python">50636/55615.0 #maybe a data problem
</code></pre>

<pre><code>0.9104737930414456
</code></pre>

<h2 id="exploratory-data-analysis">Exploratory Data Analysis</h2>

<p>As we know, Stephen Curry is a special shooter in the NBA history, especially in 2015-2016 Season. Using the movement data is a way to understand his shooting pattern, which would be helpful for us to infer his shot times.</p>

<p>First, since Stephen Curry is known for his 3-point and long-distance shots, the changes of distances between Curry and the hoop can tell something about how Stephen Curry released the ball, 3-point or layup. It&rsquo;s tricky to notice that the dataset include all the movement data of Curry on the field, which means he may play offense or defense. Through some research about the specific game online, we know for the first half, the left hoop is the goal of Golden Warriors, and vice versa. It could be useful to come up with some clever ways later to identify whether Curry is in attacking mode.</p>

<pre><code class="language-python">def getQuarter(x):
    if x &gt;=36: 
        return 1
    elif 36 &gt; x &gt;= 24:
        return 2
    elif 24 &gt;= x &gt;= 12:
        return 3
    else:
        return 4
</code></pre>

<pre><code class="language-python">curry_df['quarter'] = map(lambda x: getQuarter(x), curry_df['time'])
</code></pre>

<pre><code class="language-python">curry_df['curryhoop_min'] = map(lambda i,j: min(i,j), curry_df['currylhoop'] ,curry_df['curryrhoop'] )
</code></pre>

<pre><code class="language-python">curry_df = curry_df.reset_index()
plt.figure(figsize=(100,40))
plt.plot(curry_df['index'], curry_df['curryhoop_min'], '-')
plt.title(&quot;Closest Distance between Hoop and Curry over time&quot;, fontsize = 50)
plt.xlabel('Index', fontsize=30)
plt.ylabel('Distance', fontsize=30)
</code></pre>

<p><img src="../PMC-project_files/output_17_1.png" class="img-responsive" style="display: block; margin: auto;" /></p>

<p>We have to transform the <strong><code>time</code></strong> variable to make it more understandable and easy to inteprete.</p>

<pre><code class="language-python">def getMinSecInQuarter(time, quarter):
    mins = int(time - 12 * (4-quarter))
    secs = int(((time - 12 * (4-quarter))-mins)*60)
    millisecs = round((((time - 12 * (4-quarter))-mins)*60)- secs,2)
    return pd.Series({'minute': mins,'second':secs, 'milisecs': millisecs})
</code></pre>

<pre><code class="language-python">curry_df = curry_df.merge(curry_df.apply(lambda row: getMinSecInQuarter(row['time'],row['quarter']), axis = 1), left_index=True, right_index=True)
</code></pre>

<p><h2>First Shot</h2>
<p> Let&rsquo;s try to use our reasoning first. As we know when a ball is shot, the distance between the player and the ball will increase while the distance between the ball and the hoop will decrease. So we define <em>ballhoopmin</em> as the actual distance between the ball and the hoop. Thus, we can infer that if the ratio between <em>curryball</em> and <em>ballhoopmin</em> is large, it&rsquo;s likely that the ball is in the fly.</p></p>

<pre><code class="language-python">curry_df['ballhoop_min'] = map(lambda i, j: min(i,j), curry_df['balllhoop'], curry_df['ballrhoop'])
</code></pre>

<pre><code class="language-python">curry_df.head()
</code></pre>

<div style="height:100%;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>time</th>
      <th>curryball</th>
      <th>currylhoop</th>
      <th>curryrhoop</th>
      <th>balllhoop</th>
      <th>ballrhoop</th>
      <th>def1dist</th>
      <th>def2dist</th>
      <th>def3dist</th>
      <th>def4dist</th>
      <th>def5dist</th>
      <th>quarter</th>
      <th>milisecs</th>
      <th>minute</th>
      <th>second</th>
      <th>curryhoop_min</th>
      <th>ballhoop_min</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>47.925333</td>
      <td>0.965270</td>
      <td>15.652612</td>
      <td>92.829463</td>
      <td>16.323108</td>
      <td>91.876879</td>
      <td>8.603274</td>
      <td>16.950232</td>
      <td>27.471575</td>
      <td>30.409634</td>
      <td>35.474795</td>
      <td>1</td>
      <td>0.52</td>
      <td>11.0</td>
      <td>55.0</td>
      <td>15.652612</td>
      <td>16.323108</td>
    </tr>
    <tr>
      <th>1</th>
      <td>47.924500</td>
      <td>0.797786</td>
      <td>15.223746</td>
      <td>93.094109</td>
      <td>15.935113</td>
      <td>92.307938</td>
      <td>8.298388</td>
      <td>16.730251</td>
      <td>27.240581</td>
      <td>30.249721</td>
      <td>35.246274</td>
      <td>1</td>
      <td>0.47</td>
      <td>11.0</td>
      <td>55.0</td>
      <td>15.223746</td>
      <td>15.935113</td>
    </tr>
    <tr>
      <th>2</th>
      <td>47.923833</td>
      <td>1.035342</td>
      <td>14.806208</td>
      <td>93.324333</td>
      <td>15.593023</td>
      <td>92.293618</td>
      <td>7.992415</td>
      <td>16.471735</td>
      <td>26.975070</td>
      <td>30.059684</td>
      <td>34.973485</td>
      <td>1</td>
      <td>0.43</td>
      <td>11.0</td>
      <td>55.0</td>
      <td>14.806208</td>
      <td>15.593023</td>
    </tr>
    <tr>
      <th>3</th>
      <td>47.923167</td>
      <td>2.126335</td>
      <td>14.375951</td>
      <td>93.577226</td>
      <td>15.994375</td>
      <td>91.469738</td>
      <td>7.693763</td>
      <td>16.237772</td>
      <td>26.712746</td>
      <td>29.885916</td>
      <td>34.705748</td>
      <td>1</td>
      <td>0.39</td>
      <td>11.0</td>
      <td>55.0</td>
      <td>14.375951</td>
      <td>15.994375</td>
    </tr>
    <tr>
      <th>4</th>
      <td>47.922500</td>
      <td>2.704138</td>
      <td>13.937750</td>
      <td>93.836626</td>
      <td>15.895369</td>
      <td>91.200628</td>
      <td>7.393487</td>
      <td>15.996931</td>
      <td>26.437723</td>
      <td>29.697227</td>
      <td>34.429396</td>
      <td>1</td>
      <td>0.35</td>
      <td>11.0</td>
      <td>55.0</td>
      <td>13.937750</td>
      <td>15.895369</td>
    </tr>
  </tbody>
</table>
</div>

<pre><code class="language-python">curry_df['dist_ratio'] = curry_df['curryball'] / curry_df['ballhoop_min']
</code></pre>

<p>Let&rsquo;s see whether we can observe any pattern of this distance ratio. We can see that there are some obvious spikes, which are probably what we are looking for. Next, we can extract those corresponding times.</p>

<pre><code class="language-python">plt.figure(figsize=(100,40))
plt.plot(curry_df['index'], curry_df['dist_ratio'], '-')
plt.title(&quot;Distance Ratio over time&quot;, fontsize = 50)
plt.xlabel('Index', fontsize=30)
plt.ylabel('Distance Ratio', fontsize=30)
</code></pre>

<p><img src="../PMC-project_files/output_26_1.png" class="img-responsive" style="display: block; margin: auto;" /></p>

<pre><code class="language-python"># Find the times with the top 24 highest spikes
curry_df.nlargest(24, 'dist_ratio')[[&quot;time&quot;, &quot;dist_ratio&quot;, &quot;curryhoop_min&quot;,&quot;quarter&quot;]]
</code></pre>

<div style="height:100%;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>time</th>
      <th>dist_ratio</th>
      <th>curryhoop_min</th>
      <th>quarter</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>42425</th>
      <td>14.455500</td>
      <td>363.651664</td>
      <td>18.843438</td>
      <td>3</td>
    </tr>
    <tr>
      <th>42433</th>
      <td>14.450167</td>
      <td>363.327192</td>
      <td>19.129749</td>
      <td>3</td>
    </tr>
    <tr>
      <th>42434</th>
      <td>14.449500</td>
      <td>241.701580</td>
      <td>19.158059</td>
      <td>3</td>
    </tr>
    <tr>
      <th>17819</th>
      <td>31.062000</td>
      <td>240.649549</td>
      <td>34.829993</td>
      <td>2</td>
    </tr>
    <tr>
      <th>42435</th>
      <td>14.448833</td>
      <td>176.939222</td>
      <td>19.185484</td>
      <td>3</td>
    </tr>
    <tr>
      <th>42431</th>
      <td>14.451500</td>
      <td>115.415805</td>
      <td>19.068632</td>
      <td>3</td>
    </tr>
    <tr>
      <th>42424</th>
      <td>14.456167</td>
      <td>113.908181</td>
      <td>18.783849</td>
      <td>3</td>
    </tr>
    <tr>
      <th>824</th>
      <td>47.375833</td>
      <td>111.561951</td>
      <td>36.922632</td>
      <td>1</td>
    </tr>
    <tr>
      <th>42437</th>
      <td>14.447500</td>
      <td>106.837579</td>
      <td>19.243607</td>
      <td>3</td>
    </tr>
    <tr>
      <th>42426</th>
      <td>14.454833</td>
      <td>92.652413</td>
      <td>18.893214</td>
      <td>3</td>
    </tr>
    <tr>
      <th>42436</th>
      <td>14.448167</td>
      <td>87.928430</td>
      <td>19.214337</td>
      <td>3</td>
    </tr>
    <tr>
      <th>42430</th>
      <td>14.452167</td>
      <td>82.046262</td>
      <td>19.041845</td>
      <td>3</td>
    </tr>
    <tr>
      <th>42432</th>
      <td>14.450833</td>
      <td>77.040831</td>
      <td>19.100626</td>
      <td>3</td>
    </tr>
    <tr>
      <th>42439</th>
      <td>14.446167</td>
      <td>74.102692</td>
      <td>19.302154</td>
      <td>3</td>
    </tr>
    <tr>
      <th>42450</th>
      <td>14.438833</td>
      <td>67.965220</td>
      <td>19.557624</td>
      <td>3</td>
    </tr>
    <tr>
      <th>42438</th>
      <td>14.446833</td>
      <td>65.596627</td>
      <td>19.276922</td>
      <td>3</td>
    </tr>
    <tr>
      <th>42451</th>
      <td>14.438167</td>
      <td>63.899451</td>
      <td>19.572023</td>
      <td>3</td>
    </tr>
    <tr>
      <th>42428</th>
      <td>14.453500</td>
      <td>60.944564</td>
      <td>18.977573</td>
      <td>3</td>
    </tr>
    <tr>
      <th>42427</th>
      <td>14.454167</td>
      <td>60.595256</td>
      <td>18.935209</td>
      <td>3</td>
    </tr>
    <tr>
      <th>17820</th>
      <td>31.061333</td>
      <td>57.896951</td>
      <td>34.785746</td>
      <td>2</td>
    </tr>
    <tr>
      <th>17818</th>
      <td>31.062667</td>
      <td>56.580318</td>
      <td>34.883618</td>
      <td>2</td>
    </tr>
    <tr>
      <th>42440</th>
      <td>14.445500</td>
      <td>54.899058</td>
      <td>19.330957</td>
      <td>3</td>
    </tr>
    <tr>
      <th>42423</th>
      <td>14.456833</td>
      <td>53.134837</td>
      <td>18.717561</td>
      <td>3</td>
    </tr>
    <tr>
      <th>42429</th>
      <td>14.452833</td>
      <td>50.605485</td>
      <td>19.012620</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>

<p>However, it turns out that the corresponding top 24 &ldquo;time points&rdquo; include the noise that many duplicated pointed are counted in a short time period. As we researched online, it just doesn&rsquo;t make sense to have most shots happened in the third quarter.</p>

<h2 id="to-be-continued">To be continued</h2>

<p>We found we can scrape the actual shot times by Curry on the official NBA statistics website <a href="http://stats.nba.com/game/#!/0021500125/playbyplay/">here</a>. Although we are not supposed to use it as the submission, we can use it as a way to evaluate and tune our pattern regconition algorithm.</p>

<pre><code class="language-python">import requests

shots_url = 'http://stats.nba.com/stats/playbyplayv2?EndPeriod=10&amp;EndRange=55800&amp;GameID=0021500125&amp;RangeType=2&amp;Season=2015-16&amp;SeasonType=Regular+Season&amp;StartPeriod=1&amp;StartRange=0'

# request the URL and parse the JSON
response = requests.get(shots_url)
response.raise_for_status() # raise exception if invalid response
shot_logs = response.json()['resultSets'][0]['rowSet']
</code></pre>

<pre><code class="language-python">headers = response.json()['resultSets'][0]['headers']
</code></pre>

<pre><code class="language-python">shots_df = pd.DataFrame(shot_logs, columns = headers)
</code></pre>

<pre><code class="language-python">shots_df.head()
</code></pre>

<div style="height:100%;overflow:auto;">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GAME_ID</th>
      <th>EVENTNUM</th>
      <th>EVENTMSGTYPE</th>
      <th>EVENTMSGACTIONTYPE</th>
      <th>PERIOD</th>
      <th>WCTIMESTRING</th>
      <th>PCTIMESTRING</th>
      <th>HOMEDESCRIPTION</th>
      <th>NEUTRALDESCRIPTION</th>
      <th>VISITORDESCRIPTION</th>
      <th>...</th>
      <th>PLAYER2_TEAM_CITY</th>
      <th>PLAYER2_TEAM_NICKNAME</th>
      <th>PLAYER2_TEAM_ABBREVIATION</th>
      <th>PERSON3TYPE</th>
      <th>PLAYER3_ID</th>
      <th>PLAYER3_NAME</th>
      <th>PLAYER3_TEAM_ID</th>
      <th>PLAYER3_TEAM_CITY</th>
      <th>PLAYER3_TEAM_NICKNAME</th>
      <th>PLAYER3_TEAM_ABBREVIATION</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0021500125</td>
      <td>0</td>
      <td>12</td>
      <td>0</td>
      <td>1</td>
      <td>8:16 PM</td>
      <td>12:00</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>...</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>0</td>
      <td>0</td>
      <td>None</td>
      <td>NaN</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0021500125</td>
      <td>1</td>
      <td>10</td>
      <td>0</td>
      <td>1</td>
      <td>8:16 PM</td>
      <td>12:00</td>
      <td>Jump Ball Towns vs. Ezeli: Tip to Green</td>
      <td>None</td>
      <td>None</td>
      <td>...</td>
      <td>Golden State</td>
      <td>Warriors</td>
      <td>GSW</td>
      <td>5</td>
      <td>203110</td>
      <td>Draymond Green</td>
      <td>1.610613e+09</td>
      <td>Golden State</td>
      <td>Warriors</td>
      <td>GSW</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0021500125</td>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>8:16 PM</td>
      <td>11:46</td>
      <td>None</td>
      <td>None</td>
      <td>Green 15' Jump Shot (2 PTS) (Curry 1 AST)</td>
      <td>...</td>
      <td>Golden State</td>
      <td>Warriors</td>
      <td>GSW</td>
      <td>0</td>
      <td>0</td>
      <td>None</td>
      <td>NaN</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0021500125</td>
      <td>3</td>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>8:17 PM</td>
      <td>11:31</td>
      <td>MISS Wiggins 20' Jump Shot</td>
      <td>None</td>
      <td>None</td>
      <td>...</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>0</td>
      <td>0</td>
      <td>None</td>
      <td>NaN</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0021500125</td>
      <td>4</td>
      <td>4</td>
      <td>0</td>
      <td>1</td>
      <td>8:17 PM</td>
      <td>11:30</td>
      <td>None</td>
      <td>None</td>
      <td>Curry REBOUND (Off:0 Def:1)</td>
      <td>...</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>0</td>
      <td>0</td>
      <td>None</td>
      <td>NaN</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 33 columns</p>
</div>

<p>Thus, we can identify the times of Curry&rsquo;s shots based on the descriptions in the column <strong><code>VISITORDESCRIPTION</code></strong>.</p>

<pre><code class="language-python">pattern = r'Curry.*(Layup|Shot)'
shots_df[shots_df['VISITORDESCRIPTION'].str.contains(pattern, na=False)][['PERIOD', 'PCTIMESTRING','VISITORDESCRIPTION']]
</code></pre>

<pre><code>C:\Users\jpzha\Anaconda2\lib\site-packages\ipykernel\__main__.py:2: UserWarning: This pattern has match groups. To actually get the groups, use str.extract.
  from ipykernel import kernelapp as app
</code></pre>

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>PERIOD</th>
      <th>PCTIMESTRING</th>
      <th>VISITORDESCRIPTION</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>7</th>
      <td>1</td>
      <td>10:54</td>
      <td>Curry 28' 3PT Jump Shot (3 PTS)</td>
    </tr>
    <tr>
      <th>16</th>
      <td>1</td>
      <td>9:48</td>
      <td>Curry 25' 3PT Jump Shot (9 PTS) (Barnes 1 AST)</td>
    </tr>
    <tr>
      <th>30</th>
      <td>1</td>
      <td>8:07</td>
      <td>MISS Curry 3' Layup</td>
    </tr>
    <tr>
      <th>41</th>
      <td>1</td>
      <td>6:51</td>
      <td>Curry 24' 3PT Jump Shot (12 PTS) (Ezeli 2 AST)</td>
    </tr>
    <tr>
      <th>74</th>
      <td>1</td>
      <td>3:38</td>
      <td>Curry 18' Pullup Jump Shot (16 PTS)</td>
    </tr>
    <tr>
      <th>86</th>
      <td>1</td>
      <td>2:13</td>
      <td>MISS Curry  3PT Jump Shot</td>
    </tr>
    <tr>
      <th>91</th>
      <td>1</td>
      <td>1:50</td>
      <td>Curry  Layup (18 PTS) (Bogut 1 AST)</td>
    </tr>
    <tr>
      <th>95</th>
      <td>1</td>
      <td>0:53</td>
      <td>MISS Curry 7' Floating Jump Shot</td>
    </tr>
    <tr>
      <th>101</th>
      <td>1</td>
      <td>0:12</td>
      <td>Curry 24' 3PT Jump Shot (21 PTS) (Iguodala 1 AST)</td>
    </tr>
    <tr>
      <th>185</th>
      <td>2</td>
      <td>4:13</td>
      <td>MISS Curry 27' 3PT Jump Shot</td>
    </tr>
    <tr>
      <th>191</th>
      <td>2</td>
      <td>3:25</td>
      <td>Curry 11' Floating Jump Shot (23 PTS) (Green 6 AST)</td>
    </tr>
    <tr>
      <th>220</th>
      <td>2</td>
      <td>0:00</td>
      <td>Curry 2' Driving Layup (25 PTS)</td>
    </tr>
    <tr>
      <th>254</th>
      <td>3</td>
      <td>8:33</td>
      <td>MISS Curry 21' Jump Shot</td>
    </tr>
    <tr>
      <th>275</th>
      <td>3</td>
      <td>6:00</td>
      <td>MISS Curry 1' Layup</td>
    </tr>
    <tr>
      <th>284</th>
      <td>3</td>
      <td>5:17</td>
      <td>Curry 16' Jump Shot (27 PTS)</td>
    </tr>
    <tr>
      <th>311</th>
      <td>3</td>
      <td>3:06</td>
      <td>Curry 26' 3PT Jump Shot (32 PTS)</td>
    </tr>
    <tr>
      <th>313</th>
      <td>3</td>
      <td>2:39</td>
      <td>Curry 25' 3PT Jump Shot (35 PTS) (Green 9 AST)</td>
    </tr>
    <tr>
      <th>315</th>
      <td>3</td>
      <td>2:01</td>
      <td>MISS Curry 25' 3PT Jump Shot</td>
    </tr>
    <tr>
      <th>329</th>
      <td>3</td>
      <td>0:25</td>
      <td>MISS Curry 10' Floating Jump Shot</td>
    </tr>
    <tr>
      <th>391</th>
      <td>4</td>
      <td>5:51</td>
      <td>Curry 26' 3PT Jump Shot (38 PTS)</td>
    </tr>
    <tr>
      <th>393</th>
      <td>4</td>
      <td>5:23</td>
      <td>Curry 17' Jump Shot (40 PTS)</td>
    </tr>
    <tr>
      <th>395</th>
      <td>4</td>
      <td>4:58</td>
      <td>MISS Curry 26' 3PT Jump Shot</td>
    </tr>
    <tr>
      <th>419</th>
      <td>4</td>
      <td>2:54</td>
      <td>MISS Curry 28' 3PT Jump Shot</td>
    </tr>
    <tr>
      <th>432</th>
      <td>4</td>
      <td>1:55</td>
      <td>Curry 19' Jump Bank Shot (42 PTS) (Iguodala 5 AST)</td>
    </tr>
    <tr>
      <th>452</th>
      <td>4</td>
      <td>0:29</td>
      <td>Curry 26' 3PT Jump Shot (46 PTS) (Green 12 AST)</td>
    </tr>
  </tbody>
</table>
</div>

<p>To be continued. Stay tuned.:)</p>

<script type="text/javascript"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
      
       </div>
     </div>
   </div>





        <a href="#" class="back-to-top">
        <i class="fa fa-arrow-circle-o-up" aria-hidden="true"></i>

        </a>

         <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'jpvincent';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </div>
   

          </div>
      </div>
  </div>
  <script src="../../js/jquery.min.js"></script>
<script src="../../js/bootstrap.min.js"></script>
<script src="../../js/jquery.cookie.js"> </script>
<script src="../../js/ekko-lightbox.js"></script>
<script src="../../js/jquery.scrollTo.min.js"></script>
<script src="../../js/masonry.pkgd.min.js"></script>
<script src="../../js/imagesloaded.pkgd.min.js"></script>
<script src="../../js/owl.carousel.min.js"></script>
<script src="../../js/front.js"></script>
<script src="../../js/backtotop.js"></script> 

</body>
</html>
