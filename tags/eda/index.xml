<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Eda on Vincent Zhang</title>
    <link>/tags/eda/index.xml</link>
    <description>Recent content in Eda on Vincent Zhang</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>&amp;copy;2016 Vincent Zhang</copyright>
    <atom:link href="/tags/eda/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Predict when Stephen Curry shoots the ball</title>
      <link>/projects/PMC-project/</link>
      <pubDate>Wed, 01 Feb 2017 00:00:00 +0000</pubDate>
      
      <guid>/projects/PMC-project/</guid>
      <description>&lt;p&gt;IIDATA 2017 Predictive Modeling Competition is hosted by UC Davis. This year the challenge is to predict when Stephen Curry shoots the ball, given the movement tracking data from sportVU.
&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#iidata-2017-predictive-modeling-competition&#34;&gt;IIDATA 2017 Predictive Modeling Competition&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#exploratory-data-analysis&#34;&gt;Exploratory Data Analysis&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#first-shot&#34;&gt;Fisrt Shot&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#can-we-get-the-labels?&#34;&gt;Can we get the labels?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#can-we-use-the-labels?&#34;&gt;Can we use the labels?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#identify-the-offense-movement-patterns&#34;&gt;Identify the offense movement patterns&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#change-point-detection&#34;&gt;Change Point Detection&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#afterthoughts&#34;&gt;Afterthoughts&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2&gt;IIDATA 2017 Predictive Modeling Competition&lt;/h2&gt;
&lt;p&gt;
&lt;strong&gt;IIDATA&lt;/strong&gt; is a one-day data science convention hosted by UC Davis undergraduate students. This year will be on Feb.4, 2017. There will be hands-on workshops, tech talks and modeling competitions in this event. I think it would be a great learning opportunity for students interesed in data science to attend. For more information, please visit the &lt;a href=&#34;http://www.iidata.net/&#34;&gt;website&lt;/a&gt;. Lately, the organization team released their dataset for the Predictive Modeling Competition(PMC). This year the challenge is quite interesting. &lt;/p&gt;

&gt; &#34;Given Steph Curry’s distance to ball, hoops and the opposing team’s defenders, can you determine when he is releasing the ball?&#34; 

They also have a leaderboard with more detailed information about the competition &lt;a href=&#34;https://pmc-leaderboard.com/&#34;&gt;here&lt;/a&gt;, especially the submission format.
&lt;/p&gt;

&lt;h2&gt; Data &lt;/h2&gt;

&lt;p&gt;This dataset contains temporal snapshots taken every 0.04 seconds during the November 12th, 2015 Golden State Warriors vs. Minnesota Timberwolves game (upon which Curry is on the court). It was told that Curry took **24** shots. For each shot, you are expected to find when he is releasing the ball from his hands with as much accuracy as possible. The data source is from [SportVU](https://www.stats.com/sportvu-basketball/). These are the variables:
&lt;ul type=&#34;disc&#34;&gt;
&lt;li&gt;“Time” - time left in the game (In fractional minutes)&lt;/li&gt;
&lt;li&gt;“currylhoop” - distance from Curry to the left hoop&lt;/li&gt;
&lt;li&gt;“curryrhoop” - distance from Curry to the right hoop&lt;/li&gt;
&lt;li&gt;“balllhoop” - distance from the ball to the left hoop&lt;/li&gt;
&lt;li&gt;“ballrhoop” - distance from the ball to the right hoop&lt;/li&gt;
&lt;li&gt;“def1dist” - distance from the 1st defender to Curry&lt;/li&gt;
&lt;li&gt;“def2dist” - distance from the 2nd defender to Curry&lt;/li&gt;
&lt;li&gt;“def3dist” - distance from the 3rd defender to Curry&lt;/li&gt;
&lt;li&gt;“def4dist” - distance from the 4th defender to Curry&lt;/li&gt;
&lt;li&gt;“def5dist” - distance from the 5th defender to Curry&lt;/li&gt;
&lt;/ul&gt;
&lt;/p&gt;

&lt;p&gt;It is a little bit surprise to me at first because it&#39;s not a typically supervised learning problem. There are some challenges or ambiguities involved: 
&lt;ol type=&#34;a&#34;&gt;
&lt;li&gt;They don&#39;t provide the actual times that Curry shot the balls. This makes it difficult to apply a supervised learning algorithm. Maybe it leaves for competitors to get the information so that it&#39;s possible to use in a supervised training and testing framework, since it allows competitors to ultilize other data/resources. On the other hand, it&#39;s possible to be treated as a unsupervised problem, for example, anomaly detection based on the activity patterns. So I see there are two direction here.&lt;/li&gt;
&lt;li&gt;Note that they will evaluate the final score of our algorithm/model with another new dataset. So we need to be careful about generalization ability of our model.&lt;/li&gt;
&lt;li&gt;Interestingly, it asks to predict the interval of times and it would evaluate an overall score based on the following formula. 
\begin{equation}
score = \frac{\sum_{i=1}^{|s|}I_{T_i}\frac{1}{1+s_{i2}-s_{i1}}}{|T|+(|S|-|T|)^2}
\end{equation}
where $S_i: \{(s_{i1}, s_{i2})\mid s_{i1} \leq s_{i2}\}$, $\| T\|=24$, $\|S\|\geq \|T\|$ and $I_{T_i}:\{1 \mid S_i \in T_i\}$.
Thus, there is room and trade-off for us to determine the interval of the times to get a higher overall prediction score to win the competition.
&lt;/li&gt; 
&lt;/ol&gt;
&lt;/p&gt;

&lt;h2&gt; Load Libraries&lt;/h2&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;import numpy as np
import pandas as pd
import seaborn as sns
import pickle
import matplotlib.pyplot as plt
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;import matplotlib.pylab as pylab
params = {&#39;legend.fontsize&#39;: &#39;x-large&#39;,
         &#39;axes.labelsize&#39;: &#39;x-large&#39;,
         &#39;axes.titlesize&#39;:&#39;x-large&#39;,
         &#39;xtick.labelsize&#39;:&#39;x-large&#39;,
         &#39;ytick.labelsize&#39;:&#39;x-large&#39;}
pylab.rcParams.update(params)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;pd.set_option(&#39;display.max_colwidth&#39;, -1)
plt.rcdefaults()
sns.set(style=&amp;quot;whitegrid&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;curry_df = pd.read_csv(&amp;quot;curry3.csv&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;curry_df.head()
&lt;/code&gt;&lt;/pre&gt;

&lt;div style=&#34;height:100%;overflow:auto;&#34;&gt;
&lt;table border=&#34;1&#34; class=&#34;dataframe&#34;&gt;
  &lt;thead&gt;
    &lt;tr style=&#34;text-align: right;&#34;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;time&lt;/th&gt;
      &lt;th&gt;curryball&lt;/th&gt;
      &lt;th&gt;currylhoop&lt;/th&gt;
      &lt;th&gt;curryrhoop&lt;/th&gt;
      &lt;th&gt;balllhoop&lt;/th&gt;
      &lt;th&gt;ballrhoop&lt;/th&gt;
      &lt;th&gt;def1dist&lt;/th&gt;
      &lt;th&gt;def2dist&lt;/th&gt;
      &lt;th&gt;def3dist&lt;/th&gt;
      &lt;th&gt;def4dist&lt;/th&gt;
      &lt;th&gt;def5dist&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt;47.92533&lt;/td&gt;
      &lt;td&gt;0.965270&lt;/td&gt;
      &lt;td&gt;37.686696&lt;/td&gt;
      &lt;td&gt;51.420125&lt;/td&gt;
      &lt;td&gt;37.697605&lt;/td&gt;
      &lt;td&gt;50.813065&lt;/td&gt;
      &lt;td&gt;8.603274&lt;/td&gt;
      &lt;td&gt;16.950232&lt;/td&gt;
      &lt;td&gt;27.471575&lt;/td&gt;
      &lt;td&gt;30.409634&lt;/td&gt;
      &lt;td&gt;35.474795&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;td&gt;47.92450&lt;/td&gt;
      &lt;td&gt;0.797786&lt;/td&gt;
      &lt;td&gt;37.290305&lt;/td&gt;
      &lt;td&gt;51.855878&lt;/td&gt;
      &lt;td&gt;37.555269&lt;/td&gt;
      &lt;td&gt;51.177335&lt;/td&gt;
      &lt;td&gt;8.298388&lt;/td&gt;
      &lt;td&gt;16.730251&lt;/td&gt;
      &lt;td&gt;27.240581&lt;/td&gt;
      &lt;td&gt;30.249721&lt;/td&gt;
      &lt;td&gt;35.246274&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt;47.92383&lt;/td&gt;
      &lt;td&gt;1.035342&lt;/td&gt;
      &lt;td&gt;36.870045&lt;/td&gt;
      &lt;td&gt;52.285237&lt;/td&gt;
      &lt;td&gt;36.950707&lt;/td&gt;
      &lt;td&gt;51.578687&lt;/td&gt;
      &lt;td&gt;7.992415&lt;/td&gt;
      &lt;td&gt;16.471735&lt;/td&gt;
      &lt;td&gt;26.975070&lt;/td&gt;
      &lt;td&gt;30.059684&lt;/td&gt;
      &lt;td&gt;34.973485&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt;47.92317&lt;/td&gt;
      &lt;td&gt;2.126335&lt;/td&gt;
      &lt;td&gt;36.451216&lt;/td&gt;
      &lt;td&gt;52.728202&lt;/td&gt;
      &lt;td&gt;36.566778&lt;/td&gt;
      &lt;td&gt;51.347007&lt;/td&gt;
      &lt;td&gt;7.693763&lt;/td&gt;
      &lt;td&gt;16.237772&lt;/td&gt;
      &lt;td&gt;26.712746&lt;/td&gt;
      &lt;td&gt;29.885916&lt;/td&gt;
      &lt;td&gt;34.705748&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt;47.92250&lt;/td&gt;
      &lt;td&gt;2.704138&lt;/td&gt;
      &lt;td&gt;36.022605&lt;/td&gt;
      &lt;td&gt;53.181823&lt;/td&gt;
      &lt;td&gt;35.945881&lt;/td&gt;
      &lt;td&gt;51.625402&lt;/td&gt;
      &lt;td&gt;7.393487&lt;/td&gt;
      &lt;td&gt;15.996931&lt;/td&gt;
      &lt;td&gt;26.437723&lt;/td&gt;
      &lt;td&gt;29.697227&lt;/td&gt;
      &lt;td&gt;34.429396&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;curry_df.shape
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;(55615, 11)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;It&amp;rsquo;s tricky to note that the dataset include all the movement data of Curry on the field and he may play offense or defense.  And he played nearly equal time in the first half and second half. So we could expect the probability that Curry was in the side closer to either left or right hoop should be somewhat equal with each other. Anyways We can do some sanity checks first to verify that. It is what you expected.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;sum(map(lambda i,j: i&amp;lt;j, curry_df[&#39;currylhoop&#39;],cur ry_df[&#39;curryrhoop&#39;]))
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;27334
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;27334/55615.0 
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;0.4914861098624472
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;sum(map(lambda i,j: i&amp;lt;j, curry_df[&#39;balllhoop&#39;],curry_df[&#39;ballrhoop&#39;]))
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;28468
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;28468/55615.0 
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;0.5118762923671671
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;exploratory-data-analysis&#34;&gt;Exploratory Data Analysis&lt;/h2&gt;

&lt;p&gt;As we know, Stephen Curry is a special shooter in the NBA history, especially in 2015-2016 Season. Our goal is to infer his shot times based on his movement patterns.&lt;/p&gt;

&lt;p&gt;First, since Stephen Curry is known for his 3-point and long-distance shots, we would be interested in how the distance between Curry and the hoop varies around the 3-point line. Through some research about the specific game online, we know for the first half, the left hoop is the goal of Golden Warriors, and vice versa. However, as we can see, there are a lot of fluatuations because Curry were playing defense or offense. So we somehow need to come up with some clever ways to identify whether Curry is in attacking mode or not.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;curry_df[&#39;curryhoop_min&#39;] = map(lambda i,j: min(i,j), curry_df[&#39;currylhoop&#39;] ,curry_df[&#39;curryrhoop&#39;] )
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;plt.figure(figsize=(100,40))
plt.plot(curry_df.index, curry_df[&#39;curryhoop_min&#39;], &#39;-&#39;)
plt.title(&amp;quot;Closest Distance between Hoop and Curry over time&amp;quot;, fontsize = 50)
plt.xlabel(&#39;Index&#39;, fontsize=30)
plt.ylabel(&#39;Distance&#39;, fontsize=30)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;../PMC-project_files/output_17_1.png&#34; class=&#34;img-responsive&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;We have to transform the &lt;strong&gt;&lt;code&gt;time&lt;/code&gt;&lt;/strong&gt; variable to make it more understandable and easy to inteprete.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;def getQuarter(x):
    if x &amp;gt;=36: 
        return 1
    elif 36 &amp;gt; x &amp;gt;= 24:
        return 2
    elif 24 &amp;gt;= x &amp;gt;= 12:
        return 3
    else:
        return 4
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;curry_df[&#39;quarter&#39;] = map(lambda x: getQuarter(x), curry_df[&#39;time&#39;])
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;def getMinSecInQuarter(time, quarter):
    mins = int(time - 12 * (4-quarter))
    secs = int(((time - 12 * (4-quarter))-mins)*60)
    millisecs = round((((time - 12 * (4-quarter))-mins)*60)- secs,2)
    return pd.Series({&#39;minute&#39;: mins,&#39;second&#39;:secs, &#39;milisecs&#39;: millisecs})
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;curry_df = curry_df.merge(curry_df.apply(lambda row: getMinSecInQuarter(row[&#39;time&#39;],row[&#39;quarter&#39;]), axis = 1), left_index=True, right_index=True)
&lt;/code&gt;&lt;/pre&gt;

&lt;h2&gt;First Shot&lt;/h2&gt;
&lt;p&gt; Let&#39;s try to use our reasoning first. As we know when a ball is shot, the distance between the player and the ball will increase while the distance between the ball and the hoop will decrease. So we define _ballhoopmin_ as the actual distance between the ball and the hoop. Thus, we can infer that if the ratio between _curryball_ and _ballhoopmin_ is large, it&#39;s likely that the ball is in the fly.&lt;/p&gt;


```python
curry_df[&#39;ballhoop_min&#39;] = map(lambda i, j: min(i,j), curry_df[&#39;balllhoop&#39;], curry_df[&#39;ballrhoop&#39;])
```


```python
curry_df.head()
```


&lt;div style=&#34;height:100%;overflow:auto;&#34;&gt;
&lt;table border=&#34;1&#34; class=&#34;dataframe&#34;&gt;
  &lt;thead&gt;
    &lt;tr style=&#34;text-align: right;&#34;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;index&lt;/th&gt;
      &lt;th&gt;time&lt;/th&gt;
      &lt;th&gt;curryball&lt;/th&gt;
      &lt;th&gt;currylhoop&lt;/th&gt;
      &lt;th&gt;curryrhoop&lt;/th&gt;
      &lt;th&gt;balllhoop&lt;/th&gt;
      &lt;th&gt;ballrhoop&lt;/th&gt;
      &lt;th&gt;def1dist&lt;/th&gt;
      &lt;th&gt;def2dist&lt;/th&gt;
      &lt;th&gt;def3dist&lt;/th&gt;
      &lt;th&gt;def4dist&lt;/th&gt;
      &lt;th&gt;def5dist&lt;/th&gt;
      &lt;th&gt;curryhoop_min&lt;/th&gt;
      &lt;th&gt;quarter&lt;/th&gt;
      &lt;th&gt;milisecs&lt;/th&gt;
      &lt;th&gt;minute&lt;/th&gt;
      &lt;th&gt;second&lt;/th&gt;
      &lt;th&gt;ballhoop_min&lt;/th&gt;
      &lt;th&gt;dist_ratio&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;47.92533&lt;/td&gt;
      &lt;td&gt;0.965270&lt;/td&gt;
      &lt;td&gt;37.686696&lt;/td&gt;
      &lt;td&gt;51.420125&lt;/td&gt;
      &lt;td&gt;37.697605&lt;/td&gt;
      &lt;td&gt;50.813065&lt;/td&gt;
      &lt;td&gt;8.603274&lt;/td&gt;
      &lt;td&gt;16.950232&lt;/td&gt;
      &lt;td&gt;27.471575&lt;/td&gt;
      &lt;td&gt;30.409634&lt;/td&gt;
      &lt;td&gt;35.474795&lt;/td&gt;
      &lt;td&gt;37.686696&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0.52&lt;/td&gt;
      &lt;td&gt;11.0&lt;/td&gt;
      &lt;td&gt;55.0&lt;/td&gt;
      &lt;td&gt;37.697605&lt;/td&gt;
      &lt;td&gt;0.025606&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;47.92450&lt;/td&gt;
      &lt;td&gt;0.797786&lt;/td&gt;
      &lt;td&gt;37.290305&lt;/td&gt;
      &lt;td&gt;51.855878&lt;/td&gt;
      &lt;td&gt;37.555269&lt;/td&gt;
      &lt;td&gt;51.177335&lt;/td&gt;
      &lt;td&gt;8.298388&lt;/td&gt;
      &lt;td&gt;16.730251&lt;/td&gt;
      &lt;td&gt;27.240581&lt;/td&gt;
      &lt;td&gt;30.249721&lt;/td&gt;
      &lt;td&gt;35.246274&lt;/td&gt;
      &lt;td&gt;37.290305&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0.47&lt;/td&gt;
      &lt;td&gt;11.0&lt;/td&gt;
      &lt;td&gt;55.0&lt;/td&gt;
      &lt;td&gt;37.555269&lt;/td&gt;
      &lt;td&gt;0.021243&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;47.92383&lt;/td&gt;
      &lt;td&gt;1.035342&lt;/td&gt;
      &lt;td&gt;36.870045&lt;/td&gt;
      &lt;td&gt;52.285237&lt;/td&gt;
      &lt;td&gt;36.950707&lt;/td&gt;
      &lt;td&gt;51.578687&lt;/td&gt;
      &lt;td&gt;7.992415&lt;/td&gt;
      &lt;td&gt;16.471735&lt;/td&gt;
      &lt;td&gt;26.975070&lt;/td&gt;
      &lt;td&gt;30.059684&lt;/td&gt;
      &lt;td&gt;34.973485&lt;/td&gt;
      &lt;td&gt;36.870045&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0.43&lt;/td&gt;
      &lt;td&gt;11.0&lt;/td&gt;
      &lt;td&gt;55.0&lt;/td&gt;
      &lt;td&gt;36.950707&lt;/td&gt;
      &lt;td&gt;0.028020&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;47.92317&lt;/td&gt;
      &lt;td&gt;2.126335&lt;/td&gt;
      &lt;td&gt;36.451216&lt;/td&gt;
      &lt;td&gt;52.728202&lt;/td&gt;
      &lt;td&gt;36.566778&lt;/td&gt;
      &lt;td&gt;51.347007&lt;/td&gt;
      &lt;td&gt;7.693763&lt;/td&gt;
      &lt;td&gt;16.237772&lt;/td&gt;
      &lt;td&gt;26.712746&lt;/td&gt;
      &lt;td&gt;29.885916&lt;/td&gt;
      &lt;td&gt;34.705748&lt;/td&gt;
      &lt;td&gt;36.451216&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0.39&lt;/td&gt;
      &lt;td&gt;11.0&lt;/td&gt;
      &lt;td&gt;55.0&lt;/td&gt;
      &lt;td&gt;36.566778&lt;/td&gt;
      &lt;td&gt;0.058149&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;47.92250&lt;/td&gt;
      &lt;td&gt;2.704138&lt;/td&gt;
      &lt;td&gt;36.022605&lt;/td&gt;
      &lt;td&gt;53.181823&lt;/td&gt;
      &lt;td&gt;35.945881&lt;/td&gt;
      &lt;td&gt;51.625402&lt;/td&gt;
      &lt;td&gt;7.393487&lt;/td&gt;
      &lt;td&gt;15.996931&lt;/td&gt;
      &lt;td&gt;26.437723&lt;/td&gt;
      &lt;td&gt;29.697227&lt;/td&gt;
      &lt;td&gt;34.429396&lt;/td&gt;
      &lt;td&gt;36.022605&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0.35&lt;/td&gt;
      &lt;td&gt;11.0&lt;/td&gt;
      &lt;td&gt;55.0&lt;/td&gt;
      &lt;td&gt;35.945881&lt;/td&gt;
      &lt;td&gt;0.075228&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;




```python
curry_df[&#39;dist_ratio&#39;] = curry_df[&#39;curryball&#39;] / curry_df[&#39;ballhoop_min&#39;]
```

Let&#39;s see whether we can observe any pattern of this distance ratio. We can see that there are some obvious spikes, which are probably what we are looking for. Next, we can extract those corresponding times.


```python
curry_df.reset_index(inplace=True)
```


```python
%matplotlib inline
plt.figure(figsize=(100,40))
plt.plot(curry_df[&#39;index&#39;], curry_df[&#39;dist_ratio&#39;], &#39;-&#39;)
plt.title(&#34;Distance Ratio over time&#34;, fontsize = 50)
plt.xlabel(&#39;Index&#39;, fontsize=30)
plt.ylabel(&#39;Distance Ratio&#39;, fontsize=30)
plt.show()
```
&lt;img src=&#34;../PMC-project_files/output_29_0.png&#34; class=&#34;img-responsive&#34; style=&#34;display: block; margin: auto;&#34; /&gt;





```python
# Find the times with the top 24 highest spikes
curry_df.nlargest(24, &#39;dist_ratio&#39;)[[&#34;time&#34;, &#34;dist_ratio&#34;, &#34;curryhoop_min&#34;,&#34;quarter&#34;]]
```

&lt;div&gt;
&lt;table border=&#34;1&#34; class=&#34;dataframe&#34;&gt;
  &lt;thead&gt;
    &lt;tr style=&#34;text-align: right;&#34;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;time&lt;/th&gt;
      &lt;th&gt;dist_ratio&lt;/th&gt;
      &lt;th&gt;curryhoop_min&lt;/th&gt;
      &lt;th&gt;quarter&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;7600&lt;/th&gt;
      &lt;td&gt;42.86000&lt;/td&gt;
      &lt;td&gt;941.658649&lt;/td&gt;
      &lt;td&gt;26.536377&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;984&lt;/th&gt;
      &lt;td&gt;47.26917&lt;/td&gt;
      &lt;td&gt;673.596547&lt;/td&gt;
      &lt;td&gt;24.232998&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;52328&lt;/th&gt;
      &lt;td&gt;2.19100&lt;/td&gt;
      &lt;td&gt;580.250936&lt;/td&gt;
      &lt;td&gt;18.255410&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;43072&lt;/th&gt;
      &lt;td&gt;14.02417&lt;/td&gt;
      &lt;td&gt;531.475767&lt;/td&gt;
      &lt;td&gt;28.710639&lt;/td&gt;
      &lt;td&gt;3&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;47706&lt;/th&gt;
      &lt;td&gt;5.41300&lt;/td&gt;
      &lt;td&gt;434.798704&lt;/td&gt;
      &lt;td&gt;23.713664&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;41432&lt;/th&gt;
      &lt;td&gt;15.11750&lt;/td&gt;
      &lt;td&gt;433.106794&lt;/td&gt;
      &lt;td&gt;30.614339&lt;/td&gt;
      &lt;td&gt;3&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;52329&lt;/th&gt;
      &lt;td&gt;2.19033&lt;/td&gt;
      &lt;td&gt;369.158118&lt;/td&gt;
      &lt;td&gt;18.407326&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;19805&lt;/th&gt;
      &lt;td&gt;29.68417&lt;/td&gt;
      &lt;td&gt;281.887963&lt;/td&gt;
      &lt;td&gt;22.637169&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;982&lt;/th&gt;
      &lt;td&gt;47.27050&lt;/td&gt;
      &lt;td&gt;274.460240&lt;/td&gt;
      &lt;td&gt;24.283017&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;47707&lt;/th&gt;
      &lt;td&gt;5.41233&lt;/td&gt;
      &lt;td&gt;266.074215&lt;/td&gt;
      &lt;td&gt;24.107225&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;981&lt;/th&gt;
      &lt;td&gt;47.27117&lt;/td&gt;
      &lt;td&gt;264.607287&lt;/td&gt;
      &lt;td&gt;24.304749&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;19276&lt;/th&gt;
      &lt;td&gt;30.09017&lt;/td&gt;
      &lt;td&gt;235.350832&lt;/td&gt;
      &lt;td&gt;36.780734&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;9096&lt;/th&gt;
      &lt;td&gt;41.81467&lt;/td&gt;
      &lt;td&gt;234.948026&lt;/td&gt;
      &lt;td&gt;7.722907&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;14598&lt;/th&gt;
      &lt;td&gt;38.08533&lt;/td&gt;
      &lt;td&gt;223.859015&lt;/td&gt;
      &lt;td&gt;9.388604&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;6861&lt;/th&gt;
      &lt;td&gt;43.35267&lt;/td&gt;
      &lt;td&gt;215.994452&lt;/td&gt;
      &lt;td&gt;30.577963&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;42100&lt;/th&gt;
      &lt;td&gt;14.67217&lt;/td&gt;
      &lt;td&gt;211.754106&lt;/td&gt;
      &lt;td&gt;31.718987&lt;/td&gt;
      &lt;td&gt;3&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;6860&lt;/th&gt;
      &lt;td&gt;43.35333&lt;/td&gt;
      &lt;td&gt;209.289207&lt;/td&gt;
      &lt;td&gt;30.424288&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;43073&lt;/th&gt;
      &lt;td&gt;14.02350&lt;/td&gt;
      &lt;td&gt;207.605952&lt;/td&gt;
      &lt;td&gt;28.960756&lt;/td&gt;
      &lt;td&gt;3&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;16937&lt;/th&gt;
      &lt;td&gt;36.52900&lt;/td&gt;
      &lt;td&gt;204.341708&lt;/td&gt;
      &lt;td&gt;33.667907&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;18823&lt;/th&gt;
      &lt;td&gt;30.39250&lt;/td&gt;
      &lt;td&gt;201.161102&lt;/td&gt;
      &lt;td&gt;25.614859&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;52327&lt;/th&gt;
      &lt;td&gt;2.19167&lt;/td&gt;
      &lt;td&gt;199.797752&lt;/td&gt;
      &lt;td&gt;18.103289&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;10283&lt;/th&gt;
      &lt;td&gt;41.02433&lt;/td&gt;
      &lt;td&gt;198.874455&lt;/td&gt;
      &lt;td&gt;34.357564&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;52330&lt;/th&gt;
      &lt;td&gt;2.18967&lt;/td&gt;
      &lt;td&gt;190.416307&lt;/td&gt;
      &lt;td&gt;18.566167&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;33665&lt;/th&gt;
      &lt;td&gt;20.34900&lt;/td&gt;
      &lt;td&gt;185.174150&lt;/td&gt;
      &lt;td&gt;14.383419&lt;/td&gt;
      &lt;td&gt;3&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;



It seems reasonable. We then prepare our submission to test our rough model. We simply contructed the intervals by adding 0.05 in minutes. It turned out we only got the prediction accuracy about 0.198. So we had to look for other methods.


```python
curry_df.columns
```




    Index([u&#39;time&#39;, u&#39;curryball&#39;, u&#39;currylhoop&#39;, u&#39;curryrhoop&#39;, u&#39;balllhoop&#39;,
           u&#39;ballrhoop&#39;, u&#39;def1dist&#39;, u&#39;def2dist&#39;, u&#39;def3dist&#39;, u&#39;def4dist&#39;,
           u&#39;def5dist&#39;, u&#39;curryhoop_min&#39;, u&#39;quarter&#39;, u&#39;milisecs&#39;, u&#39;minute&#39;,
           u&#39;second&#39;, u&#39;ballhoop_min&#39;, u&#39;dist_ratio&#39;, u&#39;curryball_pctChg&#39;],
          dtype=&#39;object&#39;)




```python
curry_times = curry_df.nlargest(24, &#39;dist_ratio&#39;).time.values
# prepare submission file
curry_submit = pd.DataFrame({&#39;upper&#39;: curry_times + 0.05,&#39;lower&#39;: curry_times}, )[[&#39;upper&#39;, &#39;lower&#39;]]
curry_submit.to_csv(&#39;curry_pred1.csv&#39;, index = False)
```


```python
# Another heauristic approach
curry_df[&#39;curryball_pctChg&#39;] = curry_df[&#39;curryball&#39;].pct_change(25*3) # 3 seconds
curry_df[&#39;ballhoop_min_pcgChg&#39;] = curry_df[&#39;ballhoop_min&#39;].pct_change(25*3) # 3 seconds
curry_df[&#39;dist_ratio_pctChg&#39;] = curry_df[&#39;dist_ratio&#39;].pct_change(25*3) # 3 seconds

curry_df.nlargest(24, [&#39;dist_ratio_pctChg&#39;, &#39;ballhoop_min_pcgChg&#39;,&#39;curryball_pctChg&#39;])[[&#34;time&#34;, &#34;quarter&#34;, &#34;curryball_pctChg&#34;, &#34;ballhoop_min_pcgChg&#34;,&#34;dist_ratio_pctChg&#34;]]
```




&lt;div&gt;
&lt;table border=&#34;1&#34; class=&#34;dataframe&#34;&gt;
  &lt;thead&gt;
    &lt;tr style=&#34;text-align: right;&#34;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;time&lt;/th&gt;
      &lt;th&gt;quarter&lt;/th&gt;
      &lt;th&gt;curryball_pctChg&lt;/th&gt;
      &lt;th&gt;ballhoop_min_pcgChg&lt;/th&gt;
      &lt;th&gt;dist_ratio_pctChg&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;7600&lt;/th&gt;
      &lt;td&gt;42.86000&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;19.900084&lt;/td&gt;
      &lt;td&gt;-0.998690&lt;/td&gt;
      &lt;td&gt;15957.179434&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;41432&lt;/th&gt;
      &lt;td&gt;15.11750&lt;/td&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;23.893631&lt;/td&gt;
      &lt;td&gt;-0.998094&lt;/td&gt;
      &lt;td&gt;13060.238297&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;43072&lt;/th&gt;
      &lt;td&gt;14.02417&lt;/td&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;17.547261&lt;/td&gt;
      &lt;td&gt;-0.998397&lt;/td&gt;
      &lt;td&gt;11570.539712&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2062&lt;/th&gt;
      &lt;td&gt;46.55050&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;26.098719&lt;/td&gt;
      &lt;td&gt;-0.995940&lt;/td&gt;
      &lt;td&gt;6672.902973&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;43073&lt;/th&gt;
      &lt;td&gt;14.02350&lt;/td&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;18.545367&lt;/td&gt;
      &lt;td&gt;-0.995844&lt;/td&gt;
      &lt;td&gt;4701.474897&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;15516&lt;/th&gt;
      &lt;td&gt;37.47500&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;18.436189&lt;/td&gt;
      &lt;td&gt;-0.995833&lt;/td&gt;
      &lt;td&gt;4662.975981&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;48990&lt;/th&gt;
      &lt;td&gt;4.55700&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;39.575986&lt;/td&gt;
      &lt;td&gt;-0.990790&lt;/td&gt;
      &lt;td&gt;4404.777254&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;21572&lt;/th&gt;
      &lt;td&gt;28.50617&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;54.559725&lt;/td&gt;
      &lt;td&gt;-0.985603&lt;/td&gt;
      &lt;td&gt;3858.244006&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;21573&lt;/th&gt;
      &lt;td&gt;28.50550&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;54.482756&lt;/td&gt;
      &lt;td&gt;-0.985187&lt;/td&gt;
      &lt;td&gt;3744.661281&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;47706&lt;/th&gt;
      &lt;td&gt;5.41300&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;9.309178&lt;/td&gt;
      &lt;td&gt;-0.997226&lt;/td&gt;
      &lt;td&gt;3715.907761&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;10283&lt;/th&gt;
      &lt;td&gt;41.02433&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;26.174887&lt;/td&gt;
      &lt;td&gt;-0.992601&lt;/td&gt;
      &lt;td&gt;3671.606449&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;21574&lt;/th&gt;
      &lt;td&gt;28.50483&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;60.650835&lt;/td&gt;
      &lt;td&gt;-0.982348&lt;/td&gt;
      &lt;td&gt;3491.645703&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;41433&lt;/th&gt;
      &lt;td&gt;15.11683&lt;/td&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;24.428133&lt;/td&gt;
      &lt;td&gt;-0.992558&lt;/td&gt;
      &lt;td&gt;3415.769885&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;41431&lt;/th&gt;
      &lt;td&gt;15.11833&lt;/td&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;27.986632&lt;/td&gt;
      &lt;td&gt;-0.990870&lt;/td&gt;
      &lt;td&gt;3174.013392&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;48989&lt;/th&gt;
      &lt;td&gt;4.55767&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;39.985800&lt;/td&gt;
      &lt;td&gt;-0.986866&lt;/td&gt;
      &lt;td&gt;3119.690776&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1510&lt;/th&gt;
      &lt;td&gt;46.91850&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;16.986352&lt;/td&gt;
      &lt;td&gt;-0.993484&lt;/td&gt;
      &lt;td&gt;2759.132521&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;27372&lt;/th&gt;
      &lt;td&gt;24.56750&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;42.719127&lt;/td&gt;
      &lt;td&gt;-0.984090&lt;/td&gt;
      &lt;td&gt;2746.966359&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1513&lt;/th&gt;
      &lt;td&gt;46.91650&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;19.801880&lt;/td&gt;
      &lt;td&gt;-0.992428&lt;/td&gt;
      &lt;td&gt;2746.179540&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;27373&lt;/th&gt;
      &lt;td&gt;24.56683&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;50.255761&lt;/td&gt;
      &lt;td&gt;-0.981097&lt;/td&gt;
      &lt;td&gt;2710.527264&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1512&lt;/th&gt;
      &lt;td&gt;46.91717&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;20.080091&lt;/td&gt;
      &lt;td&gt;-0.992072&lt;/td&gt;
      &lt;td&gt;2657.842502&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;27371&lt;/th&gt;
      &lt;td&gt;24.56817&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;30.435812&lt;/td&gt;
      &lt;td&gt;-0.987464&lt;/td&gt;
      &lt;td&gt;2506.588780&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;15517&lt;/th&gt;
      &lt;td&gt;37.47433&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;19.043743&lt;/td&gt;
      &lt;td&gt;-0.992002&lt;/td&gt;
      &lt;td&gt;2505.107109&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;47707&lt;/th&gt;
      &lt;td&gt;5.41233&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;10.563076&lt;/td&gt;
      &lt;td&gt;-0.995336&lt;/td&gt;
      &lt;td&gt;2478.333671&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;48991&lt;/th&gt;
      &lt;td&gt;4.55633&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;43.048869&lt;/td&gt;
      &lt;td&gt;-0.981782&lt;/td&gt;
      &lt;td&gt;2416.834482&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;




```python
curry_times = curry_df.nlargest(24, [&#39;dist_ratio_pctChg&#39;, &#39;ballhoop_min_pcgChg&#39;,&#39;curryball_pctChg&#39;]).time.values
# prepare submission file
curry_submit = pd.DataFrame({&#39;upper&#39;: curry_times + 0.06,&#39;lower&#39;: curry_times+ 0.01}, )[[&#39;upper&#39;, &#39;lower&#39;]]
curry_submit.to_csv(&#39;curry_pred1.csv&#39;, index = False)
```

&lt;h2&gt;Can we get the &#34;labels&#34;?&lt;/h2&gt;

&lt;p&gt;It&amp;rsquo;s obvious that the raw data doesn&amp;rsquo;t directly tell us when Curry made the shots. However, given the background information about the game, it&amp;rsquo;s possible to find out those actual shooting times, for example, by watching this specific past &lt;a href=&#34;https://www.youtube.com/watch?v=5PozYV_qHD8&#34;&gt;game&lt;/a&gt;. Although we are not supposed to use it as the submission, ideally, we can use the information to denote the corresponding Curry&amp;rsquo;s shooting times as a way to tune our pattern regconition algorithm.&lt;/p&gt;

&lt;p&gt;Acutally, there is a more clever way to get the labels. We found we can scrape the actual shot times by Curry on the official NBA statistics website &lt;a href=&#34;http://stats.nba.com/game/#!/0021500125/playbyplay/&#34;&gt;here&lt;/a&gt;. It&amp;rsquo;s a little tricky that the website is dynamically generated. To do the web scraping, first we can try to find the API access point by locating Develop Tools -&amp;gt; Network -&amp;gt; XHR in Chrome. Luckily, we found it exists. Then we can go ahead to scrape the information we want.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;import requests
#may need to open on the browser first
shots_url = &#39;http://stats.nba.com/stats/playbyplayv2?EndPeriod=10&amp;amp;EndRange=55800&amp;amp;GameID=0021500125&amp;amp;RangeType=2&amp;amp;Season=2015-16&amp;amp;SeasonType=Regular+Season&amp;amp;StartPeriod=1&amp;amp;StartRange=0&#39;

# request the URL and parse the JSON
response = requests.get(shots_url)
#response.raise_for_status() # raise exception if invalid response
shot_logs = response.json()[&#39;resultSets&#39;][0][&#39;rowSet&#39;]
headers = response.json()[&#39;resultSets&#39;][0][&#39;headers&#39;]
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;shots_df = pd.DataFrame(shot_logs, columns = headers)
shots_df.head()
&lt;/code&gt;&lt;/pre&gt;

&lt;div style=&#34;height:100%;overflow:auto;&#34;&gt;
&lt;table border=&#34;1&#34; class=&#34;dataframe&#34;&gt;
  &lt;thead&gt;
    &lt;tr style=&#34;text-align: right;&#34;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;GAME_ID&lt;/th&gt;
      &lt;th&gt;EVENTNUM&lt;/th&gt;
      &lt;th&gt;EVENTMSGTYPE&lt;/th&gt;
      &lt;th&gt;EVENTMSGACTIONTYPE&lt;/th&gt;
      &lt;th&gt;PERIOD&lt;/th&gt;
      &lt;th&gt;WCTIMESTRING&lt;/th&gt;
      &lt;th&gt;PCTIMESTRING&lt;/th&gt;
      &lt;th&gt;HOMEDESCRIPTION&lt;/th&gt;
      &lt;th&gt;NEUTRALDESCRIPTION&lt;/th&gt;
      &lt;th&gt;VISITORDESCRIPTION&lt;/th&gt;
      &lt;th&gt;...&lt;/th&gt;
      &lt;th&gt;PLAYER2_TEAM_CITY&lt;/th&gt;
      &lt;th&gt;PLAYER2_TEAM_NICKNAME&lt;/th&gt;
      &lt;th&gt;PLAYER2_TEAM_ABBREVIATION&lt;/th&gt;
      &lt;th&gt;PERSON3TYPE&lt;/th&gt;
      &lt;th&gt;PLAYER3_ID&lt;/th&gt;
      &lt;th&gt;PLAYER3_NAME&lt;/th&gt;
      &lt;th&gt;PLAYER3_TEAM_ID&lt;/th&gt;
      &lt;th&gt;PLAYER3_TEAM_CITY&lt;/th&gt;
      &lt;th&gt;PLAYER3_TEAM_NICKNAME&lt;/th&gt;
      &lt;th&gt;PLAYER3_TEAM_ABBREVIATION&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt;0021500125&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;12&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;8:16 PM&lt;/td&gt;
      &lt;td&gt;12:00&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;...&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;td&gt;0021500125&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;10&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;8:16 PM&lt;/td&gt;
      &lt;td&gt;12:00&lt;/td&gt;
      &lt;td&gt;Jump Ball Towns vs. Ezeli: Tip to Green&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;...&lt;/td&gt;
      &lt;td&gt;Golden State&lt;/td&gt;
      &lt;td&gt;Warriors&lt;/td&gt;
      &lt;td&gt;GSW&lt;/td&gt;
      &lt;td&gt;5&lt;/td&gt;
      &lt;td&gt;203110&lt;/td&gt;
      &lt;td&gt;Draymond Green&lt;/td&gt;
      &lt;td&gt;1.610613e+09&lt;/td&gt;
      &lt;td&gt;Golden State&lt;/td&gt;
      &lt;td&gt;Warriors&lt;/td&gt;
      &lt;td&gt;GSW&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt;0021500125&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;8:16 PM&lt;/td&gt;
      &lt;td&gt;11:46&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;Green 15&#39; Jump Shot (2 PTS) (Curry 1 AST)&lt;/td&gt;
      &lt;td&gt;...&lt;/td&gt;
      &lt;td&gt;Golden State&lt;/td&gt;
      &lt;td&gt;Warriors&lt;/td&gt;
      &lt;td&gt;GSW&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt;0021500125&lt;/td&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;8:17 PM&lt;/td&gt;
      &lt;td&gt;11:31&lt;/td&gt;
      &lt;td&gt;MISS Wiggins 20&#39; Jump Shot&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;...&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt;0021500125&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;8:17 PM&lt;/td&gt;
      &lt;td&gt;11:30&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;Curry REBOUND (Off:0 Def:1)&lt;/td&gt;
      &lt;td&gt;...&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
      &lt;td&gt;None&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;5 rows × 33 columns&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Thus, we can use regular expression to identify the times of Curry&amp;rsquo;s shots based on the descriptions in the column &lt;strong&gt;&lt;code&gt;VISITORDESCRIPTION&lt;/code&gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;pattern = r&#39;Curry.*(Layup|Shot)&#39;
shots_df[shots_df[&#39;VISITORDESCRIPTION&#39;].str.contains(pattern, na=False)][[&#39;PERIOD&#39;, &#39;PCTIMESTRING&#39;,&#39;VISITORDESCRIPTION&#39;]]
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;C:\Users\jpzha\Anaconda2\lib\site-packages\ipykernel\__main__.py:2: UserWarning: This pattern has match groups. To actually get the groups, use str.extract.
  from ipykernel import kernelapp as app
&lt;/code&gt;&lt;/pre&gt;

&lt;div&gt;
&lt;table border=&#34;1&#34; class=&#34;dataframe&#34;&gt;
  &lt;thead&gt;
    &lt;tr style=&#34;text-align: right;&#34;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;PERIOD&lt;/th&gt;
      &lt;th&gt;PCTIMESTRING&lt;/th&gt;
      &lt;th&gt;VISITORDESCRIPTION&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;7&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;10:54&lt;/td&gt;
      &lt;td&gt;Curry 28&#39; 3PT Jump Shot (3 PTS)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;16&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;9:48&lt;/td&gt;
      &lt;td&gt;Curry 25&#39; 3PT Jump Shot (9 PTS) (Barnes 1 AST)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;30&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;8:07&lt;/td&gt;
      &lt;td&gt;MISS Curry 3&#39; Layup&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;41&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;6:51&lt;/td&gt;
      &lt;td&gt;Curry 24&#39; 3PT Jump Shot (12 PTS) (Ezeli 2 AST)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;74&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;3:38&lt;/td&gt;
      &lt;td&gt;Curry 18&#39; Pullup Jump Shot (16 PTS)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;86&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;2:13&lt;/td&gt;
      &lt;td&gt;MISS Curry  3PT Jump Shot&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;91&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;1:50&lt;/td&gt;
      &lt;td&gt;Curry  Layup (18 PTS) (Bogut 1 AST)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;95&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0:53&lt;/td&gt;
      &lt;td&gt;MISS Curry 7&#39; Floating Jump Shot&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;101&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0:12&lt;/td&gt;
      &lt;td&gt;Curry 24&#39; 3PT Jump Shot (21 PTS) (Iguodala 1 AST)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;185&lt;/th&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;4:13&lt;/td&gt;
      &lt;td&gt;MISS Curry 27&#39; 3PT Jump Shot&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;191&lt;/th&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;3:25&lt;/td&gt;
      &lt;td&gt;Curry 11&#39; Floating Jump Shot (23 PTS) (Green 6 AST)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;220&lt;/th&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;0:00&lt;/td&gt;
      &lt;td&gt;Curry 2&#39; Driving Layup (25 PTS)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;254&lt;/th&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;8:33&lt;/td&gt;
      &lt;td&gt;MISS Curry 21&#39; Jump Shot&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;275&lt;/th&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;6:00&lt;/td&gt;
      &lt;td&gt;MISS Curry 1&#39; Layup&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;284&lt;/th&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;5:17&lt;/td&gt;
      &lt;td&gt;Curry 16&#39; Jump Shot (27 PTS)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;311&lt;/th&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;3:06&lt;/td&gt;
      &lt;td&gt;Curry 26&#39; 3PT Jump Shot (32 PTS)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;313&lt;/th&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;2:39&lt;/td&gt;
      &lt;td&gt;Curry 25&#39; 3PT Jump Shot (35 PTS) (Green 9 AST)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;315&lt;/th&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;2:01&lt;/td&gt;
      &lt;td&gt;MISS Curry 25&#39; 3PT Jump Shot&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;329&lt;/th&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;0:25&lt;/td&gt;
      &lt;td&gt;MISS Curry 10&#39; Floating Jump Shot&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;391&lt;/th&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;5:51&lt;/td&gt;
      &lt;td&gt;Curry 26&#39; 3PT Jump Shot (38 PTS)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;393&lt;/th&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;5:23&lt;/td&gt;
      &lt;td&gt;Curry 17&#39; Jump Shot (40 PTS)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;395&lt;/th&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;4:58&lt;/td&gt;
      &lt;td&gt;MISS Curry 26&#39; 3PT Jump Shot&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;419&lt;/th&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;2:54&lt;/td&gt;
      &lt;td&gt;MISS Curry 28&#39; 3PT Jump Shot&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;432&lt;/th&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;1:55&lt;/td&gt;
      &lt;td&gt;Curry 19&#39; Jump Bank Shot (42 PTS) (Iguodala 5 AST)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;452&lt;/th&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;0:29&lt;/td&gt;
      &lt;td&gt;Curry 26&#39; 3PT Jump Shot (46 PTS) (Green 12 AST)&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;

&lt;h3 id=&#34;can-we-use-the-labels&#34;&gt;Can we use the &amp;ldquo;labels&amp;rdquo;?&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;tmp_time_df = shots_df[shots_df[&#39;VISITORDESCRIPTION&#39;].str.contains(pattern, na=False)][[&#39;PERIOD&#39;, &#39;PCTIMESTRING&#39;]]
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;C:\Users\jpzha\Anaconda2\lib\site-packages\ipykernel\__main__.py:1: UserWarning: This pattern has match groups. To actually get the groups, use str.extract.
  if __name__ == &#39;__main__&#39;:
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;def calGameTime(period, pctimestring):
    mins = int(pctimestring.split(&#39;:&#39;)[0])
    secs = float(pctimestring.split(&#39;:&#39;)[1])
    return (4-period)*12 + mins + secs/60.0
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;tmp_time_df[&#39;shot_time&#39;] = map(lambda x,y: calGameTime(x,y), tmp_time_df.PERIOD, tmp_time_df.PCTIMESTRING)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;tmp_time_df[&#39;upper&#39;] = tmp_time_df[&#39;shot_time&#39;] + 0.08
tmp_time_df[&#39;lower&#39;] = tmp_time_df[&#39;shot_time&#39;] + 0.02 
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;tmp_time_df
&lt;/code&gt;&lt;/pre&gt;

&lt;div style=&#34;height:100%;overflow:auto;&#34;&gt;
&lt;table border=&#34;1&#34; class=&#34;dataframe&#34;&gt;
  &lt;thead&gt;
    &lt;tr style=&#34;text-align: right;&#34;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;PERIOD&lt;/th&gt;
      &lt;th&gt;PCTIMESTRING&lt;/th&gt;
      &lt;th&gt;shot_time&lt;/th&gt;
      &lt;th&gt;upper&lt;/th&gt;
      &lt;th&gt;lower&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;7&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;10:54&lt;/td&gt;
      &lt;td&gt;46.900000&lt;/td&gt;
      &lt;td&gt;46.980000&lt;/td&gt;
      &lt;td&gt;46.920000&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;16&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;9:48&lt;/td&gt;
      &lt;td&gt;45.800000&lt;/td&gt;
      &lt;td&gt;45.880000&lt;/td&gt;
      &lt;td&gt;45.820000&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;30&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;8:07&lt;/td&gt;
      &lt;td&gt;44.116667&lt;/td&gt;
      &lt;td&gt;44.196667&lt;/td&gt;
      &lt;td&gt;44.136667&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;41&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;6:51&lt;/td&gt;
      &lt;td&gt;42.850000&lt;/td&gt;
      &lt;td&gt;42.930000&lt;/td&gt;
      &lt;td&gt;42.870000&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;74&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;3:38&lt;/td&gt;
      &lt;td&gt;39.633333&lt;/td&gt;
      &lt;td&gt;39.713333&lt;/td&gt;
      &lt;td&gt;39.653333&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;86&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;2:13&lt;/td&gt;
      &lt;td&gt;38.216667&lt;/td&gt;
      &lt;td&gt;38.296667&lt;/td&gt;
      &lt;td&gt;38.236667&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;91&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;1:50&lt;/td&gt;
      &lt;td&gt;37.833333&lt;/td&gt;
      &lt;td&gt;37.913333&lt;/td&gt;
      &lt;td&gt;37.853333&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;95&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0:53&lt;/td&gt;
      &lt;td&gt;36.883333&lt;/td&gt;
      &lt;td&gt;36.963333&lt;/td&gt;
      &lt;td&gt;36.903333&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;101&lt;/th&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0:12&lt;/td&gt;
      &lt;td&gt;36.200000&lt;/td&gt;
      &lt;td&gt;36.280000&lt;/td&gt;
      &lt;td&gt;36.220000&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;185&lt;/th&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;4:13&lt;/td&gt;
      &lt;td&gt;28.216667&lt;/td&gt;
      &lt;td&gt;28.296667&lt;/td&gt;
      &lt;td&gt;28.236667&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;191&lt;/th&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;3:25&lt;/td&gt;
      &lt;td&gt;27.416667&lt;/td&gt;
      &lt;td&gt;27.496667&lt;/td&gt;
      &lt;td&gt;27.436667&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;220&lt;/th&gt;
      &lt;td&gt;2&lt;/td&gt;
      &lt;td&gt;0:00&lt;/td&gt;
      &lt;td&gt;24.000000&lt;/td&gt;
      &lt;td&gt;24.080000&lt;/td&gt;
      &lt;td&gt;24.020000&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;254&lt;/th&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;8:33&lt;/td&gt;
      &lt;td&gt;20.550000&lt;/td&gt;
      &lt;td&gt;20.630000&lt;/td&gt;
      &lt;td&gt;20.570000&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;275&lt;/th&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;6:00&lt;/td&gt;
      &lt;td&gt;18.000000&lt;/td&gt;
      &lt;td&gt;18.080000&lt;/td&gt;
      &lt;td&gt;18.020000&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;284&lt;/th&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;5:17&lt;/td&gt;
      &lt;td&gt;17.283333&lt;/td&gt;
      &lt;td&gt;17.363333&lt;/td&gt;
      &lt;td&gt;17.303333&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;311&lt;/th&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;3:06&lt;/td&gt;
      &lt;td&gt;15.100000&lt;/td&gt;
      &lt;td&gt;15.180000&lt;/td&gt;
      &lt;td&gt;15.120000&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;313&lt;/th&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;2:39&lt;/td&gt;
      &lt;td&gt;14.650000&lt;/td&gt;
      &lt;td&gt;14.730000&lt;/td&gt;
      &lt;td&gt;14.670000&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;315&lt;/th&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;2:01&lt;/td&gt;
      &lt;td&gt;14.016667&lt;/td&gt;
      &lt;td&gt;14.096667&lt;/td&gt;
      &lt;td&gt;14.036667&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;329&lt;/th&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td&gt;0:25&lt;/td&gt;
      &lt;td&gt;12.416667&lt;/td&gt;
      &lt;td&gt;12.496667&lt;/td&gt;
      &lt;td&gt;12.436667&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;391&lt;/th&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;5:51&lt;/td&gt;
      &lt;td&gt;5.850000&lt;/td&gt;
      &lt;td&gt;5.930000&lt;/td&gt;
      &lt;td&gt;5.870000&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;393&lt;/th&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;5:23&lt;/td&gt;
      &lt;td&gt;5.383333&lt;/td&gt;
      &lt;td&gt;5.463333&lt;/td&gt;
      &lt;td&gt;5.403333&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;395&lt;/th&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;4:58&lt;/td&gt;
      &lt;td&gt;4.966667&lt;/td&gt;
      &lt;td&gt;5.046667&lt;/td&gt;
      &lt;td&gt;4.986667&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;419&lt;/th&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;2:54&lt;/td&gt;
      &lt;td&gt;2.900000&lt;/td&gt;
      &lt;td&gt;2.980000&lt;/td&gt;
      &lt;td&gt;2.920000&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;432&lt;/th&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;1:55&lt;/td&gt;
      &lt;td&gt;1.916667&lt;/td&gt;
      &lt;td&gt;1.996667&lt;/td&gt;
      &lt;td&gt;1.936667&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;452&lt;/th&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td&gt;0:29&lt;/td&gt;
      &lt;td&gt;0.483333&lt;/td&gt;
      &lt;td&gt;0.563333&lt;/td&gt;
      &lt;td&gt;0.503333&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;Let&amp;rsquo;s validate our labels by submitting this &amp;ldquo;cheated&amp;rdquo; scraping results. It gives us an accuracy rate about 87% on the leader board(top 1) after some twisting on the bounds. Although it&amp;rsquo;s not perfect, we still prefer to ultilize this information since it&amp;rsquo;s at least &amp;ldquo;NBA official&amp;rdquo; labels.:) Notice that we will focus on modeling after this step.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;tmp_time_df[[&#39;upper&#39;, &#39;lower&#39;]].to_csv(&#39;curry_pred2.csv&#39;, index=False)
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;more-eda&#34;&gt;More EDA&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;%matplotlib inline
#plt.figure(figsize=(100,40))
plt.plot(curry_df[(curry_df.time&amp;gt;46.8) &amp;amp; (curry_df.time&amp;lt;47)][&#39;time&#39;], curry_df[(curry_df.time&amp;gt;46.8) &amp;amp; (curry_df.time&amp;lt;47)][&#39;curryball_pctChg&#39;], &#39;-&#39;)
plt.legend([&#39;curryball_pctChg&#39;], bbox_to_anchor=(1.3, 0.5))
plt.title(&amp;quot;Distances over time&amp;quot;)
plt.xlabel(&#39;Time&#39;)
plt.ylabel(&#39;Distance&#39;)
plt.show()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;../PMC-project_files/output_51_0.png&#34; class=&#34;img-responsive&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;For example, at 10:54 in the first quarter of the time, he made a 3 PT shot. We plot the measurement trends in a certain time range.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;%matplotlib inline
#plt.figure(figsize=(100,40))
plt.plot(curry_df[(curry_df.time&amp;gt;46.8) &amp;amp; (curry_df.time&amp;lt;47)][&#39;time&#39;], curry_df[(curry_df.time&amp;gt;46.8) &amp;amp; (curry_df.time&amp;lt;47)][&#39;curryball&#39;], &#39;-&#39;)
plt.plot(curry_df[(curry_df.time&amp;gt;46.8) &amp;amp; (curry_df.time&amp;lt;47)][&#39;time&#39;], curry_df[(curry_df.time&amp;gt;46.8) &amp;amp; (curry_df.time&amp;lt;47)][&#39;currylhoop&#39;], &#39;-&#39;)
plt.plot(curry_df[(curry_df.time&amp;gt;46.8) &amp;amp; (curry_df.time&amp;lt;47)][&#39;time&#39;], curry_df[(curry_df.time&amp;gt;46.8) &amp;amp; (curry_df.time&amp;lt;47)][&#39;balllhoop&#39;], &#39;-&#39;)
plt.plot(curry_df[(curry_df.time&amp;gt;46.8) &amp;amp; (curry_df.time&amp;lt;47)][&#39;time&#39;], curry_df[(curry_df.time&amp;gt;46.8) &amp;amp; (curry_df.time&amp;lt;47)][&#39;def1dist&#39;], &#39;-&#39;)
plt.legend([&#39;curryball&#39;, &#39;currylhoop&#39;, &#39;balllhoop&#39;,&#39;def1dist&#39;], bbox_to_anchor=(1.3, 0.5))
plt.title(&amp;quot;Distances over time&amp;quot;)
plt.xlabel(&#39;Time&#39;)
plt.ylabel(&#39;Distance&#39;)
plt.show()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;../PMC-project_files/output_53_0.png&#34; class=&#34;img-responsive&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Note that we have to observe the trend by scanning from the right to the left because the time stamp here is to indicate the remaining time. We can see that Curry was holding the ball initially since currylhoop and balllhoop are close. Then a ball was released around 46.94 as the balllhoop distance decreases(towards to 0) and the curryball distance increases significantly. This is helpful for us to understand the pattern characteristics.&lt;/p&gt;

&lt;p&gt;For example, around 6:00 in the third quarter of the time, he intended to layup. We plot the measurement trends in a certain time range.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;%matplotlib inline
#plt.figure(figsize=(100,40))
plt.plot(curry_df[(curry_df.time&amp;gt;17.9) &amp;amp; (curry_df.time&amp;lt;18.1)][&#39;time&#39;], curry_df[(curry_df.time&amp;gt;17.9) &amp;amp; (curry_df.time&amp;lt;18.1)][&#39;curryball&#39;], &#39;-&#39;)
plt.plot(curry_df[(curry_df.time&amp;gt;17.9) &amp;amp; (curry_df.time&amp;lt;18.1)][&#39;time&#39;], curry_df[(curry_df.time&amp;gt;17.9) &amp;amp; (curry_df.time&amp;lt;18.1)][&#39;curryrhoop&#39;], &#39;-&#39;)
plt.plot(curry_df[(curry_df.time&amp;gt;17.9) &amp;amp; (curry_df.time&amp;lt;18.1)][&#39;time&#39;], curry_df[(curry_df.time&amp;gt;17.9) &amp;amp; (curry_df.time&amp;lt;18.1)][&#39;ballrhoop&#39;], &#39;-&#39;)
plt.plot(curry_df[(curry_df.time&amp;gt;17.9) &amp;amp; (curry_df.time&amp;lt;18.1)][&#39;time&#39;], curry_df[(curry_df.time&amp;gt;17.9) &amp;amp; (curry_df.time&amp;lt;18.1)][&#39;def1dist&#39;], &#39;-&#39;)
plt.legend([&#39;curryball&#39;, &#39;curryrhoop&#39;, &#39;ballrhoop&#39;, &#39;def1dist&#39;], bbox_to_anchor=(1.3, 0.5))
plt.title(&amp;quot;Distances over time&amp;quot;)
plt.xlabel(&#39;Time&#39;)
plt.ylabel(&#39;Distance&#39;)
plt.show()
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;../PMC-project_files/output_56_0.png&#34; class=&#34;img-responsive&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Note that in the second half, the right-hand side is of our interest when curry was scoring. In this case, we can see that curryball, curryrhoop and ballrhoop are close to each other towards to 0. The take-aways from these visualizations are that we can understand the movement patterns better and we could focus on the short time frames that invovked significant fluntuations.&lt;/p&gt;

&lt;h2 id=&#34;modeling-framework&#34;&gt;Modeling Framework&lt;/h2&gt;

&lt;p&gt;It&amp;rsquo;s known that the shooting time points should be relatively close to the time points when the distance between the ball and hoop is very small. Due to the noise and granuity of this kind of sensor measurement data, it is necessary to perform some data cleaning to extract the relevant movement sequences of our interest. We designed our algorithm as a general modeling framework for this problem:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Steps&lt;/strong&gt;:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Identify the round turning points by &amp;ldquo;min(balllhoop, ballrhoop) ~= 0&amp;rdquo; to extract the relevant movement sequences.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Build a supervised learning algorithm to identify those sequences for curry playing offense so that we can apply the model to predict on a new dataset&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;With our model trained to predict an &amp;ldquo;offense&amp;rdquo; sequence, we can further investigate the exact shooting points from those &amp;ldquo;offense&amp;rdquo; sequence.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&#34;step-1-data-preparation&#34;&gt;Step 1 Data Preparation&lt;/h3&gt;

&lt;p&gt;Actually, we had to choose the ball-hoop distance threshold smaller than a reasonable value to advoid over-specification errors. Then, we filter out reduncdant sequences if turning points are too close and select the correponding sequences with 6 seconds ahead.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;from itertools import groupby
from operator import itemgetter
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;def getRoundTurningPoints(curry_df, threshold):
    tmp = curry_df[curry_df.ballhoop_min&amp;lt;threshold][[&#39;index&#39;, &#39;time&#39;, &#39;ballhoop_min&#39;]]
    tmp_ls = tmp[&#39;index&#39;].values
    consecutive_ls = [map(itemgetter(1), g) for k, g in groupby(enumerate(tmp_ls), lambda (i, x): i-x)]
    stop_points = [curry_df[curry_df.index.isin(index_ls)][&#39;ballhoop_min&#39;].argmin() for index_ls in consecutive_ls]
    return stop_points
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;A remark here is that we tuned the threshold here so that we can ensure all the &amp;lsquo;offense&amp;rsquo; sequences are included to build supervised learning model for our next steps.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;turniningpoint_ls = getRoundTurningPoints(curry_df, 5)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;def getSequenceData(curry_df, turningpoint, seconds_ahead):
    record_ahead = int(seconds_ahead / 0.04)
    start_index = turningpoint - record_ahead
    if start_index&amp;lt;0:
        start_index = 0
    return curry_df[curry_df[&#39;index&#39;].between(start_index, turningpoint, inclusive=True)]
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;getSequenceData(curry_df, 1510, 6).head()
&lt;/code&gt;&lt;/pre&gt;

&lt;div style=&#34;height:100%;overflow:auto;&#34;&gt;
&lt;table border=&#34;1&#34; class=&#34;dataframe&#34;&gt;
  &lt;thead&gt;
    &lt;tr style=&#34;text-align: right;&#34;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;index&lt;/th&gt;
      &lt;th&gt;time&lt;/th&gt;
      &lt;th&gt;curryball&lt;/th&gt;
      &lt;th&gt;currylhoop&lt;/th&gt;
      &lt;th&gt;curryrhoop&lt;/th&gt;
      &lt;th&gt;balllhoop&lt;/th&gt;
      &lt;th&gt;ballrhoop&lt;/th&gt;
      &lt;th&gt;def1dist&lt;/th&gt;
      &lt;th&gt;def2dist&lt;/th&gt;
      &lt;th&gt;def3dist&lt;/th&gt;
      &lt;th&gt;def4dist&lt;/th&gt;
      &lt;th&gt;def5dist&lt;/th&gt;
      &lt;th&gt;ballhoop_min&lt;/th&gt;
      &lt;th&gt;dist_ratio&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;1360&lt;/th&gt;
      &lt;td&gt;1360&lt;/td&gt;
      &lt;td&gt;47.01850&lt;/td&gt;
      &lt;td&gt;1.126781&lt;/td&gt;
      &lt;td&gt;81.490019&lt;/td&gt;
      &lt;td&gt;21.637208&lt;/td&gt;
      &lt;td&gt;80.638449&lt;/td&gt;
      &lt;td&gt;20.907522&lt;/td&gt;
      &lt;td&gt;8.515027&lt;/td&gt;
      &lt;td&gt;15.470442&lt;/td&gt;
      &lt;td&gt;33.152840&lt;/td&gt;
      &lt;td&gt;38.125602&lt;/td&gt;
      &lt;td&gt;45.525469&lt;/td&gt;
      &lt;td&gt;20.907522&lt;/td&gt;
      &lt;td&gt;0.053894&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1361&lt;/th&gt;
      &lt;td&gt;1361&lt;/td&gt;
      &lt;td&gt;47.01783&lt;/td&gt;
      &lt;td&gt;1.189048&lt;/td&gt;
      &lt;td&gt;81.166932&lt;/td&gt;
      &lt;td&gt;21.570949&lt;/td&gt;
      &lt;td&gt;80.457890&lt;/td&gt;
      &lt;td&gt;20.633572&lt;/td&gt;
      &lt;td&gt;8.522492&lt;/td&gt;
      &lt;td&gt;15.740184&lt;/td&gt;
      &lt;td&gt;33.025416&lt;/td&gt;
      &lt;td&gt;38.164352&lt;/td&gt;
      &lt;td&gt;45.470323&lt;/td&gt;
      &lt;td&gt;20.633572&lt;/td&gt;
      &lt;td&gt;0.057627&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1362&lt;/th&gt;
      &lt;td&gt;1362&lt;/td&gt;
      &lt;td&gt;47.01717&lt;/td&gt;
      &lt;td&gt;1.302032&lt;/td&gt;
      &lt;td&gt;80.806313&lt;/td&gt;
      &lt;td&gt;21.527865&lt;/td&gt;
      &lt;td&gt;80.238336&lt;/td&gt;
      &lt;td&gt;20.379774&lt;/td&gt;
      &lt;td&gt;8.510399&lt;/td&gt;
      &lt;td&gt;15.951757&lt;/td&gt;
      &lt;td&gt;32.897002&lt;/td&gt;
      &lt;td&gt;38.179300&lt;/td&gt;
      &lt;td&gt;45.415983&lt;/td&gt;
      &lt;td&gt;20.379774&lt;/td&gt;
      &lt;td&gt;0.063888&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1363&lt;/th&gt;
      &lt;td&gt;1363&lt;/td&gt;
      &lt;td&gt;47.01650&lt;/td&gt;
      &lt;td&gt;1.284768&lt;/td&gt;
      &lt;td&gt;80.425426&lt;/td&gt;
      &lt;td&gt;21.498966&lt;/td&gt;
      &lt;td&gt;80.140926&lt;/td&gt;
      &lt;td&gt;20.262702&lt;/td&gt;
      &lt;td&gt;8.500776&lt;/td&gt;
      &lt;td&gt;16.129816&lt;/td&gt;
      &lt;td&gt;32.782485&lt;/td&gt;
      &lt;td&gt;38.185713&lt;/td&gt;
      &lt;td&gt;45.343810&lt;/td&gt;
      &lt;td&gt;20.262702&lt;/td&gt;
      &lt;td&gt;0.063406&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1364&lt;/th&gt;
      &lt;td&gt;1364&lt;/td&gt;
      &lt;td&gt;47.01583&lt;/td&gt;
      &lt;td&gt;1.410186&lt;/td&gt;
      &lt;td&gt;80.030255&lt;/td&gt;
      &lt;td&gt;21.500508&lt;/td&gt;
      &lt;td&gt;79.830341&lt;/td&gt;
      &lt;td&gt;20.122170&lt;/td&gt;
      &lt;td&gt;8.492476&lt;/td&gt;
      &lt;td&gt;16.317941&lt;/td&gt;
      &lt;td&gt;32.686315&lt;/td&gt;
      &lt;td&gt;38.186847&lt;/td&gt;
      &lt;td&gt;45.273431&lt;/td&gt;
      &lt;td&gt;20.122170&lt;/td&gt;
      &lt;td&gt;0.070081&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;len(turniningpoint_ls) # our candidate sequence set
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;232
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;count = 0 
point_ls = []
for point in turniningpoint_ls:
    tmp = getSequenceData(curry_df, point, 4)
    test_ls = map(lambda x:  tmp[&#39;time&#39;].iloc[0]&amp;gt; x &amp;gt;tmp[&#39;time&#39;].iloc[-1], list(tmp_time_df.lower.values))
    if sum(test_ls) &amp;gt;= 1:
        count+=1
        point_ls.append(list(tmp_time_df.lower.values)[test_ls.index(1)])
print count 
print point_ls
print len(set(point_ls))
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;23
[46.920000000000002, 44.13666666666667, 42.870000000000005, 39.653333333333336, 38.236666666666672, 37.853333333333339, 36.903333333333336, 36.220000000000006, 28.236666666666665, 27.436666666666667, 24.02, 24.02, 20.57, 15.119999999999999, 14.036666666666667, 12.436666666666666, 12.436666666666666, 5.8699999999999992, 5.8699999999999992, 5.4033333333333333, 4.9866666666666664, 2.9199999999999999, 0.5033333333333333]
20
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;It captures 20 unique acutal shot times in the first step of filtering sequences.&lt;/p&gt;

&lt;h3 id=&#34;step-2-classify-offense-plays-of-curry&#34;&gt;Step 2  Classify offense plays of Curry&lt;/h3&gt;

&lt;p&gt;The sequences extracted from last step serve as our candicate set to further identify the sequence that Curry are in attack mode. Based on the time frame of corresponding sequences , we will extract the features to construct our training and test sets.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;curry_df[&#39;defdist_mean&#39;] = map(lambda a,b,c,d,e: np.nanmean([a,b,c,d,e]), curry_df[&#39;def1dist&#39;],curry_df[&#39;def2dist&#39;],curry_df[&#39;def3dist&#39;],curry_df[&#39;def4dist&#39;],curry_df[&#39;def5dist&#39;]) 
curry_df[&#39;defdist_var&#39;] = map(lambda a,b,c,d,e: np.nanvar([a,b,c,d,e]), curry_df[&#39;def1dist&#39;],curry_df[&#39;def2dist&#39;],curry_df[&#39;def3dist&#39;],curry_df[&#39;def4dist&#39;],curry_df[&#39;def5dist&#39;]) 
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;def extractFeatures(df, shot_time_points_ls = None):
    curryball_max = np.nanmax(df[&#39;curryball&#39;].values)
    curryball_min = np.nanmin(df[&#39;curryball&#39;].values)
    curryball_mean = np.nanmean(df[&#39;curryball&#39;].values)
    curryball_var = np.nanvar(df[&#39;curryball&#39;].values)
    
    curryhoop_max = np.nanmax(df[&#39;curryhoop_min&#39;].values)
    curryhoop_min = np.nanmin(df[&#39;curryhoop_min&#39;].values)
    curryhoop_mean = np.nanmean(df[&#39;curryhoop_min&#39;].values)
    curryhoop_var = np.nanvar(df[&#39;curryhoop_min&#39;].values)
    
    ballhoop_max = np.nanmax(df[&#39;ballhoop_min&#39;].values)
    ballhoop_min =  np.nanmin(df[&#39;ballhoop_min&#39;].values)
    ballhoop_mean = np.nanmean(df[&#39;ballhoop_min&#39;].values)
    ballhoop_var = np.nanvar(df[&#39;ballhoop_min&#39;].values)
    
    dist_ratio_mean = np.nanmean(df[&#39;dist_ratio&#39;].values)
    dist_ratio_var = np.nanvar(df[&#39;dist_ratio&#39;].values)
    
    def1dist_mean = np.nanmean(df[&#39;def1dist&#39;].values)
    def1dist_var = np.nanvar(df[&#39;def1dist&#39;].values)
    def2dist_mean = np.nanmean(df[&#39;def2dist&#39;].values)
    def2dist_var =np.nanvar(df[&#39;def2dist&#39;].values)
    def3dist_mean =np.nanmean(df[&#39;def3dist&#39;].values)
    def3dist_var = np.nanvar(df[&#39;def3dist&#39;].values)
    def4dist_mean = np.nanmean(df[&#39;def4dist&#39;].values)
    def4dist_var = np.nanvar(df[&#39;def4dist&#39;].values)
    def5dist_mean = np.nanmean(df[&#39;def5dist&#39;].values)
    def5dist_var = np.nanvar(df[&#39;def5dist&#39;].values)
    
    defdist_mean_m = np.nanmean(df[&#39;defdist_mean&#39;].values)
    defdist_mean_v = np.nanvar(df[&#39;defdist_mean&#39;].values)
    defdist_var_m = np.nanmean(df[&#39;defdist_var&#39;].values)
    defdist_var_v = np.nanvar(df[&#39;defdist_var&#39;].values)
    
    if type(shot_time_points_ls) is list:
        is_shot_ls = filter(lambda x:  df[&#39;time&#39;].iloc[0]&amp;gt; x &amp;gt;df[&#39;time&#39;].iloc[-1], shot_time_points_ls)
        if len(is_shot_ls) &amp;gt;= 1:
            offense = 1
            shot_time = is_shot_ls
        else:
            offense = 0
            shot_time = np.nan
    
        return pd.DataFrame({&#39;curryball_max&#39;:[curryball_max], &#39;curryball_min&#39;:[curryball_min], &#39;curryball_mean&#39;:[curryball_mean],
                        &#39;curryball_var&#39;:[curryball_var], &#39;curryhoop_max&#39;:[curryhoop_max], &#39;curryhoop_min&#39;:[curryhoop_min],
                        &#39;curryhoop_mean&#39;:[curryhoop_mean], &#39;curryhoop_var&#39;:[curryhoop_var], &#39;ballhoop_max&#39;:[ballhoop_max],
                        &#39;ballhoop_min&#39;:[ballhoop_min], &#39;ballhoop_mean&#39;:[ballhoop_mean], &#39;ballhoop_var&#39;:[ballhoop_var],
                        &#39;dist_ratio_mean&#39;:[dist_ratio_mean], &#39;dist_ratio_var&#39;:[dist_ratio_var], &#39;def1dist_mean&#39;:[def1dist_mean],
                        &#39;def1dist_var&#39;:[def1dist_var], &#39;def2dist_mean&#39;:[def2dist_mean], &#39;def2dist_var&#39;:[def2dist_var],
                        &#39;def3dist_mean&#39;:[def3dist_mean],&#39;def3dist_var&#39;:[def3dist_var], &#39;def4dist_mean&#39;:[def4dist_mean], 
                         &#39;def4dist_var&#39;:[def4dist_mean],&#39;def5dist_mean&#39;:[def5dist_mean], &#39;def5dist_var&#39;:[def5dist_var],
                        &#39;defdist_mean_m&#39;:[defdist_mean_m], &#39;defdist_mean_v&#39;:[defdist_mean_v], &#39;defdist_var_m&#39;:[defdist_var_m],
                        &#39;defdist_var_v&#39;:[defdist_var_v], &#39;offense&#39;: [offense], &#39;trace_start&#39;:[df[&#39;time&#39;].iloc[0]],
                        &#39;trace_end&#39;: [df[&#39;time&#39;].iloc[-1]], &#39;shot_time&#39;:shot_time })
    else:
        return pd.DataFrame({&#39;curryball_max&#39;:[curryball_max], &#39;curryball_min&#39;:[curryball_min], &#39;curryball_mean&#39;:[curryball_mean],
                        &#39;curryball_var&#39;:[curryball_var], &#39;curryhoop_max&#39;:[curryhoop_max], &#39;curryhoop_min&#39;:[curryhoop_min],
                        &#39;curryhoop_mean&#39;:[curryhoop_mean], &#39;curryhoop_var&#39;:[curryhoop_var], &#39;ballhoop_max&#39;:[ballhoop_max],
                        &#39;ballhoop_min&#39;:[ballhoop_min], &#39;ballhoop_mean&#39;:[ballhoop_mean], &#39;ballhoop_var&#39;:[ballhoop_var],
                        &#39;dist_ratio_mean&#39;:[dist_ratio_mean], &#39;dist_ratio_var&#39;:[dist_ratio_var], &#39;def1dist_mean&#39;:[def1dist_mean],
                        &#39;def1dist_var&#39;:[def1dist_var], &#39;def2dist_mean&#39;:[def2dist_mean], &#39;def2dist_var&#39;:[def2dist_var],
                        &#39;def3dist_mean&#39;:[def3dist_mean],&#39;def3dist_var&#39;:[def3dist_var], &#39;def4dist_mean&#39;:[def4dist_mean], 
                         &#39;def4dist_var&#39;:[def4dist_mean],&#39;def5dist_mean&#39;:[def5dist_mean], &#39;def5dist_var&#39;:[def5dist_var],
                        &#39;defdist_mean_m&#39;:[defdist_mean_m], &#39;defdist_mean_v&#39;:[defdist_mean_v], &#39;defdist_var_m&#39;:[defdist_var_m],
                        &#39;defdist_var_v&#39;:[defdist_var_v], &#39;trace_start&#39;:[df[&#39;time&#39;].iloc[0]],
                        &#39;trace_end&#39;: [df[&#39;time&#39;].iloc[-1]]})
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;tmp = getSequenceData(curry_df, 1510, 6)
extractFeatures(tmp, list(tmp_time_df.lower.values))
&lt;/code&gt;&lt;/pre&gt;

&lt;div style=&#34;height:100%;overflow:auto;&#34;&gt;
&lt;table border=&#34;1&#34; class=&#34;dataframe&#34;&gt;
  &lt;thead&gt;
    &lt;tr style=&#34;text-align: right;&#34;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;ballhoop_max&lt;/th&gt;
      &lt;th&gt;ballhoop_mean&lt;/th&gt;
      &lt;th&gt;ballhoop_min&lt;/th&gt;
      &lt;th&gt;ballhoop_var&lt;/th&gt;
      &lt;th&gt;curryball_max&lt;/th&gt;
      &lt;th&gt;curryball_mean&lt;/th&gt;
      &lt;th&gt;curryball_min&lt;/th&gt;
      &lt;th&gt;curryball_var&lt;/th&gt;
      &lt;th&gt;curryhoop_max&lt;/th&gt;
      &lt;th&gt;curryhoop_mean&lt;/th&gt;
      &lt;th&gt;...&lt;/th&gt;
      &lt;th&gt;defdist_mean_m&lt;/th&gt;
      &lt;th&gt;defdist_mean_v&lt;/th&gt;
      &lt;th&gt;defdist_var_m&lt;/th&gt;
      &lt;th&gt;defdist_var_v&lt;/th&gt;
      &lt;th&gt;dist_ratio_mean&lt;/th&gt;
      &lt;th&gt;dist_ratio_var&lt;/th&gt;
      &lt;th&gt;offense&lt;/th&gt;
      &lt;th&gt;shot_time&lt;/th&gt;
      &lt;th&gt;trace_end&lt;/th&gt;
      &lt;th&gt;trace_start&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt;42.249655&lt;/td&gt;
      &lt;td&gt;26.443021&lt;/td&gt;
      &lt;td&gt;0.231528&lt;/td&gt;
      &lt;td&gt;96.82848&lt;/td&gt;
      &lt;td&gt;35.99551&lt;/td&gt;
      &lt;td&gt;5.338232&lt;/td&gt;
      &lt;td&gt;0.095481&lt;/td&gt;
      &lt;td&gt;73.990365&lt;/td&gt;
      &lt;td&gt;42.354334&lt;/td&gt;
      &lt;td&gt;30.966018&lt;/td&gt;
      &lt;td&gt;...&lt;/td&gt;
      &lt;td&gt;19.915984&lt;/td&gt;
      &lt;td&gt;31.028272&lt;/td&gt;
      &lt;td&gt;91.749817&lt;/td&gt;
      &lt;td&gt;2709.719469&lt;/td&gt;
      &lt;td&gt;1.983769&lt;/td&gt;
      &lt;td&gt;172.652191&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;46.92&lt;/td&gt;
      &lt;td&gt;46.9185&lt;/td&gt;
      &lt;td&gt;47.0185&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;1 rows × 32 columns&lt;/p&gt;
&lt;/div&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;def prepareMLdata(df, turniningpoint_ls, shot_time_points_ls):
    appended_data = []
    for point in turniningpoint_ls:
        tmp = getSequenceData(curry_df, point, 6)
        tmp = extractFeatures(tmp, shot_time_points_ls)
        appended_data.append(tmp)
    appended_data = pd.concat(appended_data, ignore_index= True)
    return appended_data 
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;shot_time_points_ls = list(tmp_time_df.lower.values)
ML_data = prepareMLdata(curry_df, turniningpoint_ls, shot_time_points_ls)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;ML_data.head()
&lt;/code&gt;&lt;/pre&gt;

&lt;div style=&#34;height:100%;overflow:auto;&#34;&gt;
&lt;table border=&#34;1&#34; class=&#34;dataframe&#34;&gt;
  &lt;thead&gt;
    &lt;tr style=&#34;text-align: right;&#34;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;ballhoop_max&lt;/th&gt;
      &lt;th&gt;ballhoop_mean&lt;/th&gt;
      &lt;th&gt;ballhoop_min&lt;/th&gt;
      &lt;th&gt;ballhoop_var&lt;/th&gt;
      &lt;th&gt;curryball_max&lt;/th&gt;
      &lt;th&gt;curryball_mean&lt;/th&gt;
      &lt;th&gt;curryball_min&lt;/th&gt;
      &lt;th&gt;curryball_var&lt;/th&gt;
      &lt;th&gt;curryhoop_max&lt;/th&gt;
      &lt;th&gt;curryhoop_mean&lt;/th&gt;
      &lt;th&gt;...&lt;/th&gt;
      &lt;th&gt;defdist_mean_m&lt;/th&gt;
      &lt;th&gt;defdist_mean_v&lt;/th&gt;
      &lt;th&gt;defdist_var_m&lt;/th&gt;
      &lt;th&gt;defdist_var_v&lt;/th&gt;
      &lt;th&gt;dist_ratio_mean&lt;/th&gt;
      &lt;th&gt;dist_ratio_var&lt;/th&gt;
      &lt;th&gt;offense&lt;/th&gt;
      &lt;th&gt;shot_time&lt;/th&gt;
      &lt;th&gt;trace_end&lt;/th&gt;
      &lt;th&gt;trace_start&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;0&lt;/th&gt;
      &lt;td&gt;28.885491&lt;/td&gt;
      &lt;td&gt;13.326784&lt;/td&gt;
      &lt;td&gt;0.231505&lt;/td&gt;
      &lt;td&gt;93.175493&lt;/td&gt;
      &lt;td&gt;20.219201&lt;/td&gt;
      &lt;td&gt;8.185967&lt;/td&gt;
      &lt;td&gt;0.444152&lt;/td&gt;
      &lt;td&gt;43.916751&lt;/td&gt;
      &lt;td&gt;27.706306&lt;/td&gt;
      &lt;td&gt;15.357575&lt;/td&gt;
      &lt;td&gt;...&lt;/td&gt;
      &lt;td&gt;13.228087&lt;/td&gt;
      &lt;td&gt;6.290439&lt;/td&gt;
      &lt;td&gt;52.646155&lt;/td&gt;
      &lt;td&gt;361.518488&lt;/td&gt;
      &lt;td&gt;5.723790&lt;/td&gt;
      &lt;td&gt;101.393295&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;47.78783&lt;/td&gt;
      &lt;td&gt;47.88783&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;1&lt;/th&gt;
      &lt;td&gt;32.916573&lt;/td&gt;
      &lt;td&gt;25.156415&lt;/td&gt;
      &lt;td&gt;0.136773&lt;/td&gt;
      &lt;td&gt;79.154517&lt;/td&gt;
      &lt;td&gt;12.005317&lt;/td&gt;
      &lt;td&gt;8.053691&lt;/td&gt;
      &lt;td&gt;4.092887&lt;/td&gt;
      &lt;td&gt;3.174108&lt;/td&gt;
      &lt;td&gt;23.009739&lt;/td&gt;
      &lt;td&gt;19.967946&lt;/td&gt;
      &lt;td&gt;...&lt;/td&gt;
      &lt;td&gt;18.643226&lt;/td&gt;
      &lt;td&gt;3.331261&lt;/td&gt;
      &lt;td&gt;43.505947&lt;/td&gt;
      &lt;td&gt;216.642121&lt;/td&gt;
      &lt;td&gt;1.186465&lt;/td&gt;
      &lt;td&gt;52.984364&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;47.54317&lt;/td&gt;
      &lt;td&gt;47.64317&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;2&lt;/th&gt;
      &lt;td&gt;29.044444&lt;/td&gt;
      &lt;td&gt;14.148250&lt;/td&gt;
      &lt;td&gt;0.035938&lt;/td&gt;
      &lt;td&gt;73.572487&lt;/td&gt;
      &lt;td&gt;39.326996&lt;/td&gt;
      &lt;td&gt;30.617151&lt;/td&gt;
      &lt;td&gt;20.185569&lt;/td&gt;
      &lt;td&gt;27.224889&lt;/td&gt;
      &lt;td&gt;31.454115&lt;/td&gt;
      &lt;td&gt;24.031073&lt;/td&gt;
      &lt;td&gt;...&lt;/td&gt;
      &lt;td&gt;21.486210&lt;/td&gt;
      &lt;td&gt;0.246793&lt;/td&gt;
      &lt;td&gt;91.032794&lt;/td&gt;
      &lt;td&gt;494.299733&lt;/td&gt;
      &lt;td&gt;14.798147&lt;/td&gt;
      &lt;td&gt;4093.662355&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;47.26917&lt;/td&gt;
      &lt;td&gt;47.36917&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;3&lt;/th&gt;
      &lt;td&gt;16.347788&lt;/td&gt;
      &lt;td&gt;6.813383&lt;/td&gt;
      &lt;td&gt;0.035938&lt;/td&gt;
      &lt;td&gt;34.803312&lt;/td&gt;
      &lt;td&gt;33.381643&lt;/td&gt;
      &lt;td&gt;27.531473&lt;/td&gt;
      &lt;td&gt;20.185569&lt;/td&gt;
      &lt;td&gt;14.003907&lt;/td&gt;
      &lt;td&gt;31.026790&lt;/td&gt;
      &lt;td&gt;24.390090&lt;/td&gt;
      &lt;td&gt;...&lt;/td&gt;
      &lt;td&gt;21.380101&lt;/td&gt;
      &lt;td&gt;0.376388&lt;/td&gt;
      &lt;td&gt;65.100121&lt;/td&gt;
      &lt;td&gt;904.094115&lt;/td&gt;
      &lt;td&gt;21.210795&lt;/td&gt;
      &lt;td&gt;4217.887524&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;47.22650&lt;/td&gt;
      &lt;td&gt;47.32650&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt;42.249655&lt;/td&gt;
      &lt;td&gt;26.443021&lt;/td&gt;
      &lt;td&gt;0.231528&lt;/td&gt;
      &lt;td&gt;96.828480&lt;/td&gt;
      &lt;td&gt;35.995510&lt;/td&gt;
      &lt;td&gt;5.338232&lt;/td&gt;
      &lt;td&gt;0.095481&lt;/td&gt;
      &lt;td&gt;73.990365&lt;/td&gt;
      &lt;td&gt;42.354334&lt;/td&gt;
      &lt;td&gt;30.966018&lt;/td&gt;
      &lt;td&gt;...&lt;/td&gt;
      &lt;td&gt;19.915984&lt;/td&gt;
      &lt;td&gt;31.028272&lt;/td&gt;
      &lt;td&gt;91.749817&lt;/td&gt;
      &lt;td&gt;2709.719469&lt;/td&gt;
      &lt;td&gt;1.983769&lt;/td&gt;
      &lt;td&gt;172.652191&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;46.92&lt;/td&gt;
      &lt;td&gt;46.91850&lt;/td&gt;
      &lt;td&gt;47.01850&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;5 rows × 32 columns&lt;/p&gt;
&lt;/div&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;ML_data.to_csv(&#39;ML_data.csv&#39;, index = False)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then, with the labels we scraped online, we can build a classifier to classify whether a movement pattern indicates Curry plays offense or not, which helps us to narrow down the scope for searching shooting patterns. We use 1st and 3rd quarters as our training set and train with logistic regression and random forest algorithms. logistic regression model turned out to perform better in this case although there still exists overfitting problem.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;from sklearn.linear_model import LogisticRegression
from sklearn.ensemble import RandomForestClassifier
from sklearn.metrics import classification_report
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;#ML_data = pd.read_csv(&amp;quot;ML_data.csv&amp;quot;)
# split training and test set
train_set = ML_data[(ML_data.trace_end &amp;gt;= 36.0) | ((24 &amp;gt; ML_data.trace_end) &amp;amp;(ML_data.trace_end &amp;gt;= 12.0)) ] 
test_set = ML_data[((36 &amp;gt; ML_data.trace_end) &amp;amp; (ML_data.trace_end &amp;gt;= 24)) | (ML_data.trace_end &amp;lt; 12.0)]
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;features = [name for name in train_set.columns.tolist() if name not in [&#39;offense&#39;, &#39;shot_time&#39;, &#39;trace_end&#39;, &#39;trace_start&#39;]]
X_train = train_set[features]
y_train = train_set[&#39;offense&#39;]
X_test = test_set[features]
y_test = test_set[&#39;offense&#39;]
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;X_train.shape
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;(150, 28)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;lr_model = LogisticRegression() 
rf_model = RandomForestClassifier(n_estimators= 290, max_features= 15) 

lr_model.fit(X_train, y_train)

rf_model.fit(X_train, y_train)

fit_predicted_lr = lr_model.predict(X_train) # prediction performance in training set
report_lr = classification_report(y_train, fit_predicted_lr) 
print(report_lr)

fit_predicted_rf = rf_model.predict(X_train) # prediction performance in training set
report_rf = classification_report(y_train, fit_predicted_rf) 
print(report_rf)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;             precision    recall  f1-score   support

          0       0.99      0.99      0.99       135
          1       0.93      0.93      0.93        15

avg / total       0.99      0.99      0.99       150

             precision    recall  f1-score   support

          0       1.00      1.00      1.00       135
          1       1.00      1.00      1.00        15

avg / total       1.00      1.00      1.00       150
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;We have to deal with missing value cases due to the measurement errors.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;X_test[X_test.isnull().any(axis=1)]
&lt;/code&gt;&lt;/pre&gt;

&lt;div style=&#34;height:100%;overflow:auto;&#34;&gt;
&lt;table border=&#34;1&#34; class=&#34;dataframe&#34;&gt;
  &lt;thead&gt;
    &lt;tr style=&#34;text-align: right;&#34;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;ballhoop_max&lt;/th&gt;
      &lt;th&gt;ballhoop_mean&lt;/th&gt;
      &lt;th&gt;ballhoop_min&lt;/th&gt;
      &lt;th&gt;ballhoop_var&lt;/th&gt;
      &lt;th&gt;curryball_max&lt;/th&gt;
      &lt;th&gt;curryball_mean&lt;/th&gt;
      &lt;th&gt;curryball_min&lt;/th&gt;
      &lt;th&gt;curryball_var&lt;/th&gt;
      &lt;th&gt;curryhoop_max&lt;/th&gt;
      &lt;th&gt;curryhoop_mean&lt;/th&gt;
      &lt;th&gt;...&lt;/th&gt;
      &lt;th&gt;def4dist_mean&lt;/th&gt;
      &lt;th&gt;def4dist_var&lt;/th&gt;
      &lt;th&gt;def5dist_mean&lt;/th&gt;
      &lt;th&gt;def5dist_var&lt;/th&gt;
      &lt;th&gt;defdist_mean_m&lt;/th&gt;
      &lt;th&gt;defdist_mean_v&lt;/th&gt;
      &lt;th&gt;defdist_var_m&lt;/th&gt;
      &lt;th&gt;defdist_var_v&lt;/th&gt;
      &lt;th&gt;dist_ratio_mean&lt;/th&gt;
      &lt;th&gt;dist_ratio_var&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;229&lt;/th&gt;
      &lt;td&gt;30.100838&lt;/td&gt;
      &lt;td&gt;16.739614&lt;/td&gt;
      &lt;td&gt;0.389141&lt;/td&gt;
      &lt;td&gt;68.798010&lt;/td&gt;
      &lt;td&gt;38.949504&lt;/td&gt;
      &lt;td&gt;26.843761&lt;/td&gt;
      &lt;td&gt;0.448405&lt;/td&gt;
      &lt;td&gt;126.753295&lt;/td&gt;
      &lt;td&gt;25.918275&lt;/td&gt;
      &lt;td&gt;15.388054&lt;/td&gt;
      &lt;td&gt;...&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;14.740568&lt;/td&gt;
      &lt;td&gt;8.362249&lt;/td&gt;
      &lt;td&gt;70.660123&lt;/td&gt;
      &lt;td&gt;1202.564293&lt;/td&gt;
      &lt;td&gt;1.644810&lt;/td&gt;
      &lt;td&gt;0.282469&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;230&lt;/th&gt;
      &lt;td&gt;36.568824&lt;/td&gt;
      &lt;td&gt;27.263279&lt;/td&gt;
      &lt;td&gt;0.221226&lt;/td&gt;
      &lt;td&gt;91.600931&lt;/td&gt;
      &lt;td&gt;33.334161&lt;/td&gt;
      &lt;td&gt;6.969266&lt;/td&gt;
      &lt;td&gt;0.333314&lt;/td&gt;
      &lt;td&gt;63.844736&lt;/td&gt;
      &lt;td&gt;35.092890&lt;/td&gt;
      &lt;td&gt;31.432368&lt;/td&gt;
      &lt;td&gt;...&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;15.895483&lt;/td&gt;
      &lt;td&gt;3.236023&lt;/td&gt;
      &lt;td&gt;110.514178&lt;/td&gt;
      &lt;td&gt;3801.879614&lt;/td&gt;
      &lt;td&gt;2.660365&lt;/td&gt;
      &lt;td&gt;230.627245&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;231&lt;/th&gt;
      &lt;td&gt;27.563397&lt;/td&gt;
      &lt;td&gt;16.694428&lt;/td&gt;
      &lt;td&gt;0.130125&lt;/td&gt;
      &lt;td&gt;58.094332&lt;/td&gt;
      &lt;td&gt;22.415984&lt;/td&gt;
      &lt;td&gt;10.877561&lt;/td&gt;
      &lt;td&gt;1.328954&lt;/td&gt;
      &lt;td&gt;20.481343&lt;/td&gt;
      &lt;td&gt;23.652165&lt;/td&gt;
      &lt;td&gt;18.631163&lt;/td&gt;
      &lt;td&gt;...&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;15.368485&lt;/td&gt;
      &lt;td&gt;5.217303&lt;/td&gt;
      &lt;td&gt;15.273074&lt;/td&gt;
      &lt;td&gt;59.153009&lt;/td&gt;
      &lt;td&gt;2.296235&lt;/td&gt;
      &lt;td&gt;199.197441&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;3 rows × 28 columns&lt;/p&gt;
&lt;/div&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;# Treatment with missing values by replacing with median values
X_test = X_test.fillna(X_test.median())
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;lr_predicted = lr_model.predict(X_test) # prediction performance in training set
report_lr = classification_report(y_test, lr_predicted) 
print(report_lr)

rf_predicted = rf_model.predict(X_test) # prediction performance in training set
report_rf = classification_report(y_test, rf_predicted) 
print(report_rf)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;             precision    recall  f1-score   support

          0       0.91      0.89      0.90        71
          1       0.38      0.45      0.42        11

avg / total       0.84      0.83      0.84        82

             precision    recall  f1-score   support

          0       0.88      0.96      0.92        71
          1       0.40      0.18      0.25        11

avg / total       0.82      0.85      0.83        82
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;# save the model
with open(&#39;lr_model.pickle&#39;, &#39;w&#39;) as pf:
    pickle.dump(lr_model, pf)
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;step-3-change-point-detection&#34;&gt;Step 3 Change point detection&lt;/h3&gt;

&lt;p&gt;Using our trained model from the last step, we can apply it on a new dataset to identify the &amp;ldquo;offense&amp;rdquo; sequences. In this case, to submit our prediction results, we would generate the predictions for the whole provided dataset.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;def getOffenseSeq(model, ndata, features, top = 24):
    ndata[&#39;preds&#39;] = model.predict_proba(ndata[features])[:,1]
    #offense_data = ndata[ndata.preds == 1].reset_index()
    offense_data = ndata.nlargest(24, &#39;preds&#39;)
    return offense_data
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;nML_data = ML_data.fillna(ML_data[features].median())
getOffenseSeq(lr_model, nML_data, features)[[&#39;preds&#39;, &#39;offense&#39;, &#39;shot_time&#39;, &#39;trace_end&#39;, &#39;trace_start&#39;]]
&lt;/code&gt;&lt;/pre&gt;

&lt;div style=&#34;height:100%;overflow:auto;&#34;&gt;
&lt;table border=&#34;1&#34; class=&#34;dataframe&#34;&gt;
  &lt;thead&gt;
    &lt;tr style=&#34;text-align: right;&#34;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;preds&lt;/th&gt;
      &lt;th&gt;offense&lt;/th&gt;
      &lt;th&gt;shot_time&lt;/th&gt;
      &lt;th&gt;trace_end&lt;/th&gt;
      &lt;th&gt;trace_start&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;204&lt;/th&gt;
      &lt;td&gt;1.000000&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;5.403333&lt;/td&gt;
      &lt;td&gt;5.36033&lt;/td&gt;
      &lt;td&gt;5.46033&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;35&lt;/th&gt;
      &lt;td&gt;1.000000&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;42.870000&lt;/td&gt;
      &lt;td&gt;42.86000&lt;/td&gt;
      &lt;td&gt;42.96000&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;5&lt;/th&gt;
      &lt;td&gt;0.999993&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;46.920000&lt;/td&gt;
      &lt;td&gt;46.84050&lt;/td&gt;
      &lt;td&gt;46.94050&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;193&lt;/th&gt;
      &lt;td&gt;0.999788&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;12.436667&lt;/td&gt;
      &lt;td&gt;12.38417&lt;/td&gt;
      &lt;td&gt;12.48433&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;102&lt;/th&gt;
      &lt;td&gt;0.997139&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;27.43833&lt;/td&gt;
      &lt;td&gt;27.53833&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;224&lt;/th&gt;
      &lt;td&gt;0.995493&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;2.19100&lt;/td&gt;
      &lt;td&gt;2.29100&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;103&lt;/th&gt;
      &lt;td&gt;0.984838&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;27.436667&lt;/td&gt;
      &lt;td&gt;27.38033&lt;/td&gt;
      &lt;td&gt;27.48033&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;222&lt;/th&gt;
      &lt;td&gt;0.979128&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;2.50533&lt;/td&gt;
      &lt;td&gt;2.66983&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;175&lt;/th&gt;
      &lt;td&gt;0.966567&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;15.120000&lt;/td&gt;
      &lt;td&gt;15.11750&lt;/td&gt;
      &lt;td&gt;15.21767&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;223&lt;/th&gt;
      &lt;td&gt;0.965653&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;2.50400&lt;/td&gt;
      &lt;td&gt;2.66850&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;106&lt;/th&gt;
      &lt;td&gt;0.965209&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;27.07433&lt;/td&gt;
      &lt;td&gt;27.17433&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt;0.937037&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;46.920000&lt;/td&gt;
      &lt;td&gt;46.91850&lt;/td&gt;
      &lt;td&gt;47.01850&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;74&lt;/th&gt;
      &lt;td&gt;0.922539&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;36.903333&lt;/td&gt;
      &lt;td&gt;36.87167&lt;/td&gt;
      &lt;td&gt;36.97133&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;180&lt;/th&gt;
      &lt;td&gt;0.910724&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;14.036667&lt;/td&gt;
      &lt;td&gt;14.02417&lt;/td&gt;
      &lt;td&gt;14.12417&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;176&lt;/th&gt;
      &lt;td&gt;0.776233&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;15.120000&lt;/td&gt;
      &lt;td&gt;15.03083&lt;/td&gt;
      &lt;td&gt;15.13083&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;109&lt;/th&gt;
      &lt;td&gt;0.726532&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;26.41567&lt;/td&gt;
      &lt;td&gt;26.58767&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;192&lt;/th&gt;
      &lt;td&gt;0.722562&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;12.436667&lt;/td&gt;
      &lt;td&gt;12.43350&lt;/td&gt;
      &lt;td&gt;12.53367&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;230&lt;/th&gt;
      &lt;td&gt;0.712588&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0.503333&lt;/td&gt;
      &lt;td&gt;0.50083&lt;/td&gt;
      &lt;td&gt;0.60100&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;54&lt;/th&gt;
      &lt;td&gt;0.699003&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;39.653333&lt;/td&gt;
      &lt;td&gt;39.61433&lt;/td&gt;
      &lt;td&gt;39.71433&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;64&lt;/th&gt;
      &lt;td&gt;0.685481&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;38.236667&lt;/td&gt;
      &lt;td&gt;38.22283&lt;/td&gt;
      &lt;td&gt;38.32300&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;148&lt;/th&gt;
      &lt;td&gt;0.671682&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;20.570000&lt;/td&gt;
      &lt;td&gt;20.56550&lt;/td&gt;
      &lt;td&gt;20.66567&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;28&lt;/th&gt;
      &lt;td&gt;0.654600&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;44.136667&lt;/td&gt;
      &lt;td&gt;44.11267&lt;/td&gt;
      &lt;td&gt;44.21267&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;203&lt;/th&gt;
      &lt;td&gt;0.630730&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;5.41300&lt;/td&gt;
      &lt;td&gt;5.51300&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;122&lt;/th&gt;
      &lt;td&gt;0.602449&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;24.020000&lt;/td&gt;
      &lt;td&gt;24.01100&lt;/td&gt;
      &lt;td&gt;24.11200&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;Then, based on these selected time frames, we can apply other algorithms to detect the &amp;ldquo;change points&amp;rdquo; in the time series. We use the PELT algorithm[1] and the package &lt;code&gt;changepy&lt;/code&gt;. The PERL algorithm requires a cost function. In our case, we chose the &lt;code&gt;exponential&lt;/code&gt; for exponential distributed data with changing mean.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;&lt;strong&gt;Reference&lt;/strong&gt;&lt;/em&gt;:
[1] Killick R, Fearnhead P, Eckley IA (2012) Optimal detection of changepoints with a linear computational cost, JASA 107(500), 1590-1598&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;def mapSeq(data, trace_start, trace_end):
    seq_data = data[data[&#39;time&#39;].between(trace_end,trace_start, inclusive = True)]
    return seq_data[&#39;curryball&#39;].values
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;%matplotlib inline
curry_df.curryball.plot(kind=&amp;quot;hist&amp;quot;, bins =15) # exponential distribution
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;../PMC-project_files/output_94_1.png&#34; class=&#34;img-responsive&#34; style=&#34;display: block; margin: auto;&#34; /&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;from changepy import pelt
from changepy.costs import exponential,normal_meanvar
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;curryball_seq = mapSeq(curry_df, 47.01850, 46.91850)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;cost = exponential(curryball_seq)
pelt(cost, len(curryball_seq))
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;[0, 118]
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;curryball_seq[118]
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;4.49890067991059
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;def getChangePoint(data, trace_start, trace_end):
    seq_data = data[data[&#39;time&#39;].between(trace_end,trace_start, inclusive = True)].reset_index()
    curryball_seq = seq_data[&#39;curryball&#39;].values
    cost = exponential(curryball_seq)
    try:
        chg_point = pelt(cost, len(curryball_seq))[1]
        pred_shot_time = round(seq_data.ix[chg_point, &#39;time&#39;], 8)      
    except:
        pred_shot_time = np.nan
    return pred_shot_time
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;getChangePoint(curry_df, 47.01850, 46.91850)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;46.93983
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;shot_info = getOffenseSeq(lr_model, nML_data, features)[[&#39;preds&#39;, &#39;offense&#39;, &#39;shot_time&#39;, &#39;trace_end&#39;, &#39;trace_start&#39;]]
shot_info[&#39;pred_shot_time&#39;] = map(lambda t1, t2: getChangePoint(curry_df, t1, t2), shot_info[&#39;trace_start&#39;], shot_info[&#39;trace_end&#39;])
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;# apply some heauristic rules: 1. if we fail to detect change point
shot_info[&#39;pred_shot_time&#39;] = map(lambda t1, t2: t2+0.05  if pd.isnull(t1) else t1,shot_info[&#39;pred_shot_time&#39;], shot_info[&#39;trace_end&#39;])
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;shot_info
&lt;/code&gt;&lt;/pre&gt;

&lt;div style=&#34;height:100%;overflow:auto;&#34;&gt;
&lt;table border=&#34;1&#34; class=&#34;dataframe&#34;&gt;
  &lt;thead&gt;
    &lt;tr style=&#34;text-align: right;&#34;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;preds&lt;/th&gt;
      &lt;th&gt;offense&lt;/th&gt;
      &lt;th&gt;shot_time&lt;/th&gt;
      &lt;th&gt;trace_end&lt;/th&gt;
      &lt;th&gt;trace_start&lt;/th&gt;
      &lt;th&gt;pred_shot_time&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;204&lt;/th&gt;
      &lt;td&gt;1.000000&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;5.403333&lt;/td&gt;
      &lt;td&gt;5.36033&lt;/td&gt;
      &lt;td&gt;5.46033&lt;/td&gt;
      &lt;td&gt;5.43033&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;35&lt;/th&gt;
      &lt;td&gt;1.000000&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;42.870000&lt;/td&gt;
      &lt;td&gt;42.86000&lt;/td&gt;
      &lt;td&gt;42.96000&lt;/td&gt;
      &lt;td&gt;42.92400&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;5&lt;/th&gt;
      &lt;td&gt;0.999993&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;46.920000&lt;/td&gt;
      &lt;td&gt;46.84050&lt;/td&gt;
      &lt;td&gt;46.94050&lt;/td&gt;
      &lt;td&gt;46.92717&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;193&lt;/th&gt;
      &lt;td&gt;0.999788&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;12.436667&lt;/td&gt;
      &lt;td&gt;12.38417&lt;/td&gt;
      &lt;td&gt;12.48433&lt;/td&gt;
      &lt;td&gt;12.44083&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;102&lt;/th&gt;
      &lt;td&gt;0.997139&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;27.43833&lt;/td&gt;
      &lt;td&gt;27.53833&lt;/td&gt;
      &lt;td&gt;27.47367&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;224&lt;/th&gt;
      &lt;td&gt;0.995493&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;2.19100&lt;/td&gt;
      &lt;td&gt;2.29100&lt;/td&gt;
      &lt;td&gt;2.27300&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;103&lt;/th&gt;
      &lt;td&gt;0.984838&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;27.436667&lt;/td&gt;
      &lt;td&gt;27.38033&lt;/td&gt;
      &lt;td&gt;27.48033&lt;/td&gt;
      &lt;td&gt;27.47367&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;222&lt;/th&gt;
      &lt;td&gt;0.979128&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;2.50533&lt;/td&gt;
      &lt;td&gt;2.66983&lt;/td&gt;
      &lt;td&gt;2.65050&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;175&lt;/th&gt;
      &lt;td&gt;0.966567&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;15.120000&lt;/td&gt;
      &lt;td&gt;15.11750&lt;/td&gt;
      &lt;td&gt;15.21767&lt;/td&gt;
      &lt;td&gt;15.18017&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;223&lt;/th&gt;
      &lt;td&gt;0.965653&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;2.50400&lt;/td&gt;
      &lt;td&gt;2.66850&lt;/td&gt;
      &lt;td&gt;2.65050&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;106&lt;/th&gt;
      &lt;td&gt;0.965209&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;27.07433&lt;/td&gt;
      &lt;td&gt;27.17433&lt;/td&gt;
      &lt;td&gt;27.09367&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt;0.937037&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;46.920000&lt;/td&gt;
      &lt;td&gt;46.91850&lt;/td&gt;
      &lt;td&gt;47.01850&lt;/td&gt;
      &lt;td&gt;46.93983&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;74&lt;/th&gt;
      &lt;td&gt;0.922539&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;36.903333&lt;/td&gt;
      &lt;td&gt;36.87167&lt;/td&gt;
      &lt;td&gt;36.97133&lt;/td&gt;
      &lt;td&gt;36.91267&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;180&lt;/th&gt;
      &lt;td&gt;0.910724&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;14.036667&lt;/td&gt;
      &lt;td&gt;14.02417&lt;/td&gt;
      &lt;td&gt;14.12417&lt;/td&gt;
      &lt;td&gt;14.04683&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;176&lt;/th&gt;
      &lt;td&gt;0.776233&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;15.120000&lt;/td&gt;
      &lt;td&gt;15.03083&lt;/td&gt;
      &lt;td&gt;15.13083&lt;/td&gt;
      &lt;td&gt;15.08083&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;109&lt;/th&gt;
      &lt;td&gt;0.726532&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;26.41567&lt;/td&gt;
      &lt;td&gt;26.58767&lt;/td&gt;
      &lt;td&gt;26.55700&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;192&lt;/th&gt;
      &lt;td&gt;0.722562&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;12.436667&lt;/td&gt;
      &lt;td&gt;12.43350&lt;/td&gt;
      &lt;td&gt;12.53367&lt;/td&gt;
      &lt;td&gt;12.44017&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;230&lt;/th&gt;
      &lt;td&gt;0.712588&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;0.503333&lt;/td&gt;
      &lt;td&gt;0.50083&lt;/td&gt;
      &lt;td&gt;0.60100&lt;/td&gt;
      &lt;td&gt;0.56167&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;54&lt;/th&gt;
      &lt;td&gt;0.699003&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;39.653333&lt;/td&gt;
      &lt;td&gt;39.61433&lt;/td&gt;
      &lt;td&gt;39.71433&lt;/td&gt;
      &lt;td&gt;39.69167&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;64&lt;/th&gt;
      &lt;td&gt;0.685481&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;38.236667&lt;/td&gt;
      &lt;td&gt;38.22283&lt;/td&gt;
      &lt;td&gt;38.32300&lt;/td&gt;
      &lt;td&gt;38.28367&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;148&lt;/th&gt;
      &lt;td&gt;0.671682&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;20.570000&lt;/td&gt;
      &lt;td&gt;20.56550&lt;/td&gt;
      &lt;td&gt;20.66567&lt;/td&gt;
      &lt;td&gt;20.65967&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;28&lt;/th&gt;
      &lt;td&gt;0.654600&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;44.136667&lt;/td&gt;
      &lt;td&gt;44.11267&lt;/td&gt;
      &lt;td&gt;44.21267&lt;/td&gt;
      &lt;td&gt;44.20950&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;203&lt;/th&gt;
      &lt;td&gt;0.630730&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;NaN&lt;/td&gt;
      &lt;td&gt;5.41300&lt;/td&gt;
      &lt;td&gt;5.51300&lt;/td&gt;
      &lt;td&gt;5.42967&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;122&lt;/th&gt;
      &lt;td&gt;0.602449&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt;24.020000&lt;/td&gt;
      &lt;td&gt;24.01100&lt;/td&gt;
      &lt;td&gt;24.11200&lt;/td&gt;
      &lt;td&gt;24.06100&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;shot_info[&#39;upper&#39;] = shot_info[&#39;pred_shot_time&#39;] + 0.02
shot_info[&#39;lower&#39;] = shot_info[&#39;pred_shot_time&#39;] - 0.06
modeling_result = shot_info[[&#39;upper&#39;, &#39;lower&#39;]]
modeling_result.to_csv(&#39;curry_model_pred.csv&#39;, index=False)
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&#34;language-python&#34;&gt;modeling_result
&lt;/code&gt;&lt;/pre&gt;

&lt;div style=&#34;height:100%;overflow:auto;&#34;&gt;
&lt;table border=&#34;1&#34; class=&#34;dataframe&#34;&gt;
  &lt;thead&gt;
    &lt;tr style=&#34;text-align: right;&#34;&gt;
      &lt;th&gt;&lt;/th&gt;
      &lt;th&gt;upper&lt;/th&gt;
      &lt;th&gt;lower&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;th&gt;204&lt;/th&gt;
      &lt;td&gt;5.45033&lt;/td&gt;
      &lt;td&gt;5.37033&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;35&lt;/th&gt;
      &lt;td&gt;42.94400&lt;/td&gt;
      &lt;td&gt;42.86400&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;5&lt;/th&gt;
      &lt;td&gt;46.94717&lt;/td&gt;
      &lt;td&gt;46.86717&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;193&lt;/th&gt;
      &lt;td&gt;12.46083&lt;/td&gt;
      &lt;td&gt;12.38083&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;102&lt;/th&gt;
      &lt;td&gt;27.49367&lt;/td&gt;
      &lt;td&gt;27.41367&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;224&lt;/th&gt;
      &lt;td&gt;2.29300&lt;/td&gt;
      &lt;td&gt;2.21300&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;103&lt;/th&gt;
      &lt;td&gt;27.49367&lt;/td&gt;
      &lt;td&gt;27.41367&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;222&lt;/th&gt;
      &lt;td&gt;2.67050&lt;/td&gt;
      &lt;td&gt;2.59050&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;175&lt;/th&gt;
      &lt;td&gt;15.20017&lt;/td&gt;
      &lt;td&gt;15.12017&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;223&lt;/th&gt;
      &lt;td&gt;2.67050&lt;/td&gt;
      &lt;td&gt;2.59050&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;106&lt;/th&gt;
      &lt;td&gt;27.11367&lt;/td&gt;
      &lt;td&gt;27.03367&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;4&lt;/th&gt;
      &lt;td&gt;46.95983&lt;/td&gt;
      &lt;td&gt;46.87983&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;74&lt;/th&gt;
      &lt;td&gt;36.93267&lt;/td&gt;
      &lt;td&gt;36.85267&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;180&lt;/th&gt;
      &lt;td&gt;14.06683&lt;/td&gt;
      &lt;td&gt;13.98683&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;176&lt;/th&gt;
      &lt;td&gt;15.10083&lt;/td&gt;
      &lt;td&gt;15.02083&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;109&lt;/th&gt;
      &lt;td&gt;26.57700&lt;/td&gt;
      &lt;td&gt;26.49700&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;192&lt;/th&gt;
      &lt;td&gt;12.46017&lt;/td&gt;
      &lt;td&gt;12.38017&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;230&lt;/th&gt;
      &lt;td&gt;0.58167&lt;/td&gt;
      &lt;td&gt;0.50167&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;54&lt;/th&gt;
      &lt;td&gt;39.71167&lt;/td&gt;
      &lt;td&gt;39.63167&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;64&lt;/th&gt;
      &lt;td&gt;38.30367&lt;/td&gt;
      &lt;td&gt;38.22367&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;148&lt;/th&gt;
      &lt;td&gt;20.67967&lt;/td&gt;
      &lt;td&gt;20.59967&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;28&lt;/th&gt;
      &lt;td&gt;44.22950&lt;/td&gt;
      &lt;td&gt;44.14950&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;203&lt;/th&gt;
      &lt;td&gt;5.44967&lt;/td&gt;
      &lt;td&gt;5.36967&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;th&gt;122&lt;/th&gt;
      &lt;td&gt;24.08100&lt;/td&gt;
      &lt;td&gt;24.00100&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;

&lt;p&gt;After submmiting this result, this ML approach gave us about 50% accuracy. One concern is that the pretrained model may not be good enough to detect the offense sequences correctly in the first step. Also, training on only one dataset is not adequate for buiding a robust machine learning model.&lt;/p&gt;

&lt;p&gt;As I mentioned, the organization committee would test our algorithm on a new test dataset. It turned out our ML approach didn&amp;rsquo;t lead us to the final round for on-site presentation. After I attended the convention on Feb 4, the winning solutions discussed mostly are just related to use some &amp;ldquo;domain knowledge&amp;rdquo; with deeper analysis of shooting pattern matching. For this competition, the ML is probably not the good way to go. It somehow shows Machine Learning is not an elixir.&lt;/p&gt;

&lt;h2 id=&#34;afterthoughts&#34;&gt;Afterthoughts&lt;/h2&gt;

&lt;p&gt;Through my research, there are some good reasons to try Recurrent Neural Network, a Deep learning model known for processing language and sequence data.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;All the covariates are actually time series data. Like speech regonition or signal processing, the specific hidden shooting pattern is what we can look for in the time series.&lt;/li&gt;
&lt;li&gt;Data is noisy. However, deep learning model is good at extracting latent representation/information. Thus, we can be less bothered by feature engineering.&lt;/li&gt;
&lt;/ul&gt;</description>
    </item>
    
    <item>
      <title>TravisTorrent Data Challenge</title>
      <link>/projects/GHTravis/</link>
      <pubDate>Tue, 28 Feb 2017 00:00:00 +0000</pubDate>
      
      <guid>/projects/GHTravis/</guid>
      <description>&lt;!-- BLOGDOWN-BODY-BEFORE

/BLOGDOWN-BODY-BEFORE --&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#introduction&#34;&gt;Introduction&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#data-gathering&#34;&gt;Data Gathering&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#research-question&#34;&gt;Research Questions&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div id=&#34;introduction&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;An open source software (OSS) project meets a huge number of modifications everyday. Travis CI is a popular tool to test the quality of developers’ contribution in OSS projects. Often times when a broken build happens,it may cause subsequent broken builds. In order to fix broken builds, the process of debugging usually involves code review, community discussion, re-commits and testing through Travis CI, where we define it as a feedback loop since the process can be repeatable. In this paper, based on the data provided by Travis Torrent, we investigate this dynamic feedback loop for fixing broken builds in Travis CI. Considering the hierarchical structure of the data set, we propose multilevel models to understand the influential factors to developer productivity in this evolving software development process. We show that the contextual effects of branches and projects are important to model developer productivity. We found that a development pattern with more caution when commiting code rather than relying on frequent “break-fixing”&amp;quot; should be advocated to improve the developer productivity. We also propose a model to predict the likelihood of fixing broken builds in FBLs.&lt;/p&gt;
&lt;div id=&#34;data-gathering&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Data Gathering&lt;/h3&gt;
&lt;p&gt;Our study is based on &lt;a href=&#34;https://travistorrent.testroots.org/page_dataformat/&#34;&gt;TravisTorrent Dataset&lt;/a&gt;, the 11.1.2017 version. There are 1,283 projects with 3,702,595 Travis CI build job entries. We extracted Feedback Loops and relevant features from data based on our definition and research questions. The dataset contains a column called &lt;strong&gt;tr_prev_build&lt;/strong&gt;, recording the previous build (if exist)of that entry, which we used it to extract a sequence of builds in a branch. With the attribute &lt;strong&gt;tr_status&lt;/strong&gt;, we can categorize our feedback loops into two types: “broken-passed” and “broken-broken” loops. Besides,we found a lot of cases with missing values for the tests information, i.e tr_log num tests run. We decided to filter out those cases and focus on the data with records about the testing process for our research purpose.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;research-questions&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Research Questions&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;What are the important factors related to the time span for fixing sequential broken builds in a feedback loop?&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;It is known that time costs to fix bugs do vary obviously depending on programmer’s coding, collaboration and testing practices. From the TravisTorrent dataset, there is rich information tracking the programmers’ behaviors during the feedback loops, such as number of failed/errored (re-)commits, testing code change, file churn and pull requests for different branches and projects. Understanding how long it could take to fix sequential broken builds would be valuable for the team to evaluate the process and make more focused efforts with Travis CI.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;What are the important factors related to the probability of sequential broken builds being fixed in a feedback loop? Can we build a model to predict the likelihood of sequential broken builds being fixed?&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In order to avoid ecology fallacy, we are concerned about whether there is significant variance in the branch and the project levels in terms of the successful rate of fixing broken builds. Based on the the changes made in the feedback loop process and the metadata of a project, we ask if we can find factors related to probability of fixing broken builds in a FBL. Moreover, a prediction model could be built to give probability of the next build being bug free. Hence it could help improve the efficiency of sending and managing pull requests for developers and reduce the overload of building jobs on Travis CI.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;



&lt;!-- BLOGDOWN-HEAD

&lt;link href=&#34;#####../content/projects/GHTravis_files/font-awesome/css/font-awesome.min.css&#34; rel=&#34;stylesheet&#34; /&gt;





/BLOGDOWN-HEAD --&gt;
</description>
    </item>
    
    <item>
      <title>Air Quality in China</title>
      <link>/blog/ChinaAirQualityAnalysis/</link>
      <pubDate>Sun, 10 Jan 2016 00:00:00 +0000</pubDate>
      
      <guid>/blog/ChinaAirQualityAnalysis/</guid>
      <description>&lt;!-- BLOGDOWN-BODY-BEFORE

/BLOGDOWN-BODY-BEFORE --&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#introduction&#34;&gt;Introduction&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#exploratory-data-analysis&#34;&gt;Exploratory Data Analysis&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#getting-started-in-data-science&#34;&gt;Library Setup&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#getting-the-data&#34;&gt;Getting the data&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#crude-time-series-plot&#34;&gt;Crude Time series plot&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#radar-plot-for-comparing-air-pollution-levels&#34;&gt;Radar plot for comparing air pollution levels&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#get-more-data-for-other-cities-in-a-parallel-way&#34;&gt;Get more data for other cities in a parallel way&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#interactive-time-series-plots-for-different-cities&#34;&gt;Interactive Time Series plots for different cities&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#stacked-bar-chart&#34;&gt;Stacked Bar Chart&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#aggregated-monthly-time-series-plots&#34;&gt;Aggregated Monthly Time Series Plots&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#wrap-up&#34;&gt;Wrap-Up&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div id=&#34;introduction&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Introduction&lt;/h1&gt;
&lt;p&gt;Air pollution is a severe problem in China. It has been heartbroken for people to see that smog hangs heavy over cities, where children grow up with asthma and other respiratory illnesses. PM 2.5 is a measurement of small particulate matter in the air and it’s the main cause of the serious smog problem.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;PM2.5 is readily inhalable and penetrates deep into the lungs. PM2.5 allow for many chemicals harmful to human health to be carried into our internal organs, causing a wide range of illnesses and mortality, including cancer (especially lung cancer), stroke and damage to unborn children. They have a strong association with most types of respiratory illnesses, heart disease and even mortality.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;There is no doubt that the increasing pressure and concerns from the public stresses the government to take this problem very seriously. However, as many researches suggests, solving the air pollution crisis in China is probably a complex and long-haul process caused by burning coal in factories and power plants and oil combustion by vehicles, which would take firm and multi-faceted efforts from the government and the public to overcome it. I’m interested in writing a series of posts to analyze the trend of air quality in Chinese cities and understand its seasonal/event impacts. In this blog post, we want to be able to answer the following questions&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;What are the trends of pm2.5 in Chinese cities? This is an exploratory data analysis, which helps us draw insights for time series analysis.&lt;br /&gt;
&lt;/li&gt;
&lt;li&gt;Can we identify and quantify the seasonal effects in air quality? It is known that winter season affects the air quality because the coal burnning is usually supplied for heating in northern China.&lt;/li&gt;
&lt;li&gt;What would the impact of Spring festival be for the air quality this year? Spring festival is the most important festival in China. It is the peak time when people commute for home and even maybe celebrate with fireworks.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;exploratory-data-analysis&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Exploratory Data Analysis&lt;/h1&gt;
&lt;div id=&#34;library-setup&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Library Setup&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# API scraping
library(parallel)
library(multidplyr) # parallel processing
library(ropenaq) # sourced from OpenAQ, see https://github.com/ropensci/ropenaq
# Data Munging
library(tidyverse)
library(lubridate)
# Data Visualization
library(ggplot2)
library(scales)
library(ggseas)
library(ggmap)
library(dygraphs)
library(radarchart)
library(plotly)
# Time Series Analysis
library(xts)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;getting-the-data&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Getting the data&lt;/h2&gt;
&lt;p&gt;With the &lt;code&gt;ropenaq&lt;/code&gt; pacakge, there are 5 cities in China available for us to get the air quality data.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;cities_tableChina &amp;lt;- aq_cities(country = &amp;quot;CN&amp;quot;)
cities_tableChina&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 5 × 5
##        city country locations count   cityURL
##       &amp;lt;chr&amp;gt;   &amp;lt;chr&amp;gt;     &amp;lt;int&amp;gt; &amp;lt;int&amp;gt;     &amp;lt;chr&amp;gt;
## 1   Beijing      CN         2 22659   Beijing
## 2   Chengdu      CN         1 10846   Chengdu
## 3 Guangzhou      CN         1 10755 Guangzhou
## 4  Shanghai      CN         1 10780  Shanghai
## 5  Shenyang      CN         1 10881  Shenyang&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Let’s focus on Beijing first. There are nearly 22,400 observations with many observations per day.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;how_many &amp;lt;- attr(aq_measurements(city = &amp;quot;Beijing&amp;quot;), &amp;quot;meta&amp;quot;)
n &amp;lt;- how_many$found
results_ls &amp;lt;- list()
# Limit is 1000 observations at once, so we bring them all in 1000 at a time:
for(i in 1:ceiling(n / 1000)){
   results_ls[[i]] &amp;lt;- aq_measurements(country = &amp;quot;CN&amp;quot;, city = &amp;quot;Beijing&amp;quot;, parameter = &amp;quot;pm25&amp;quot;,
                                      limit = 1000, page = i)   
   cat(i)
}&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## 1234567891011121314151617181920212223&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# convert into a data frame:
results_df &amp;lt;- do.call(&amp;quot;rbind&amp;quot;, results_ls) %&amp;gt;%
   arrange(dateLocal)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;time-series-plot-for-beijing-city&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Time series plot for Beijing city&lt;/h2&gt;
&lt;p&gt;With filtering out some nonsense/missing values, we draw the rough time series plot first to observe the trend. Note that&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# draw exploratory graph
results_df %&amp;gt;% filter(value &amp;gt; 0) %&amp;gt;% 
   ggplot(aes(x = dateLocal, y = value)) + 
   geom_line() +
   ggtitle(&amp;quot;PM 2.5 Trend in Beijing&amp;quot;) +
   scale_y_continuous(&amp;quot;Value&amp;quot;, label = comma) +
   labs(x = &amp;quot;&amp;quot;, caption = &amp;quot;Source: OpenAQ&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;#####../content/blog/ChinaAirQualityAnalysis_files/figure-html/unnamed-chunk-4-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;It seems hard to see the trend clearly due to too many data points. Let’s try to just plot the daily average pm2.5 trend, namely, the trimmed mean average observation for each day.We can see the spikes are mostly in the winter season of a year.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;bj_df &amp;lt;- results_df %&amp;gt;% filter(value &amp;gt; 0) %&amp;gt;% mutate(Day = as.Date(dateLocal))

bj_df %&amp;gt;%
  group_by(Day) %&amp;gt;% 
  summarise(avgvalue = mean(value, tr = 0.1, na.rm = TRUE)) %&amp;gt;% 
  ggplot(aes(x = Day, y = avgvalue)) + geom_line() +
  ggtitle(&amp;quot;PM 2.5 Trend in Beijing&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;#####../content/blog/ChinaAirQualityAnalysis_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;radar-plot&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Radar plot&lt;/h2&gt;
&lt;p&gt;To get a more clear sense, We can add a column to indicate the daily polution level according to the &lt;a href=&#34;http://aqicn.org/scale/&#34;&gt;summary&lt;/a&gt;, so that it will allow us to see how many days categorized by different air pollution levels for 2014, 2015 and 2016.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;bj_daydf &amp;lt;- bj_df %&amp;gt;% 
  filter(between(Day, as.Date(&amp;#39;2014-01-01&amp;#39;), as.Date(&amp;#39;2016-12-31&amp;#39;))) %&amp;gt;% 
  group_by(Day) %&amp;gt;% summarise(avgvalue = mean(value, tr = 0.1, na.rm = TRUE)) %&amp;gt;%
  mutate(pollution_level = case_when(
  findInterval(.$avgvalue, c(0, 51)) == 1 ~ &amp;quot;Good&amp;quot;,
  findInterval(.$avgvalue, c(51, 101)) == 1 ~ &amp;quot;Moderate&amp;quot;,
  findInterval(.$avgvalue, c(101, 150)) == 1 ~ &amp;quot;Unhealthy(SensitiveGroups)&amp;quot;,
  findInterval(.$avgvalue, c(151, 201)) == 1 ~ &amp;quot;Unhealthy&amp;quot;,
  findInterval(.$avgvalue, c(201, 300)) == 1 ~ &amp;quot;VeryUnhealthy&amp;quot;,
  .$avgvalue &amp;gt; 300 ~ &amp;quot;Hazardous&amp;quot;
)) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It’s worth mentioning that the number of measurement(days) is not consistent across three years. We prefer to compute the relative percentage as the metric to compare the differences.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;#bj_daydf %&amp;gt;% mutate(Year = as.numeric(format(Day, &amp;quot;%Y&amp;quot;))) %&amp;gt;%  group_by(Year) %&amp;gt;% 
#  summarise(num_days = n())

# add the relative percentage 
bj_daydf %&amp;gt;% mutate(Year = as.numeric(format(Day, &amp;quot;%Y&amp;quot;))) %&amp;gt;% 
  group_by(pollution_level, Year) %&amp;gt;% 
  summarise(num_days = n()) %&amp;gt;% 
  group_by(Year) %&amp;gt;% 
  mutate(per = round(num_days/sum(num_days)*100, 2)) %&amp;gt;% 
  ungroup()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 18 × 4
##               pollution_level  Year num_days   per
##                         &amp;lt;chr&amp;gt; &amp;lt;dbl&amp;gt;    &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt;
## 1                        Good  2014      106 44.17
## 2                        Good  2015      162 48.50
## 3                        Good  2016      166 47.70
## 4                   Hazardous  2014        6  2.50
## 5                   Hazardous  2015        7  2.10
## 6                   Hazardous  2016        5  1.44
## 7                    Moderate  2014       65 27.08
## 8                    Moderate  2015       94 28.14
## 9                    Moderate  2016      109 31.32
## 10                  Unhealthy  2014       13  5.42
## 11                  Unhealthy  2015       16  4.79
## 12                  Unhealthy  2016       14  4.02
## 13 Unhealthy(SensitiveGroups)  2014       37 15.42
## 14 Unhealthy(SensitiveGroups)  2015       41 12.28
## 15 Unhealthy(SensitiveGroups)  2016       38 10.92
## 16              VeryUnhealthy  2014       13  5.42
## 17              VeryUnhealthy  2015       14  4.19
## 18              VeryUnhealthy  2016       16  4.60&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Based on the daily time series, here I use the interactive radar plot to compare the yearly changes of air pollution levels in terms of percentage. A little bit surprisingly, it shows the air quality in Beijing does improve, especially when comparing year 2016 and 2014, which somehow reflects the findings from the &lt;a href=&#34;http://www.huffingtonpost.com/entry/china-air-pollution-2014_us_568e592ce4b0a2b6fb6ecb73&#34;&gt;report&lt;/a&gt;. However, as the report mentions, the country isn’t in the clear yet:(.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;radarplot_dt &amp;lt;- bj_daydf %&amp;gt;% mutate(Year = as.numeric(format(Day, &amp;quot;%Y&amp;quot;))) %&amp;gt;% 
  group_by(pollution_level, Year) %&amp;gt;% 
  summarise(num_days = n()) %&amp;gt;% 
  group_by(Year) %&amp;gt;% 
  mutate(per = round(num_days/sum(num_days)*100, 2)) %&amp;gt;% 
  ungroup() %&amp;gt;% select(pollution_level, Year, per) %&amp;gt;% 
  reshape2::dcast(pollution_level ~ Year, value.var = &amp;quot;per&amp;quot;) %&amp;gt;%  
  rename(Label = pollution_level)

chartJSRadar(radarplot_dt, maxScale = 55, showToolTipLabel=TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;canvas id=&#34;htmlwidget-f967fef028fdf163b95d&#34; class=&#34;chartJSRadar html-widget&#34; width=&#34;672&#34; height=&#34;480&#34;&gt;&lt;/canvas&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-f967fef028fdf163b95d&#34;&gt;{&#34;x&#34;:{&#34;data&#34;:{&#34;labels&#34;:[&#34;Good&#34;,&#34;Hazardous&#34;,&#34;Moderate&#34;,&#34;Unhealthy&#34;,&#34;Unhealthy(SensitiveGroups)&#34;,&#34;VeryUnhealthy&#34;],&#34;datasets&#34;:[{&#34;label&#34;:&#34;2014&#34;,&#34;data&#34;:[44.17,2.5,27.08,5.42,15.42,5.42],&#34;backgroundColor&#34;:&#34;rgba(255,0,0,0.2)&#34;,&#34;borderColor&#34;:&#34;rgba(255,0,0,0.8)&#34;,&#34;pointBackgroundColor&#34;:&#34;rgba(255,0,0,0.8)&#34;,&#34;pointBorderColor&#34;:&#34;#fff&#34;,&#34;pointHoverBackgroundColor&#34;:&#34;#fff&#34;,&#34;pointHoverBorderColor&#34;:&#34;rgba(255,0,0,0.8)&#34;},{&#34;label&#34;:&#34;2015&#34;,&#34;data&#34;:[48.5,2.1,28.14,4.79,12.28,4.19],&#34;backgroundColor&#34;:&#34;rgba(0,255,0,0.2)&#34;,&#34;borderColor&#34;:&#34;rgba(0,255,0,0.8)&#34;,&#34;pointBackgroundColor&#34;:&#34;rgba(0,255,0,0.8)&#34;,&#34;pointBorderColor&#34;:&#34;#fff&#34;,&#34;pointHoverBackgroundColor&#34;:&#34;#fff&#34;,&#34;pointHoverBorderColor&#34;:&#34;rgba(0,255,0,0.8)&#34;},{&#34;label&#34;:&#34;2016&#34;,&#34;data&#34;:[47.7,1.44,31.32,4.02,10.92,4.6],&#34;backgroundColor&#34;:&#34;rgba(0,0,255,0.2)&#34;,&#34;borderColor&#34;:&#34;rgba(0,0,255,0.8)&#34;,&#34;pointBackgroundColor&#34;:&#34;rgba(0,0,255,0.8)&#34;,&#34;pointBorderColor&#34;:&#34;#fff&#34;,&#34;pointHoverBackgroundColor&#34;:&#34;#fff&#34;,&#34;pointHoverBorderColor&#34;:&#34;rgba(0,0,255,0.8)&#34;}]},&#34;options&#34;:{&#34;responsive&#34;:true,&#34;title&#34;:{&#34;display&#34;:false,&#34;text&#34;:null},&#34;scale&#34;:{&#34;ticks&#34;:{&#34;max&#34;:55,&#34;min&#34;:0},&#34;pointLabels&#34;:{&#34;fontSize&#34;:18}},&#34;tooltips&#34;:{&#34;enabled&#34;:true,&#34;mode&#34;:&#34;label&#34;},&#34;legend&#34;:{&#34;display&#34;:true}}},&#34;evals&#34;:[],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;/div&gt;
&lt;div id=&#34;get-more-data-for-other-cities-in-a-parallel-way&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Get more data for other cities in a parallel way&lt;/h2&gt;
&lt;p&gt;Let’s obtain the time series for other cities and combine them together. We will use the &lt;code&gt;parallel&lt;/code&gt; and &lt;code&gt;multidplyr&lt;/code&gt; packages to scrape the data, which is usually suggested to do this kind of task in parallel. I got inspirations from the &lt;a href=&#34;http://www.mattdancho.com/code-tools/2016/12/18/multidplyr.html&#34;&gt;post&lt;/a&gt; to apply on my case.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;getCityAirQualityData &amp;lt;- function(city_str){
  how_many &amp;lt;- attr(aq_measurements(city = city_str), &amp;quot;meta&amp;quot;)
  n &amp;lt;- how_many$found
  results_ls &amp;lt;- list()
# Limit is 1000 observations at once, so we bring them all in 1000 at a time:
  for(i in 1:ceiling(n / 1000)){
     results_ls[[i]] &amp;lt;- aq_measurements(country = &amp;quot;CN&amp;quot;, city = city_str, parameter = &amp;quot;pm25&amp;quot;,
                                        limit = 1000, page = i)   
  }

  # convert into a data frame:
  results_df &amp;lt;- do.call(&amp;quot;rbind&amp;quot;, results_ls) %&amp;gt;% arrange(dateLocal) %&amp;gt;% 
    filter(value &amp;gt; 0) %&amp;gt;% mutate(Day = as.Date(dateLocal)) %&amp;gt;% 
  filter(between(Day, as.Date(&amp;#39;2014-01-01&amp;#39;), as.Date(&amp;#39;2016-12-31&amp;#39;))) 
  results_df
}&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Assign groups
cities &amp;lt;- as_tibble(data.frame(cities = c(&amp;quot;Chengdu&amp;quot;, &amp;quot;Guangzhou&amp;quot;, &amp;quot;Shanghai&amp;quot;, &amp;quot;Shenyang&amp;quot;), stringsAsFactors = FALSE))
# Creat the cluster
cl &amp;lt;- detectCores()
group &amp;lt;- rep(1:cl, length.out = nrow(cities))
cityToScrape &amp;lt;- bind_cols(tibble(group), cities)
cluster &amp;lt;- create_cluster(cores = cl)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Initialising 4 core cluster.&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# PArtition by group
by_group &amp;lt;- cityToScrape %&amp;gt;%
    partition(group, cluster = cluster)
# SETUP CLUSTERS
by_group %&amp;gt;%
    # Assign libraries
    cluster_library(&amp;quot;tidyverse&amp;quot;) %&amp;gt;%
    cluster_library(&amp;quot;lubridate&amp;quot;) %&amp;gt;%
    cluster_library(&amp;quot;stringr&amp;quot;) %&amp;gt;%
    cluster_library(&amp;quot;ropenaq&amp;quot;) %&amp;gt;%
    # Assign values (use this to load functions or data to each core)
    cluster_assign_value(&amp;quot;getCityAirQualityData&amp;quot;, getCityAirQualityData) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We are set to run the parallel code in the awsome &lt;code&gt;dplyr&lt;/code&gt; way. It obviously speeds up the scraping task comparing to waiting for scraping page by page for each city.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;start &amp;lt;- proc.time() # Start clock
cities_in_parallel &amp;lt;- by_group %&amp;gt;% # Use by_group party_df
    mutate(
        pm2.5data = map(.x = cities, ~ getCityAirQualityData(city_str = .x))
        ) %&amp;gt;%
    collect() %&amp;gt;% # Special collect() function to recombine partitions
    as_tibble()   # Convert to tibble
time_elapsed_parallel &amp;lt;- proc.time() - start # End clock
time_elapsed_parallel&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##    user  system elapsed 
##    0.11    0.00   25.55&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;aq_df &amp;lt;- cities_in_parallel %&amp;gt;% unnest() %&amp;gt;% ungroup %&amp;gt;% 
  select(-group, -cities) %&amp;gt;% 
  bind_rows(list(., 
                 bj_df %&amp;gt;%filter(between(Day, as.Date(&amp;#39;2014-01-01&amp;#39;), as.Date(&amp;#39;2016-12-31&amp;#39;)))  ))&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;time-series-plots-for-comparison&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Time Series plots for comparison&lt;/h2&gt;
&lt;p&gt;With the PM2.5 time series of 5 cities, I created the interactive Time Series plot using the wonderful &lt;code&gt;dygraphs&lt;/code&gt; library to compare them. This interactive visualization would be more convinient for people to explore the trends. For example, observing the spikes, one can further research the phenomemon during the period.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;aq_ts_df &amp;lt;- aq_df %&amp;gt;% select(city, Day, value) %&amp;gt;% group_by(city, Day) %&amp;gt;%
  summarise(avgvalue = mean(value, tr = 0.1, na.rm = TRUE)) %&amp;gt;% 
  ungroup() %&amp;gt;% select(Day, city, avgvalue) %&amp;gt;% 
  reshape2::dcast(Day ~ city, value.var = &amp;quot;avgvalue&amp;quot;) 

aq_xts &amp;lt;- as.xts(aq_ts_df[-1],order.by = aq_ts_df$Day)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;dygraph(aq_xts, main = &amp;quot;PM2.5 Trends in Chinese cities&amp;quot;) %&amp;gt;% dyRangeSelector()&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-7b42fb776f616c8ebaba&#34; style=&#34;width:672px;height:480px;&#34; class=&#34;dygraphs html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-7b42fb776f616c8ebaba&#34;&gt;{&#34;x&#34;:{&#34;attrs&#34;:{&#34;title&#34;:&#34;PM2.5 Trends in Chinese cities&#34;,&#34;labels&#34;:[&#34;day&#34;,&#34;Beijing&#34;,&#34;Chengdu&#34;,&#34;Guangzhou&#34;,&#34;Shanghai&#34;,&#34;Shenyang&#34;],&#34;legend&#34;:&#34;auto&#34;,&#34;retainDateWindow&#34;:false,&#34;axes&#34;:{&#34;x&#34;:{&#34;pixelsPerLabel&#34;:60}},&#34;showRangeSelector&#34;:true,&#34;rangeSelectorHeight&#34;:40,&#34;rangeSelectorPlotFillColor&#34;:&#34; #A7B1C4&#34;,&#34;rangeSelectorPlotStrokeColor&#34;:&#34;#808FAB&#34;,&#34;interactionModel&#34;:&#34;Dygraph.Interaction.defaultModel&#34;},&#34;scale&#34;:&#34;daily&#34;,&#34;annotations&#34;:[],&#34;shadings&#34;:[],&#34;events&#34;:[],&#34;format&#34;:&#34;date&#34;,&#34;data&#34;:[[&#34;2014-01-01T00:00:00.000Z&#34;,&#34;2014-01-02T00:00:00.000Z&#34;,&#34;2014-01-03T00:00:00.000Z&#34;,&#34;2014-01-04T00:00:00.000Z&#34;,&#34;2014-01-05T00:00:00.000Z&#34;,&#34;2014-01-06T00:00:00.000Z&#34;,&#34;2014-01-07T00:00:00.000Z&#34;,&#34;2014-01-08T00:00:00.000Z&#34;,&#34;2014-01-09T00:00:00.000Z&#34;,&#34;2014-01-10T00:00:00.000Z&#34;,&#34;2014-01-11T00:00:00.000Z&#34;,&#34;2014-01-12T00:00:00.000Z&#34;,&#34;2014-01-13T00:00:00.000Z&#34;,&#34;2014-01-14T00:00:00.000Z&#34;,&#34;2014-01-15T00:00:00.000Z&#34;,&#34;2014-01-16T00:00:00.000Z&#34;,&#34;2014-01-17T00:00:00.000Z&#34;,&#34;2014-01-18T00:00:00.000Z&#34;,&#34;2014-01-19T00:00:00.000Z&#34;,&#34;2014-01-20T00:00:00.000Z&#34;,&#34;2014-01-21T00:00:00.000Z&#34;,&#34;2014-01-31T00:00:00.000Z&#34;,&#34;2014-02-01T00:00:00.000Z&#34;,&#34;2014-02-02T00:00:00.000Z&#34;,&#34;2014-02-03T00:00:00.000Z&#34;,&#34;2014-02-04T00:00:00.000Z&#34;,&#34;2014-02-05T00:00:00.000Z&#34;,&#34;2014-02-06T00:00:00.000Z&#34;,&#34;2014-02-07T00:00:00.000Z&#34;,&#34;2014-02-08T00:00:00.000Z&#34;,&#34;2014-02-09T00:00:00.000Z&#34;,&#34;2014-02-10T00:00:00.000Z&#34;,&#34;2014-02-11T00:00:00.000Z&#34;,&#34;2014-02-12T00:00:00.000Z&#34;,&#34;2014-02-13T00:00:00.000Z&#34;,&#34;2014-02-14T00:00:00.000Z&#34;,&#34;2014-02-15T00:00:00.000Z&#34;,&#34;2014-02-16T00:00:00.000Z&#34;,&#34;2014-02-17T00:00:00.000Z&#34;,&#34;2014-02-18T00:00:00.000Z&#34;,&#34;2014-02-19T00:00:00.000Z&#34;,&#34;2014-02-20T00:00:00.000Z&#34;,&#34;2014-02-21T00:00:00.000Z&#34;,&#34;2014-02-22T00:00:00.000Z&#34;,&#34;2014-02-23T00:00:00.000Z&#34;,&#34;2014-02-24T00:00:00.000Z&#34;,&#34;2014-02-25T00:00:00.000Z&#34;,&#34;2014-02-26T00:00:00.000Z&#34;,&#34;2014-02-27T00:00:00.000Z&#34;,&#34;2014-02-28T00:00:00.000Z&#34;,&#34;2014-03-01T00:00:00.000Z&#34;,&#34;2014-03-02T00:00:00.000Z&#34;,&#34;2014-03-03T00:00:00.000Z&#34;,&#34;2014-03-04T00:00:00.000Z&#34;,&#34;2014-03-05T00:00:00.000Z&#34;,&#34;2014-03-06T00:00:00.000Z&#34;,&#34;2014-03-07T00:00:00.000Z&#34;,&#34;2014-03-08T00:00:00.000Z&#34;,&#34;2014-03-09T00:00:00.000Z&#34;,&#34;2014-03-10T00:00:00.000Z&#34;,&#34;2014-03-11T00:00:00.000Z&#34;,&#34;2014-03-30T00:00:00.000Z&#34;,&#34;2014-03-31T00:00:00.000Z&#34;,&#34;2014-04-01T00:00:00.000Z&#34;,&#34;2014-04-02T00:00:00.000Z&#34;,&#34;2014-04-03T00:00:00.000Z&#34;,&#34;2014-04-04T00:00:00.000Z&#34;,&#34;2014-04-05T00:00:00.000Z&#34;,&#34;2014-04-06T00:00:00.000Z&#34;,&#34;2014-04-07T00:00:00.000Z&#34;,&#34;2014-04-08T00:00:00.000Z&#34;,&#34;2014-04-09T00:00:00.000Z&#34;,&#34;2014-04-10T00:00:00.000Z&#34;,&#34;2014-04-11T00:00:00.000Z&#34;,&#34;2014-04-12T00:00:00.000Z&#34;,&#34;2014-04-13T00:00:00.000Z&#34;,&#34;2014-04-14T00:00:00.000Z&#34;,&#34;2014-04-15T00:00:00.000Z&#34;,&#34;2014-04-16T00:00:00.000Z&#34;,&#34;2014-04-17T00:00:00.000Z&#34;,&#34;2014-04-18T00:00:00.000Z&#34;,&#34;2014-04-19T00:00:00.000Z&#34;,&#34;2014-04-20T00:00:00.000Z&#34;,&#34;2014-04-21T00:00:00.000Z&#34;,&#34;2014-04-22T00:00:00.000Z&#34;,&#34;2014-04-23T00:00:00.000Z&#34;,&#34;2014-04-24T00:00:00.000Z&#34;,&#34;2014-04-25T00:00:00.000Z&#34;,&#34;2014-04-26T00:00:00.000Z&#34;,&#34;2014-04-27T00:00:00.000Z&#34;,&#34;2014-04-28T00:00:00.000Z&#34;,&#34;2014-04-29T00:00:00.000Z&#34;,&#34;2014-04-30T00:00:00.000Z&#34;,&#34;2014-05-01T00:00:00.000Z&#34;,&#34;2014-05-02T00:00:00.000Z&#34;,&#34;2014-05-03T00:00:00.000Z&#34;,&#34;2014-05-28T00:00:00.000Z&#34;,&#34;2014-05-29T00:00:00.000Z&#34;,&#34;2014-06-05T00:00:00.000Z&#34;,&#34;2014-06-06T00:00:00.000Z&#34;,&#34;2014-06-07T00:00:00.000Z&#34;,&#34;2014-06-08T00:00:00.000Z&#34;,&#34;2014-06-09T00:00:00.000Z&#34;,&#34;2014-06-10T00:00:00.000Z&#34;,&#34;2014-06-11T00:00:00.000Z&#34;,&#34;2014-06-12T00:00:00.000Z&#34;,&#34;2014-06-13T00:00:00.000Z&#34;,&#34;2014-06-14T00:00:00.000Z&#34;,&#34;2014-06-15T00:00:00.000Z&#34;,&#34;2014-06-16T00:00:00.000Z&#34;,&#34;2014-06-17T00:00:00.000Z&#34;,&#34;2014-06-18T00:00:00.000Z&#34;,&#34;2014-06-19T00:00:00.000Z&#34;,&#34;2014-06-20T00:00:00.000Z&#34;,&#34;2014-06-21T00:00:00.000Z&#34;,&#34;2014-06-22T00:00:00.000Z&#34;,&#34;2014-06-23T00:00:00.000Z&#34;,&#34;2014-06-24T00:00:00.000Z&#34;,&#34;2014-06-25T00:00:00.000Z&#34;,&#34;2014-06-26T00:00:00.000Z&#34;,&#34;2014-06-27T00:00:00.000Z&#34;,&#34;2014-06-28T00:00:00.000Z&#34;,&#34;2014-06-29T00:00:00.000Z&#34;,&#34;2014-06-30T00:00:00.000Z&#34;,&#34;2014-07-01T00:00:00.000Z&#34;,&#34;2014-07-02T00:00:00.000Z&#34;,&#34;2014-07-03T00:00:00.000Z&#34;,&#34;2014-07-04T00:00:00.000Z&#34;,&#34;2014-07-05T00:00:00.000Z&#34;,&#34;2014-07-06T00:00:00.000Z&#34;,&#34;2014-07-07T00:00:00.000Z&#34;,&#34;2014-07-08T00:00:00.000Z&#34;,&#34;2014-07-09T00:00:00.000Z&#34;,&#34;2014-07-10T00:00:00.000Z&#34;,&#34;2014-07-11T00:00:00.000Z&#34;,&#34;2014-07-12T00:00:00.000Z&#34;,&#34;2014-07-13T00:00:00.000Z&#34;,&#34;2014-07-14T00:00:00.000Z&#34;,&#34;2014-07-15T00:00:00.000Z&#34;,&#34;2014-07-16T00:00:00.000Z&#34;,&#34;2014-07-17T00:00:00.000Z&#34;,&#34;2014-07-18T00:00:00.000Z&#34;,&#34;2014-07-19T00:00:00.000Z&#34;,&#34;2014-07-20T00:00:00.000Z&#34;,&#34;2014-07-21T00:00:00.000Z&#34;,&#34;2014-07-22T00:00:00.000Z&#34;,&#34;2014-07-23T00:00:00.000Z&#34;,&#34;2014-07-24T00:00:00.000Z&#34;,&#34;2014-07-25T00:00:00.000Z&#34;,&#34;2014-07-26T00:00:00.000Z&#34;,&#34;2014-07-27T00:00:00.000Z&#34;,&#34;2014-07-28T00:00:00.000Z&#34;,&#34;2014-07-29T00:00:00.000Z&#34;,&#34;2014-07-30T00:00:00.000Z&#34;,&#34;2014-07-31T00:00:00.000Z&#34;,&#34;2014-08-01T00:00:00.000Z&#34;,&#34;2014-08-02T00:00:00.000Z&#34;,&#34;2014-08-03T00:00:00.000Z&#34;,&#34;2014-08-04T00:00:00.000Z&#34;,&#34;2014-08-05T00:00:00.000Z&#34;,&#34;2014-08-13T00:00:00.000Z&#34;,&#34;2014-08-14T00:00:00.000Z&#34;,&#34;2014-08-15T00:00:00.000Z&#34;,&#34;2014-08-16T00:00:00.000Z&#34;,&#34;2014-08-17T00:00:00.000Z&#34;,&#34;2014-08-18T00:00:00.000Z&#34;,&#34;2014-08-19T00:00:00.000Z&#34;,&#34;2014-08-20T00:00:00.000Z&#34;,&#34;2014-08-21T00:00:00.000Z&#34;,&#34;2014-08-22T00:00:00.000Z&#34;,&#34;2014-08-23T00:00:00.000Z&#34;,&#34;2014-09-26T00:00:00.000Z&#34;,&#34;2014-09-27T00:00:00.000Z&#34;,&#34;2014-09-28T00:00:00.000Z&#34;,&#34;2014-09-29T00:00:00.000Z&#34;,&#34;2014-09-30T00:00:00.000Z&#34;,&#34;2014-10-01T00:00:00.000Z&#34;,&#34;2014-10-02T00:00:00.000Z&#34;,&#34;2014-10-03T00:00:00.000Z&#34;,&#34;2014-10-04T00:00:00.000Z&#34;,&#34;2014-10-05T00:00:00.000Z&#34;,&#34;2014-10-06T00:00:00.000Z&#34;,&#34;2014-10-07T00:00:00.000Z&#34;,&#34;2014-10-08T00:00:00.000Z&#34;,&#34;2014-10-09T00:00:00.000Z&#34;,&#34;2014-10-10T00:00:00.000Z&#34;,&#34;2014-10-16T00:00:00.000Z&#34;,&#34;2014-10-17T00:00:00.000Z&#34;,&#34;2014-10-18T00:00:00.000Z&#34;,&#34;2014-10-19T00:00:00.000Z&#34;,&#34;2014-10-20T00:00:00.000Z&#34;,&#34;2014-10-21T00:00:00.000Z&#34;,&#34;2014-10-22T00:00:00.000Z&#34;,&#34;2014-11-05T00:00:00.000Z&#34;,&#34;2014-11-06T00:00:00.000Z&#34;,&#34;2014-11-07T00:00:00.000Z&#34;,&#34;2014-11-08T00:00:00.000Z&#34;,&#34;2014-11-09T00:00:00.000Z&#34;,&#34;2014-11-10T00:00:00.000Z&#34;,&#34;2014-11-11T00:00:00.000Z&#34;,&#34;2014-11-12T00:00:00.000Z&#34;,&#34;2014-11-13T00:00:00.000Z&#34;,&#34;2014-11-14T00:00:00.000Z&#34;,&#34;2014-11-15T00:00:00.000Z&#34;,&#34;2014-11-16T00:00:00.000Z&#34;,&#34;2014-11-17T00:00:00.000Z&#34;,&#34;2014-11-18T00:00:00.000Z&#34;,&#34;2014-11-19T00:00:00.000Z&#34;,&#34;2014-11-20T00:00:00.000Z&#34;,&#34;2014-11-21T00:00:00.000Z&#34;,&#34;2014-11-22T00:00:00.000Z&#34;,&#34;2014-11-23T00:00:00.000Z&#34;,&#34;2014-12-02T00:00:00.000Z&#34;,&#34;2014-12-03T00:00:00.000Z&#34;,&#34;2014-12-04T00:00:00.000Z&#34;,&#34;2014-12-05T00:00:00.000Z&#34;,&#34;2014-12-06T00:00:00.000Z&#34;,&#34;2014-12-07T00:00:00.000Z&#34;,&#34;2014-12-08T00:00:00.000Z&#34;,&#34;2014-12-09T00:00:00.000Z&#34;,&#34;2014-12-10T00:00:00.000Z&#34;,&#34;2014-12-11T00:00:00.000Z&#34;,&#34;2014-12-12T00:00:00.000Z&#34;,&#34;2014-12-13T00:00:00.000Z&#34;,&#34;2014-12-14T00:00:00.000Z&#34;,&#34;2014-12-15T00:00:00.000Z&#34;,&#34;2014-12-16T00:00:00.000Z&#34;,&#34;2014-12-17T00:00:00.000Z&#34;,&#34;2014-12-18T00:00:00.000Z&#34;,&#34;2014-12-19T00:00:00.000Z&#34;,&#34;2014-12-20T00:00:00.000Z&#34;,&#34;2014-12-21T00:00:00.000Z&#34;,&#34;2014-12-22T00:00:00.000Z&#34;,&#34;2014-12-23T00:00:00.000Z&#34;,&#34;2014-12-24T00:00:00.000Z&#34;,&#34;2014-12-25T00:00:00.000Z&#34;,&#34;2014-12-26T00:00:00.000Z&#34;,&#34;2014-12-27T00:00:00.000Z&#34;,&#34;2014-12-28T00:00:00.000Z&#34;,&#34;2014-12-29T00:00:00.000Z&#34;,&#34;2015-01-22T00:00:00.000Z&#34;,&#34;2015-01-23T00:00:00.000Z&#34;,&#34;2015-01-24T00:00:00.000Z&#34;,&#34;2015-01-25T00:00:00.000Z&#34;,&#34;2015-01-26T00:00:00.000Z&#34;,&#34;2015-01-27T00:00:00.000Z&#34;,&#34;2015-01-28T00:00:00.000Z&#34;,&#34;2015-01-29T00:00:00.000Z&#34;,&#34;2015-01-30T00:00:00.000Z&#34;,&#34;2015-01-31T00:00:00.000Z&#34;,&#34;2015-02-01T00:00:00.000Z&#34;,&#34;2015-02-02T00:00:00.000Z&#34;,&#34;2015-02-03T00:00:00.000Z&#34;,&#34;2015-02-04T00:00:00.000Z&#34;,&#34;2015-02-05T00:00:00.000Z&#34;,&#34;2015-02-06T00:00:00.000Z&#34;,&#34;2015-02-07T00:00:00.000Z&#34;,&#34;2015-02-08T00:00:00.000Z&#34;,&#34;2015-02-09T00:00:00.000Z&#34;,&#34;2015-02-10T00:00:00.000Z&#34;,&#34;2015-02-11T00:00:00.000Z&#34;,&#34;2015-02-12T00:00:00.000Z&#34;,&#34;2015-02-13T00:00:00.000Z&#34;,&#34;2015-02-14T00:00:00.000Z&#34;,&#34;2015-02-15T00:00:00.000Z&#34;,&#34;2015-02-16T00:00:00.000Z&#34;,&#34;2015-02-17T00:00:00.000Z&#34;,&#34;2015-02-18T00:00:00.000Z&#34;,&#34;2015-02-19T00:00:00.000Z&#34;,&#34;2015-02-21T00:00:00.000Z&#34;,&#34;2015-02-22T00:00:00.000Z&#34;,&#34;2015-02-23T00:00:00.000Z&#34;,&#34;2015-02-24T00:00:00.000Z&#34;,&#34;2015-02-25T00:00:00.000Z&#34;,&#34;2015-02-26T00:00:00.000Z&#34;,&#34;2015-02-27T00:00:00.000Z&#34;,&#34;2015-02-28T00:00:00.000Z&#34;,&#34;2015-03-01T00:00:00.000Z&#34;,&#34;2015-03-02T00:00:00.000Z&#34;,&#34;2015-03-03T00:00:00.000Z&#34;,&#34;2015-03-04T00:00:00.000Z&#34;,&#34;2015-03-05T00:00:00.000Z&#34;,&#34;2015-03-06T00:00:00.000Z&#34;,&#34;2015-03-07T00:00:00.000Z&#34;,&#34;2015-03-08T00:00:00.000Z&#34;,&#34;2015-03-09T00:00:00.000Z&#34;,&#34;2015-03-10T00:00:00.000Z&#34;,&#34;2015-03-11T00:00:00.000Z&#34;,&#34;2015-03-12T00:00:00.000Z&#34;,&#34;2015-03-13T00:00:00.000Z&#34;,&#34;2015-03-14T00:00:00.000Z&#34;,&#34;2015-03-15T00:00:00.000Z&#34;,&#34;2015-03-16T00:00:00.000Z&#34;,&#34;2015-03-17T00:00:00.000Z&#34;,&#34;2015-03-18T00:00:00.000Z&#34;,&#34;2015-03-19T00:00:00.000Z&#34;,&#34;2015-03-20T00:00:00.000Z&#34;,&#34;2015-03-21T00:00:00.000Z&#34;,&#34;2015-03-22T00:00:00.000Z&#34;,&#34;2015-03-23T00:00:00.000Z&#34;,&#34;2015-03-24T00:00:00.000Z&#34;,&#34;2015-03-25T00:00:00.000Z&#34;,&#34;2015-03-26T00:00:00.000Z&#34;,&#34;2015-03-27T00:00:00.000Z&#34;,&#34;2015-03-28T00:00:00.000Z&#34;,&#34;2015-03-29T00:00:00.000Z&#34;,&#34;2015-03-30T00:00:00.000Z&#34;,&#34;2015-03-31T00:00:00.000Z&#34;,&#34;2015-04-01T00:00:00.000Z&#34;,&#34;2015-04-02T00:00:00.000Z&#34;,&#34;2015-04-03T00:00:00.000Z&#34;,&#34;2015-04-04T00:00:00.000Z&#34;,&#34;2015-04-05T00:00:00.000Z&#34;,&#34;2015-04-06T00:00:00.000Z&#34;,&#34;2015-04-07T00:00:00.000Z&#34;,&#34;2015-04-08T00:00:00.000Z&#34;,&#34;2015-04-09T00:00:00.000Z&#34;,&#34;2015-04-10T00:00:00.000Z&#34;,&#34;2015-04-11T00:00:00.000Z&#34;,&#34;2015-04-12T00:00:00.000Z&#34;,&#34;2015-04-13T00:00:00.000Z&#34;,&#34;2015-04-14T00:00:00.000Z&#34;,&#34;2015-04-15T00:00:00.000Z&#34;,&#34;2015-04-16T00:00:00.000Z&#34;,&#34;2015-04-17T00:00:00.000Z&#34;,&#34;2015-04-18T00:00:00.000Z&#34;,&#34;2015-04-19T00:00:00.000Z&#34;,&#34;2015-04-20T00:00:00.000Z&#34;,&#34;2015-04-21T00:00:00.000Z&#34;,&#34;2015-04-22T00:00:00.000Z&#34;,&#34;2015-04-23T00:00:00.000Z&#34;,&#34;2015-04-24T00:00:00.000Z&#34;,&#34;2015-04-25T00:00:00.000Z&#34;,&#34;2015-04-26T00:00:00.000Z&#34;,&#34;2015-04-27T00:00:00.000Z&#34;,&#34;2015-04-28T00:00:00.000Z&#34;,&#34;2015-04-29T00:00:00.000Z&#34;,&#34;2015-04-30T00:00:00.000Z&#34;,&#34;2015-05-01T00:00:00.000Z&#34;,&#34;2015-05-02T00:00:00.000Z&#34;,&#34;2015-05-03T00:00:00.000Z&#34;,&#34;2015-05-04T00:00:00.000Z&#34;,&#34;2015-05-05T00:00:00.000Z&#34;,&#34;2015-05-06T00:00:00.000Z&#34;,&#34;2015-05-07T00:00:00.000Z&#34;,&#34;2015-05-08T00:00:00.000Z&#34;,&#34;2015-05-09T00:00:00.000Z&#34;,&#34;2015-05-10T00:00:00.000Z&#34;,&#34;2015-05-11T00:00:00.000Z&#34;,&#34;2015-05-12T00:00:00.000Z&#34;,&#34;2015-05-13T00:00:00.000Z&#34;,&#34;2015-05-14T00:00:00.000Z&#34;,&#34;2015-05-15T00:00:00.000Z&#34;,&#34;2015-05-16T00:00:00.000Z&#34;,&#34;2015-05-17T00:00:00.000Z&#34;,&#34;2015-05-18T00:00:00.000Z&#34;,&#34;2015-05-19T00:00:00.000Z&#34;,&#34;2015-05-20T00:00:00.000Z&#34;,&#34;2015-05-21T00:00:00.000Z&#34;,&#34;2015-05-22T00:00:00.000Z&#34;,&#34;2015-05-23T00:00:00.000Z&#34;,&#34;2015-05-24T00:00:00.000Z&#34;,&#34;2015-05-25T00:00:00.000Z&#34;,&#34;2015-05-26T00:00:00.000Z&#34;,&#34;2015-05-27T00:00:00.000Z&#34;,&#34;2015-05-28T00:00:00.000Z&#34;,&#34;2015-05-30T00:00:00.000Z&#34;,&#34;2015-05-31T00:00:00.000Z&#34;,&#34;2015-06-01T00:00:00.000Z&#34;,&#34;2015-06-02T00:00:00.000Z&#34;,&#34;2015-06-03T00:00:00.000Z&#34;,&#34;2015-06-04T00:00:00.000Z&#34;,&#34;2015-06-05T00:00:00.000Z&#34;,&#34;2015-06-06T00:00:00.000Z&#34;,&#34;2015-06-07T00:00:00.000Z&#34;,&#34;2015-06-08T00:00:00.000Z&#34;,&#34;2015-06-09T00:00:00.000Z&#34;,&#34;2015-06-10T00:00:00.000Z&#34;,&#34;2015-06-11T00:00:00.000Z&#34;,&#34;2015-06-12T00:00:00.000Z&#34;,&#34;2015-06-13T00:00:00.000Z&#34;,&#34;2015-06-14T00:00:00.000Z&#34;,&#34;2015-06-15T00:00:00.000Z&#34;,&#34;2015-06-16T00:00:00.000Z&#34;,&#34;2015-06-17T00:00:00.000Z&#34;,&#34;2015-06-18T00:00:00.000Z&#34;,&#34;2015-06-19T00:00:00.000Z&#34;,&#34;2015-06-20T00:00:00.000Z&#34;,&#34;2015-06-21T00:00:00.000Z&#34;,&#34;2015-06-22T00:00:00.000Z&#34;,&#34;2015-06-23T00:00:00.000Z&#34;,&#34;2015-06-24T00:00:00.000Z&#34;,&#34;2015-06-25T00:00:00.000Z&#34;,&#34;2015-06-26T00:00:00.000Z&#34;,&#34;2015-06-27T00:00:00.000Z&#34;,&#34;2015-06-28T00:00:00.000Z&#34;,&#34;2015-06-29T00:00:00.000Z&#34;,&#34;2015-06-30T00:00:00.000Z&#34;,&#34;2015-07-01T00:00:00.000Z&#34;,&#34;2015-07-02T00:00:00.000Z&#34;,&#34;2015-07-03T00:00:00.000Z&#34;,&#34;2015-07-04T00:00:00.000Z&#34;,&#34;2015-07-05T00:00:00.000Z&#34;,&#34;2015-07-06T00:00:00.000Z&#34;,&#34;2015-07-07T00:00:00.000Z&#34;,&#34;2015-07-08T00:00:00.000Z&#34;,&#34;2015-07-09T00:00:00.000Z&#34;,&#34;2015-07-10T00:00:00.000Z&#34;,&#34;2015-07-11T00:00:00.000Z&#34;,&#34;2015-07-12T00:00:00.000Z&#34;,&#34;2015-07-13T00:00:00.000Z&#34;,&#34;2015-07-14T00:00:00.000Z&#34;,&#34;2015-07-15T00:00:00.000Z&#34;,&#34;2015-07-16T00:00:00.000Z&#34;,&#34;2015-07-17T00:00:00.000Z&#34;,&#34;2015-07-18T00:00:00.000Z&#34;,&#34;2015-07-19T00:00:00.000Z&#34;,&#34;2015-07-20T00:00:00.000Z&#34;,&#34;2015-07-21T00:00:00.000Z&#34;,&#34;2015-07-22T00:00:00.000Z&#34;,&#34;2015-07-23T00:00:00.000Z&#34;,&#34;2015-07-24T00:00:00.000Z&#34;,&#34;2015-07-25T00:00:00.000Z&#34;,&#34;2015-07-26T00:00:00.000Z&#34;,&#34;2015-07-27T00:00:00.000Z&#34;,&#34;2015-07-28T00:00:00.000Z&#34;,&#34;2015-07-29T00:00:00.000Z&#34;,&#34;2015-07-30T00:00:00.000Z&#34;,&#34;2015-07-31T00:00:00.000Z&#34;,&#34;2015-08-01T00:00:00.000Z&#34;,&#34;2015-08-02T00:00:00.000Z&#34;,&#34;2015-08-03T00:00:00.000Z&#34;,&#34;2015-08-04T00:00:00.000Z&#34;,&#34;2015-08-05T00:00:00.000Z&#34;,&#34;2015-08-06T00:00:00.000Z&#34;,&#34;2015-08-07T00:00:00.000Z&#34;,&#34;2015-08-08T00:00:00.000Z&#34;,&#34;2015-08-09T00:00:00.000Z&#34;,&#34;2015-08-10T00:00:00.000Z&#34;,&#34;2015-08-11T00:00:00.000Z&#34;,&#34;2015-08-12T00:00:00.000Z&#34;,&#34;2015-08-13T00:00:00.000Z&#34;,&#34;2015-08-14T00:00:00.000Z&#34;,&#34;2015-08-15T00:00:00.000Z&#34;,&#34;2015-08-16T00:00:00.000Z&#34;,&#34;2015-08-17T00:00:00.000Z&#34;,&#34;2015-08-18T00:00:00.000Z&#34;,&#34;2015-08-19T00:00:00.000Z&#34;,&#34;2015-08-20T00:00:00.000Z&#34;,&#34;2015-08-21T00:00:00.000Z&#34;,&#34;2015-08-22T00:00:00.000Z&#34;,&#34;2015-08-23T00:00:00.000Z&#34;,&#34;2015-08-24T00:00:00.000Z&#34;,&#34;2015-08-25T00:00:00.000Z&#34;,&#34;2015-08-26T00:00:00.000Z&#34;,&#34;2015-08-27T00:00:00.000Z&#34;,&#34;2015-08-28T00:00:00.000Z&#34;,&#34;2015-08-29T00:00:00.000Z&#34;,&#34;2015-08-30T00:00:00.000Z&#34;,&#34;2015-08-31T00:00:00.000Z&#34;,&#34;2015-09-01T00:00:00.000Z&#34;,&#34;2015-09-02T00:00:00.000Z&#34;,&#34;2015-09-03T00:00:00.000Z&#34;,&#34;2015-09-04T00:00:00.000Z&#34;,&#34;2015-09-05T00:00:00.000Z&#34;,&#34;2015-09-06T00:00:00.000Z&#34;,&#34;2015-09-07T00:00:00.000Z&#34;,&#34;2015-09-08T00:00:00.000Z&#34;,&#34;2015-09-09T00:00:00.000Z&#34;,&#34;2015-09-10T00:00:00.000Z&#34;,&#34;2015-09-11T00:00:00.000Z&#34;,&#34;2015-09-12T00:00:00.000Z&#34;,&#34;2015-09-13T00:00:00.000Z&#34;,&#34;2015-09-14T00:00:00.000Z&#34;,&#34;2015-09-15T00:00:00.000Z&#34;,&#34;2015-09-16T00:00:00.000Z&#34;,&#34;2015-09-17T00:00:00.000Z&#34;,&#34;2015-09-18T00:00:00.000Z&#34;,&#34;2015-09-19T00:00:00.000Z&#34;,&#34;2015-09-20T00:00:00.000Z&#34;,&#34;2015-09-21T00:00:00.000Z&#34;,&#34;2015-09-22T00:00:00.000Z&#34;,&#34;2015-09-23T00:00:00.000Z&#34;,&#34;2015-09-24T00:00:00.000Z&#34;,&#34;2015-09-25T00:00:00.000Z&#34;,&#34;2015-09-26T00:00:00.000Z&#34;,&#34;2015-09-27T00:00:00.000Z&#34;,&#34;2015-09-28T00:00:00.000Z&#34;,&#34;2015-09-29T00:00:00.000Z&#34;,&#34;2015-09-30T00:00:00.000Z&#34;,&#34;2015-10-01T00:00:00.000Z&#34;,&#34;2015-10-02T00:00:00.000Z&#34;,&#34;2015-10-03T00:00:00.000Z&#34;,&#34;2015-10-04T00:00:00.000Z&#34;,&#34;2015-10-05T00:00:00.000Z&#34;,&#34;2015-10-06T00:00:00.000Z&#34;,&#34;2015-10-07T00:00:00.000Z&#34;,&#34;2015-10-08T00:00:00.000Z&#34;,&#34;2015-10-09T00:00:00.000Z&#34;,&#34;2015-10-10T00:00:00.000Z&#34;,&#34;2015-10-11T00:00:00.000Z&#34;,&#34;2015-10-12T00:00:00.000Z&#34;,&#34;2015-10-13T00:00:00.000Z&#34;,&#34;2015-10-14T00:00:00.000Z&#34;,&#34;2015-10-15T00:00:00.000Z&#34;,&#34;2015-10-16T00:00:00.000Z&#34;,&#34;2015-10-20T00:00:00.000Z&#34;,&#34;2015-10-21T00:00:00.000Z&#34;,&#34;2015-10-22T00:00:00.000Z&#34;,&#34;2015-10-23T00:00:00.000Z&#34;,&#34;2015-10-24T00:00:00.000Z&#34;,&#34;2015-10-25T00:00:00.000Z&#34;,&#34;2015-10-26T00:00:00.000Z&#34;,&#34;2015-10-27T00:00:00.000Z&#34;,&#34;2015-10-28T00:00:00.000Z&#34;,&#34;2015-10-29T00:00:00.000Z&#34;,&#34;2015-10-30T00:00:00.000Z&#34;,&#34;2015-10-31T00:00:00.000Z&#34;,&#34;2015-11-01T00:00:00.000Z&#34;,&#34;2015-11-02T00:00:00.000Z&#34;,&#34;2015-11-03T00:00:00.000Z&#34;,&#34;2015-11-04T00:00:00.000Z&#34;,&#34;2015-11-05T00:00:00.000Z&#34;,&#34;2015-11-06T00:00:00.000Z&#34;,&#34;2015-11-07T00:00:00.000Z&#34;,&#34;2015-11-08T00:00:00.000Z&#34;,&#34;2015-11-09T00:00:00.000Z&#34;,&#34;2015-11-10T00:00:00.000Z&#34;,&#34;2015-11-11T00:00:00.000Z&#34;,&#34;2015-11-12T00:00:00.000Z&#34;,&#34;2015-11-13T00:00:00.000Z&#34;,&#34;2015-11-14T00:00:00.000Z&#34;,&#34;2015-11-15T00:00:00.000Z&#34;,&#34;2015-11-16T00:00:00.000Z&#34;,&#34;2015-11-20T00:00:00.000Z&#34;,&#34;2015-11-21T00:00:00.000Z&#34;,&#34;2015-11-22T00:00:00.000Z&#34;,&#34;2015-11-23T00:00:00.000Z&#34;,&#34;2015-11-24T00:00:00.000Z&#34;,&#34;2015-11-25T00:00:00.000Z&#34;,&#34;2015-11-26T00:00:00.000Z&#34;,&#34;2015-11-27T00:00:00.000Z&#34;,&#34;2015-11-28T00:00:00.000Z&#34;,&#34;2015-11-29T00:00:00.000Z&#34;,&#34;2015-11-30T00:00:00.000Z&#34;,&#34;2015-12-01T00:00:00.000Z&#34;,&#34;2015-12-02T00:00:00.000Z&#34;,&#34;2015-12-03T00:00:00.000Z&#34;,&#34;2015-12-04T00:00:00.000Z&#34;,&#34;2015-12-05T00:00:00.000Z&#34;,&#34;2015-12-06T00:00:00.000Z&#34;,&#34;2015-12-07T00:00:00.000Z&#34;,&#34;2015-12-08T00:00:00.000Z&#34;,&#34;2015-12-09T00:00:00.000Z&#34;,&#34;2015-12-10T00:00:00.000Z&#34;,&#34;2015-12-11T00:00:00.000Z&#34;,&#34;2015-12-12T00:00:00.000Z&#34;,&#34;2015-12-13T00:00:00.000Z&#34;,&#34;2015-12-14T00:00:00.000Z&#34;,&#34;2015-12-15T00:00:00.000Z&#34;,&#34;2015-12-16T00:00:00.000Z&#34;,&#34;2015-12-17T00:00:00.000Z&#34;,&#34;2015-12-18T00:00:00.000Z&#34;,&#34;2015-12-19T00:00:00.000Z&#34;,&#34;2015-12-20T00:00:00.000Z&#34;,&#34;2015-12-21T00:00:00.000Z&#34;,&#34;2015-12-22T00:00:00.000Z&#34;,&#34;2015-12-23T00:00:00.000Z&#34;,&#34;2015-12-24T00:00:00.000Z&#34;,&#34;2015-12-25T00:00:00.000Z&#34;,&#34;2015-12-26T00:00:00.000Z&#34;,&#34;2015-12-27T00:00:00.000Z&#34;,&#34;2015-12-28T00:00:00.000Z&#34;,&#34;2015-12-29T00:00:00.000Z&#34;,&#34;2016-01-05T00:00:00.000Z&#34;,&#34;2016-01-06T00:00:00.000Z&#34;,&#34;2016-01-07T00:00:00.000Z&#34;,&#34;2016-01-12T00:00:00.000Z&#34;,&#34;2016-01-13T00:00:00.000Z&#34;,&#34;2016-01-14T00:00:00.000Z&#34;,&#34;2016-01-15T00:00:00.000Z&#34;,&#34;2016-01-16T00:00:00.000Z&#34;,&#34;2016-01-17T00:00:00.000Z&#34;,&#34;2016-01-25T00:00:00.000Z&#34;,&#34;2016-01-26T00:00:00.000Z&#34;,&#34;2016-01-27T00:00:00.000Z&#34;,&#34;2016-01-28T00:00:00.000Z&#34;,&#34;2016-01-30T00:00:00.000Z&#34;,&#34;2016-01-31T00:00:00.000Z&#34;,&#34;2016-02-01T00:00:00.000Z&#34;,&#34;2016-02-02T00:00:00.000Z&#34;,&#34;2016-02-03T00:00:00.000Z&#34;,&#34;2016-02-04T00:00:00.000Z&#34;,&#34;2016-02-05T00:00:00.000Z&#34;,&#34;2016-02-06T00:00:00.000Z&#34;,&#34;2016-02-07T00:00:00.000Z&#34;,&#34;2016-02-08T00:00:00.000Z&#34;,&#34;2016-02-09T00:00:00.000Z&#34;,&#34;2016-02-10T00:00:00.000Z&#34;,&#34;2016-02-11T00:00:00.000Z&#34;,&#34;2016-02-12T00:00:00.000Z&#34;,&#34;2016-02-13T00:00:00.000Z&#34;,&#34;2016-02-14T00:00:00.000Z&#34;,&#34;2016-02-15T00:00:00.000Z&#34;,&#34;2016-02-16T00:00:00.000Z&#34;,&#34;2016-02-17T00:00:00.000Z&#34;,&#34;2016-02-18T00:00:00.000Z&#34;,&#34;2016-02-19T00:00:00.000Z&#34;,&#34;2016-02-20T00:00:00.000Z&#34;,&#34;2016-02-21T00:00:00.000Z&#34;,&#34;2016-02-22T00:00:00.000Z&#34;,&#34;2016-02-23T00:00:00.000Z&#34;,&#34;2016-02-24T00:00:00.000Z&#34;,&#34;2016-02-25T00:00:00.000Z&#34;,&#34;2016-02-26T00:00:00.000Z&#34;,&#34;2016-02-27T00:00:00.000Z&#34;,&#34;2016-02-28T00:00:00.000Z&#34;,&#34;2016-02-29T00:00:00.000Z&#34;,&#34;2016-03-01T00:00:00.000Z&#34;,&#34;2016-03-02T00:00:00.000Z&#34;,&#34;2016-03-03T00:00:00.000Z&#34;,&#34;2016-03-04T00:00:00.000Z&#34;,&#34;2016-03-05T00:00:00.000Z&#34;,&#34;2016-03-06T00:00:00.000Z&#34;,&#34;2016-03-07T00:00:00.000Z&#34;,&#34;2016-03-08T00:00:00.000Z&#34;,&#34;2016-03-09T00:00:00.000Z&#34;,&#34;2016-03-10T00:00:00.000Z&#34;,&#34;2016-03-11T00:00:00.000Z&#34;,&#34;2016-03-12T00:00:00.000Z&#34;,&#34;2016-03-13T00:00:00.000Z&#34;,&#34;2016-03-14T00:00:00.000Z&#34;,&#34;2016-03-15T00:00:00.000Z&#34;,&#34;2016-03-16T00:00:00.000Z&#34;,&#34;2016-03-17T00:00:00.000Z&#34;,&#34;2016-03-18T00:00:00.000Z&#34;,&#34;2016-03-19T00:00:00.000Z&#34;,&#34;2016-03-20T00:00:00.000Z&#34;,&#34;2016-03-21T00:00:00.000Z&#34;,&#34;2016-03-22T00:00:00.000Z&#34;,&#34;2016-03-23T00:00:00.000Z&#34;,&#34;2016-03-24T00:00:00.000Z&#34;,&#34;2016-03-25T00:00:00.000Z&#34;,&#34;2016-03-26T00:00:00.000Z&#34;,&#34;2016-03-27T00:00:00.000Z&#34;,&#34;2016-03-28T00:00:00.000Z&#34;,&#34;2016-03-29T00:00:00.000Z&#34;,&#34;2016-03-30T00:00:00.000Z&#34;,&#34;2016-03-31T00:00:00.000Z&#34;,&#34;2016-04-01T00:00:00.000Z&#34;,&#34;2016-04-02T00:00:00.000Z&#34;,&#34;2016-04-03T00:00:00.000Z&#34;,&#34;2016-04-04T00:00:00.000Z&#34;,&#34;2016-04-05T00:00:00.000Z&#34;,&#34;2016-04-06T00:00:00.000Z&#34;,&#34;2016-04-07T00:00:00.000Z&#34;,&#34;2016-04-08T00:00:00.000Z&#34;,&#34;2016-04-09T00:00:00.000Z&#34;,&#34;2016-04-10T00:00:00.000Z&#34;,&#34;2016-04-11T00:00:00.000Z&#34;,&#34;2016-04-12T00:00:00.000Z&#34;,&#34;2016-04-13T00:00:00.000Z&#34;,&#34;2016-04-14T00:00:00.000Z&#34;,&#34;2016-04-15T00:00:00.000Z&#34;,&#34;2016-04-16T00:00:00.000Z&#34;,&#34;2016-04-17T00:00:00.000Z&#34;,&#34;2016-04-18T00:00:00.000Z&#34;,&#34;2016-04-19T00:00:00.000Z&#34;,&#34;2016-04-20T00:00:00.000Z&#34;,&#34;2016-04-21T00:00:00.000Z&#34;,&#34;2016-04-22T00:00:00.000Z&#34;,&#34;2016-04-23T00:00:00.000Z&#34;,&#34;2016-04-24T00:00:00.000Z&#34;,&#34;2016-04-25T00:00:00.000Z&#34;,&#34;2016-04-26T00:00:00.000Z&#34;,&#34;2016-04-27T00:00:00.000Z&#34;,&#34;2016-04-28T00:00:00.000Z&#34;,&#34;2016-04-29T00:00:00.000Z&#34;,&#34;2016-04-30T00:00:00.000Z&#34;,&#34;2016-05-01T00:00:00.000Z&#34;,&#34;2016-05-02T00:00:00.000Z&#34;,&#34;2016-05-03T00:00:00.000Z&#34;,&#34;2016-05-04T00:00:00.000Z&#34;,&#34;2016-05-05T00:00:00.000Z&#34;,&#34;2016-05-06T00:00:00.000Z&#34;,&#34;2016-05-07T00:00:00.000Z&#34;,&#34;2016-05-08T00:00:00.000Z&#34;,&#34;2016-05-09T00:00:00.000Z&#34;,&#34;2016-05-10T00:00:00.000Z&#34;,&#34;2016-05-11T00:00:00.000Z&#34;,&#34;2016-05-12T00:00:00.000Z&#34;,&#34;2016-05-13T00:00:00.000Z&#34;,&#34;2016-05-14T00:00:00.000Z&#34;,&#34;2016-05-15T00:00:00.000Z&#34;,&#34;2016-05-16T00:00:00.000Z&#34;,&#34;2016-05-17T00:00:00.000Z&#34;,&#34;2016-05-18T00:00:00.000Z&#34;,&#34;2016-05-19T00:00:00.000Z&#34;,&#34;2016-05-20T00:00:00.000Z&#34;,&#34;2016-05-21T00:00:00.000Z&#34;,&#34;2016-05-22T00:00:00.000Z&#34;,&#34;2016-05-23T00:00:00.000Z&#34;,&#34;2016-05-24T00:00:00.000Z&#34;,&#34;2016-05-25T00:00:00.000Z&#34;,&#34;2016-05-26T00:00:00.000Z&#34;,&#34;2016-05-27T00:00:00.000Z&#34;,&#34;2016-05-28T00:00:00.000Z&#34;,&#34;2016-05-29T00:00:00.000Z&#34;,&#34;2016-05-30T00:00:00.000Z&#34;,&#34;2016-05-31T00:00:00.000Z&#34;,&#34;2016-06-01T00:00:00.000Z&#34;,&#34;2016-06-02T00:00:00.000Z&#34;,&#34;2016-06-03T00:00:00.000Z&#34;,&#34;2016-06-04T00:00:00.000Z&#34;,&#34;2016-06-05T00:00:00.000Z&#34;,&#34;2016-06-06T00:00:00.000Z&#34;,&#34;2016-06-07T00:00:00.000Z&#34;,&#34;2016-06-08T00:00:00.000Z&#34;,&#34;2016-06-09T00:00:00.000Z&#34;,&#34;2016-06-10T00:00:00.000Z&#34;,&#34;2016-06-11T00:00:00.000Z&#34;,&#34;2016-06-12T00:00:00.000Z&#34;,&#34;2016-06-13T00:00:00.000Z&#34;,&#34;2016-06-14T00:00:00.000Z&#34;,&#34;2016-06-15T00:00:00.000Z&#34;,&#34;2016-06-16T00:00:00.000Z&#34;,&#34;2016-06-17T00:00:00.000Z&#34;,&#34;2016-06-18T00:00:00.000Z&#34;,&#34;2016-06-19T00:00:00.000Z&#34;,&#34;2016-06-20T00:00:00.000Z&#34;,&#34;2016-06-21T00:00:00.000Z&#34;,&#34;2016-06-22T00:00:00.000Z&#34;,&#34;2016-06-23T00:00:00.000Z&#34;,&#34;2016-06-24T00:00:00.000Z&#34;,&#34;2016-06-25T00:00:00.000Z&#34;,&#34;2016-06-26T00:00:00.000Z&#34;,&#34;2016-06-27T00:00:00.000Z&#34;,&#34;2016-06-28T00:00:00.000Z&#34;,&#34;2016-06-29T00:00:00.000Z&#34;,&#34;2016-06-30T00:00:00.000Z&#34;,&#34;2016-07-01T00:00:00.000Z&#34;,&#34;2016-07-02T00:00:00.000Z&#34;,&#34;2016-07-03T00:00:00.000Z&#34;,&#34;2016-07-04T00:00:00.000Z&#34;,&#34;2016-07-05T00:00:00.000Z&#34;,&#34;2016-07-06T00:00:00.000Z&#34;,&#34;2016-07-07T00:00:00.000Z&#34;,&#34;2016-07-08T00:00:00.000Z&#34;,&#34;2016-07-09T00:00:00.000Z&#34;,&#34;2016-07-10T00:00:00.000Z&#34;,&#34;2016-07-11T00:00:00.000Z&#34;,&#34;2016-07-12T00:00:00.000Z&#34;,&#34;2016-07-13T00:00:00.000Z&#34;,&#34;2016-07-14T00:00:00.000Z&#34;,&#34;2016-07-15T00:00:00.000Z&#34;,&#34;2016-07-16T00:00:00.000Z&#34;,&#34;2016-07-17T00:00:00.000Z&#34;,&#34;2016-07-18T00:00:00.000Z&#34;,&#34;2016-07-19T00:00:00.000Z&#34;,&#34;2016-07-20T00:00:00.000Z&#34;,&#34;2016-07-21T00:00:00.000Z&#34;,&#34;2016-07-22T00:00:00.000Z&#34;,&#34;2016-07-23T00:00:00.000Z&#34;,&#34;2016-07-24T00:00:00.000Z&#34;,&#34;2016-07-25T00:00:00.000Z&#34;,&#34;2016-07-26T00:00:00.000Z&#34;,&#34;2016-07-27T00:00:00.000Z&#34;,&#34;2016-07-28T00:00:00.000Z&#34;,&#34;2016-07-29T00:00:00.000Z&#34;,&#34;2016-07-30T00:00:00.000Z&#34;,&#34;2016-07-31T00:00:00.000Z&#34;,&#34;2016-08-01T00:00:00.000Z&#34;,&#34;2016-08-02T00:00:00.000Z&#34;,&#34;2016-08-03T00:00:00.000Z&#34;,&#34;2016-08-04T00:00:00.000Z&#34;,&#34;2016-08-05T00:00:00.000Z&#34;,&#34;2016-08-06T00:00:00.000Z&#34;,&#34;2016-08-07T00:00:00.000Z&#34;,&#34;2016-08-08T00:00:00.000Z&#34;,&#34;2016-08-09T00:00:00.000Z&#34;,&#34;2016-08-10T00:00:00.000Z&#34;,&#34;2016-08-11T00:00:00.000Z&#34;,&#34;2016-08-12T00:00:00.000Z&#34;,&#34;2016-08-13T00:00:00.000Z&#34;,&#34;2016-08-14T00:00:00.000Z&#34;,&#34;2016-08-15T00:00:00.000Z&#34;,&#34;2016-08-16T00:00:00.000Z&#34;,&#34;2016-08-17T00:00:00.000Z&#34;,&#34;2016-08-18T00:00:00.000Z&#34;,&#34;2016-08-19T00:00:00.000Z&#34;,&#34;2016-08-20T00:00:00.000Z&#34;,&#34;2016-08-21T00:00:00.000Z&#34;,&#34;2016-08-22T00:00:00.000Z&#34;,&#34;2016-08-23T00:00:00.000Z&#34;,&#34;2016-08-24T00:00:00.000Z&#34;,&#34;2016-08-25T00:00:00.000Z&#34;,&#34;2016-08-26T00:00:00.000Z&#34;,&#34;2016-08-27T00:00:00.000Z&#34;,&#34;2016-08-28T00:00:00.000Z&#34;,&#34;2016-08-29T00:00:00.000Z&#34;,&#34;2016-08-30T00:00:00.000Z&#34;,&#34;2016-08-31T00:00:00.000Z&#34;,&#34;2016-09-01T00:00:00.000Z&#34;,&#34;2016-09-02T00:00:00.000Z&#34;,&#34;2016-09-03T00:00:00.000Z&#34;,&#34;2016-09-04T00:00:00.000Z&#34;,&#34;2016-09-05T00:00:00.000Z&#34;,&#34;2016-09-06T00:00:00.000Z&#34;,&#34;2016-09-07T00:00:00.000Z&#34;,&#34;2016-09-08T00:00:00.000Z&#34;,&#34;2016-09-09T00:00:00.000Z&#34;,&#34;2016-09-10T00:00:00.000Z&#34;,&#34;2016-09-11T00:00:00.000Z&#34;,&#34;2016-09-12T00:00:00.000Z&#34;,&#34;2016-09-13T00:00:00.000Z&#34;,&#34;2016-09-14T00:00:00.000Z&#34;,&#34;2016-09-15T00:00:00.000Z&#34;,&#34;2016-09-16T00:00:00.000Z&#34;,&#34;2016-09-17T00:00:00.000Z&#34;,&#34;2016-09-18T00:00:00.000Z&#34;,&#34;2016-09-19T00:00:00.000Z&#34;,&#34;2016-09-20T00:00:00.000Z&#34;,&#34;2016-09-21T00:00:00.000Z&#34;,&#34;2016-09-22T00:00:00.000Z&#34;,&#34;2016-09-23T00:00:00.000Z&#34;,&#34;2016-09-24T00:00:00.000Z&#34;,&#34;2016-09-25T00:00:00.000Z&#34;,&#34;2016-09-26T00:00:00.000Z&#34;,&#34;2016-09-27T00:00:00.000Z&#34;,&#34;2016-09-28T00:00:00.000Z&#34;,&#34;2016-09-29T00:00:00.000Z&#34;,&#34;2016-09-30T00:00:00.000Z&#34;,&#34;2016-10-01T00:00:00.000Z&#34;,&#34;2016-10-02T00:00:00.000Z&#34;,&#34;2016-10-03T00:00:00.000Z&#34;,&#34;2016-10-04T00:00:00.000Z&#34;,&#34;2016-10-05T00:00:00.000Z&#34;,&#34;2016-10-06T00:00:00.000Z&#34;,&#34;2016-10-07T00:00:00.000Z&#34;,&#34;2016-10-08T00:00:00.000Z&#34;,&#34;2016-10-09T00:00:00.000Z&#34;,&#34;2016-10-10T00:00:00.000Z&#34;,&#34;2016-10-11T00:00:00.000Z&#34;,&#34;2016-10-12T00:00:00.000Z&#34;,&#34;2016-10-13T00:00:00.000Z&#34;,&#34;2016-10-14T00:00:00.000Z&#34;,&#34;2016-10-15T00:00:00.000Z&#34;,&#34;2016-10-16T00:00:00.000Z&#34;,&#34;2016-10-17T00:00:00.000Z&#34;,&#34;2016-10-18T00:00:00.000Z&#34;,&#34;2016-10-19T00:00:00.000Z&#34;,&#34;2016-10-20T00:00:00.000Z&#34;,&#34;2016-10-21T00:00:00.000Z&#34;,&#34;2016-10-22T00:00:00.000Z&#34;,&#34;2016-10-23T00:00:00.000Z&#34;,&#34;2016-10-24T00:00:00.000Z&#34;,&#34;2016-10-25T00:00:00.000Z&#34;,&#34;2016-10-26T00:00:00.000Z&#34;,&#34;2016-10-27T00:00:00.000Z&#34;,&#34;2016-10-28T00:00:00.000Z&#34;,&#34;2016-10-29T00:00:00.000Z&#34;,&#34;2016-10-30T00:00:00.000Z&#34;,&#34;2016-10-31T00:00:00.000Z&#34;,&#34;2016-11-01T00:00:00.000Z&#34;,&#34;2016-11-02T00:00:00.000Z&#34;,&#34;2016-11-03T00:00:00.000Z&#34;,&#34;2016-11-04T00:00:00.000Z&#34;,&#34;2016-11-05T00:00:00.000Z&#34;,&#34;2016-11-06T00:00:00.000Z&#34;,&#34;2016-11-07T00:00:00.000Z&#34;,&#34;2016-11-08T00:00:00.000Z&#34;,&#34;2016-11-09T00:00:00.000Z&#34;,&#34;2016-11-10T00:00:00.000Z&#34;,&#34;2016-11-11T00:00:00.000Z&#34;,&#34;2016-11-12T00:00:00.000Z&#34;,&#34;2016-11-13T00:00:00.000Z&#34;,&#34;2016-11-14T00:00:00.000Z&#34;,&#34;2016-11-15T00:00:00.000Z&#34;,&#34;2016-11-16T00:00:00.000Z&#34;,&#34;2016-11-17T00:00:00.000Z&#34;,&#34;2016-11-18T00:00:00.000Z&#34;,&#34;2016-11-19T00:00:00.000Z&#34;,&#34;2016-11-20T00:00:00.000Z&#34;,&#34;2016-11-21T00:00:00.000Z&#34;,&#34;2016-11-22T00:00:00.000Z&#34;,&#34;2016-11-23T00:00:00.000Z&#34;,&#34;2016-11-24T00:00:00.000Z&#34;,&#34;2016-11-25T00:00:00.000Z&#34;,&#34;2016-11-26T00:00:00.000Z&#34;,&#34;2016-11-27T00:00:00.000Z&#34;,&#34;2016-11-28T00:00:00.000Z&#34;,&#34;2016-11-29T00:00:00.000Z&#34;,&#34;2016-11-30T00:00:00.000Z&#34;,&#34;2016-12-01T00:00:00.000Z&#34;,&#34;2016-12-02T00:00:00.000Z&#34;,&#34;2016-12-03T00:00:00.000Z&#34;,&#34;2016-12-04T00:00:00.000Z&#34;,&#34;2016-12-05T00:00:00.000Z&#34;,&#34;2016-12-06T00:00:00.000Z&#34;,&#34;2016-12-07T00:00:00.000Z&#34;,&#34;2016-12-08T00:00:00.000Z&#34;,&#34;2016-12-09T00:00:00.000Z&#34;,&#34;2016-12-10T00:00:00.000Z&#34;,&#34;2016-12-11T00:00:00.000Z&#34;,&#34;2016-12-12T00:00:00.000Z&#34;,&#34;2016-12-13T00:00:00.000Z&#34;,&#34;2016-12-14T00:00:00.000Z&#34;,&#34;2016-12-15T00:00:00.000Z&#34;,&#34;2016-12-16T00:00:00.000Z&#34;,&#34;2016-12-17T00:00:00.000Z&#34;,&#34;2016-12-18T00:00:00.000Z&#34;,&#34;2016-12-19T00:00:00.000Z&#34;,&#34;2016-12-20T00:00:00.000Z&#34;,&#34;2016-12-21T00:00:00.000Z&#34;,&#34;2016-12-22T00:00:00.000Z&#34;,&#34;2016-12-23T00:00:00.000Z&#34;,&#34;2016-12-24T00:00:00.000Z&#34;,&#34;2016-12-25T00:00:00.000Z&#34;,&#34;2016-12-26T00:00:00.000Z&#34;,&#34;2016-12-27T00:00:00.000Z&#34;,&#34;2016-12-28T00:00:00.000Z&#34;,&#34;2016-12-29T00:00:00.000Z&#34;,&#34;2016-12-30T00:00:00.000Z&#34;,&#34;2016-12-31T00:00:00.000Z&#34;],[45.65,198.78,36.82,224.605,140.265,249.735,128.142105263158,19.415,40.005,132.63,191.195,31.665,160.35,165.855,212.915,435.735,187.655,121.075,177.945,11.115,22.98,101.246153846154,129.08,35.6352941176471,5.4,17.815,88.8,111.315,84.4,10.8785714285714,6.6,19.315,113.72,127.36,211.785,239.815,273.285,226.705,39.61,75.76,64.07,257.805263157895,328.685,95.57,34.745,61.685,87.805,204.133333333333,14.78,165.275,107.105,204.38,347.02,51.435,24.965,16.835,66.54,163.87,96.055,58.59,46.7181818181818,20.125,114.6,92.7333333333333,84.32,19.24,13.0222222222222,14.915,34.995,71.68,135.6,72.505,30.605,31.28,60.175,103.522222222222,194.04,46.31875,18.86,106.49375,142.172222222222,38.22,37.9888888888889,23.1947368421053,22.53,74.795,83.075,65.05,11.8,25.48125,34.89,48.5,54.36,72.625,21.96,77.4090909090909,55.11875,46.525,67.3538461538461,58.6375,10.89,27.9571428571429,48.405,120.84375,21.375,18.42,36.3705882352941,45.62,68.925,92.4588235294118,61.9375,45.45625,86.8714285714286,41.4,54.4363636363636,19.83125,16.585,42.84,144.75,64.465,10.095,12.75,33.735,46.205,98.5333333333333,76.0875,122.593333333333,94.4888888888889,88.2,132.28,137.88,11.205,14.005,15.775,6.59,5.365,8.68,11.285,26.3076923076923,115.611111111111,126.845,79.51875,37.8,61.93,8.23,13.075,34.87,81.3588235294118,70.435,64.99,92.955,94.47,57.1,118.426666666667,118.005882352941,92.9875,81.3058823529412,39.7235294117647,7.68571428571429,14.5058823529412,23.325,16.5666666666667,17.015,23.94,23.53,52.6736842105263,61.255,157.784210526316,77.0736842105263,21.1277777777778,28.7666666666667,65.825,21.465,61.1571428571429,14.28,41.28,75.12,43.4416666666667,114.42,108.557142857143,14.6941176470588,46.0777777777778,102.855555555556,400.125,67.85,12.7,48.6294117647059,123.89375,225.373684210526,318.088888888889,167.668421052632,36.16,83.9777777777778,8.76923076923077,33.015,84.7,96.6615384615385,72.35,97.955,8.765,9.99,43.65,56.92,145.375,14.595,51.945,105.41,269.188888888889,295.2,42.4894736842105,64.29,103.822222222222,105.446153846154,13.465,13.755,94.35,88.615,26.755,195.69,381.184210526316,20.82,16.48,7.495,83.025,106.29,5.805,9.7,116.075,132.065,11.945,8.12,29.42,83.595,26.65,19.935,53.285,127.175,197.94,112.45,37.7,177.976923076923,163.78,62.2888888888889,135.964285714286,12.09,22.095,74.31,22.575,17.43,41.84,73.775,102.36,26.42,7.82,28.8,31.21,9.15,45.655,84.995,55.675,6.84,34.355,79.08,128.165,127.38,11.475,13.265,76.055,183.078571428571,67.1294117647059,16.85,96.04,192.69,13.8,11.265,27.4368421052632,77.6444444444444,27.345,8.46,13.1,37.68,68.56,145.565,133.97,13.63,16.56,49.95,34.865,59.98,31.735,87.355,64.53,186.738888888889,58.525,79.41,59.32,20.67,18.51,47.47,50.72,134.225,148.305,90.44,124.665,27.115,63.64,169.2,116.747368421053,31.3230769230769,19.0166666666667,45.59,86.635,11.505,15.94,30.135,102.95,141.942105263158,86.0411764705882,61.8588235294118,8.28,42.6588235294118,52.72,97.555,28.385,86.01,109.2,57.21875,79.585,32.935,35.645,38.175,41.105,65.885,70.265,56.32,39.2411764705882,117.742105263158,100.875,141.775,157.752941176471,43.51,102.24,55.43,61.615,63.145,144.385,124.515,136.5,18.1888888888889,37.4,43.075,17.155,44.145,74.665,236.8125,18.01,25.785,37.85,53.365,84.615,119.625,101.925,72.115,79.44,135.82,135.511111111111,66.7461538461538,60.645,79.09,27.92,36.295,66.94375,45.245,24.105,23.06,19.88,41.325,68.9941176470588,14.445,19.2,22.0823529411765,45.525,89.275,71.385,33.9578947368421,17.7529411764706,25.6083333333333,17.52,29.59,98.92,105.12,69.875,80.4363636363636,78.35,95.99,120.715,107.357142857143,15.125,11.9833333333333,16.23,13.39,27.9,69.175,67.97,71.695,80.855,29.59,39.13,81.78,54.34,29.5176470588235,29.985,29.7230769230769,11.6857142857143,35.24,36.31875,70.7,84.5952380952381,117.0375,51.4821428571429,33.50625,43.9090909090909,82.2294117647059,53.65,70.35,43.1117647058824,51.1647058823529,40.875,18.4666666666667,62.7222222222222,71.0833333333333,21,17.0588235294118,71.9473684210526,54.1052631578947,86.9473684210526,42.5263157894737,72.5,46.5,88,84.3684210526316,109,58,23.3157894736842,36.8421052631579,72.6842105263158,46.462962962963,58.8868421052632,30.9205128205128,14.4333333333333,19.1941176470588,14.2617647058824,15.6538461538462,15.4666666666667,11.7607142857143,12.90625,21.4236842105263,34.8769230769231,32.1730769230769,32.6103448275862,9.2375,10.2382352941176,17.3764705882353,54.7434782608696,20.2380952380952,15.109375,23.8323529411765,57.5975,28.1263157894737,8.57894736842105,13.8342857142857,9.33428571428571,16.4411764705882,59.2193548387097,106.245161290323,131.284848484848,154.748,49.3484848484849,18.51,81.5793103448276,86.7736842105263,146.714814814815,21.2814814814815,118.344827586207,17.9909090909091,35.1722222222222,44.2333333333333,47.265,47.5,22.3666666666667,16.8125,14.571875,19.315625,97.8307692307692,168.95,215.9,114.985,10.625,11.19,10.785,34.63,34.2421052631579,64.59,183.57,123.466666666667,173,58,50.6,28.8,47.3157894736842,52.1,30,30.05,13.75,7.65,8.85,20.9,43.1,70.9444444444444,85.95,165.4,207.6,109.05,17.1,15,50.65,143.85,135.368421052632,117.9,162,204.388888888889,253.85,219.85,55.1764705882353,81.8571428571429,44.9,48.3888888888889,26.35,27.65,52.25,23.2,237.947368421053,300.4,252.9,406.473684210526,479.5,7,8.8421052631579,17.6,39.4117647058824,153.684210526316,182.555555555556,272.411764705882,268.5,90.7368421052632,37.5,138,332.5,139.4375,6.2,7.05,62.3529411764706,70.2,155.333333333333,223.157894736842,233.55,340.7,262.473684210526,60.65,540.7,271.5,52.8947368421053,101.894736842105,306.842105263158,27,21.1,10,14,17.9,66.2,136.375,136,136.666666666667,20.1176470588235,23,54,null,null,12.1111111111111,12.9,24.1,36.2222222222222,14.8823529411765,10.5,20.8888888888889,45.25,128.166666666667,44.0526315789474,104.95,160.5,153.6,12.2,7.68421052631579,9.1,10.1,43.5,13.5789473684211,15.25,11.7368421052632,88.25,73.1,12.5,24,20.2222222222222,32.3,20.5,33.05,32.3,119.9,179.1,300.8,331,59.6,84.3,33.7894736842105,11.15,10,10.8,19,104.85,17,78.4,132.1,233,242.631578947368,210.529411764706,66.2777777777778,61.1,125.578947368421,107.5,19.7368421052632,12,19.5,10.25,9.55,78.95,16.75,20.85,141.4,37.35,6.45,12.75,64.75,113.3,124,95.9,23,72.85,60.1,57.8947368421053,67.6,127.45,31.85,74.9473684210526,23.35,12.75,14.3,64.4736842105263,60.55,99.4,28.1,27.55,73.1,77.3,73.85,85.55,80.65,104.7,144.7,162.65,57.95,29.85,24.15,45.2,43.75,15.3529411764706,66.7,36.5,42.85,121.7,21.65,38.4210526315789,40.25,38,25.75,59.4,61,77.45,85.5263157894737,72.4736842105263,52.85,69.8823529411765,26.4736842105263,19.6,35.5,57.65,44.75,44.4,84.8,68.65,51.75,58.8,83.5789473684211,80.15,66.3,88.1,56.7,115.578947368421,102.631578947368,46.3888888888889,12.7333333333333,69.15,45.95,38.3333333333333,15.15,26,27,41.55,63.25,79.2631578947368,78.9473684210526,39.8421052631579,60.85,12.35,14.2352941176471,36.3684210526316,50.0909090909091,86.3076923076923,102.4,50.25,10.55,39.15,67,119.2,80.3,55.55,89.95,71.7368421052632,63.9,63.95,70.75,26.45,17.2105263157895,31.8,33.6,35.85,68,87.35,103.666666666667,45,24.1176470588235,69.7692307692308,95.5454545454545,52.1,34.35,11.8235294117647,43.3125,37.5789473684211,93.9,133.4,50.8947368421053,54.7,41.7222222222222,47.55,79.55,50.2105263157895,81.55,17.3684210526316,29.35,40.1,67,62.7777777777778,44.05,19.1578947368421,15.35,18.95,21.15,58.55,75.7,17.4285714285714,42.625,44.2727272727273,29.5555555555556,51.1052631578947,64.85,6.8,7.38888888888889,11.2777777777778,8.85,13.3,26.5555555555556,15.0526315789474,5.38888888888889,10.4,17.15,64.6,23.1,20.85,39.45,18.5,14.5263157894737,11.1,27.5,29.0526315789474,80.35,91.7368421052632,79.2857142857143,131.1,37.7,15.9,8.65,17.1052631578947,66.4,95,121.15,103.3,160.842105263158,58.15,21.55,11.3,52.6,90.4,147.85,167,100.7,29.2,59.1052631578947,68.75,43.35,10.4,33.85,88.4,119.2,76.6,154.6,236.9,194.529411764706,114.055555555556,68.5789473684211,109.368421052632,202.3125,75.9473684210526,46.1,12.75,25.5882352941176,70.6,107.4,39.55,32.5,10.45,24.8,53.7,9.21052631578947,42.55,116.45,197.578947368421,246,176.55,63.35,39.45,37.8,176.388888888889,146.368421052632,80.1,70.2631578947368,93.4210526315789,38.8333333333333,41.6,105.9,115.05,193.7,121.5,54.5,11.1,8.5,12.9,70.1,164.5,287.947368421053,90.8421052631579,72.65,97.2,83.9473684210526,21.75,98.5,232.3,282.052631578947,34.05,87.4705882352941,133.625,95.25,20.5263157894737,46.5555555555556,212.842105263158,222.578947368421,38,61.6666666666667,82.25,206.75,223.9,233.894736842105,220.75,365.052631578947,375.5,68.2,26.45,136.4,161.8125,56.3,27.95,72.8,37.9,268.4,348.6],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,48.6842105263158,30.35,39.9,32.3,18,15.3684210526316,26.8947368421053,43.9473684210526,40.75,47.5789473684211,101.961538461538,45.8,35.5625,32.1,45.8947368421053,60.2333333333333,53.7777777777778,47.6,60,28.7368421052632,32.1052631578947,42.8947368421053,34.4,36.8947368421053,45.3333333333333,75.1,27.25,54.5263157894737,69.2631578947368,22.6315789473684,23,null,null,null,null,null,null,null,null,null,null,null,137,114.45,70.75,59.2,70.7894736842105,54.7,41.1,31.05,49.1,38.3,33.3157894736842,22.5,41.4736842105263,62.95,93.2,90.5789473684211,82.8,87.75,26.8,32.1,80.25,48.4210526315789,29.8,26.7368421052632,38.5789473684211,62.45,44.3,57.2777777777778,107.785714285714,82.8,65.2105263157895,59.1,22.8421052631579,34.6315789473684,67.7,63.25,56.8,75.5789473684211,65.2222222222222,94.2105263157895,80,67.3157894736842,46.2631578947368,50.6111111111111,64.55,101.157894736842,89.6842105263158,90.9473684210526,113.473684210526,101.3,38.8888888888889,34.75,44.5666666666667,40.75,54.6,76.1578947368421,70.3,82.25,70.46875,106.392857142857,110.85,91.875,104.05,103.4,120.1,177.222222222222,182.631578947368,255.947368421053,174.333333333333,173,82.375,42,55.2,78.4,84.8571428571429,58.125,83.5833333333333,59,56.5,74,114,null,91.875,96.4,104.052631578947,92.1578947368421,89.5882352941177,92.4,108.3,91.5,144.95,132.157894736842,113.3,112.615384615385,73.35,30.8947368421053,39.1,47.1,60.2,66.2777777777778,76.5789473684211,91.5789473684211,72.05,85.2,43.0526315789474,49.1,50.15,74,68.6,72.75,112.5,127.555555555556,129.5,82.2631578947368,94.3157894736842,129.842105263158,118.75,101.4,69.4,66.1,32.15,50.2727272727273,79.05,57.1,76.7777777777778,79.8,97.6315789473684,113.65,103.35,107.6,149.65,118.9,60.45,35.1,40.1578947368421,59.95,85.1666666666667,80.75,68.7,92.4,133.55,61.8,56.95,95.85,157.75,133.2,119.5,62.4,34.6,55.9,58.0526315789474,32.2,62.1,84.35,96.95,77.6315789473684,28.25,43.1666666666667,33.05,39,44.65,91.1052631578947,46.1,44.1,83.1578947368421,49.35,65.95,90.95,103.7,84.15,44.6,56.5,68.6,83.45,85.8,45.8,69,134.95,42.2,26.1764705882353,39.1,47.9,58.55,72.75,76.05,61.85,29.85,32.3684210526316,53.45,54.5,84.85,87.35,54.75,47.4,30.3,33.05,53.45,null,42.7272727272727,60.55,107.75,69.85,72.4,87,78.55,32.65,30.8,54.0555555555556,49.45,60.65,35.3,40.1052631578947,30.75,51.25,37.8,45.5,44.65,70.5,46.1052631578947,40.2,40,72.45,52.25,74.2105263157895,65.4,118.8,69.8,30.35,33.2222222222222,38.4,68.95,67.25,52.55,72.35,68.95,72.15,37.9,43.35,52.8,35.9,42.9,50.6,42.4444444444444,59.85,37.65,39.5,28.25,18.85,28.25,47.7,56.5,51.85,24.9,36.3,41.5263157894737,28.35,35.35,60.95,45.05,24.5263157894737,17.35,26.65,30.25,37,38.95,58.45,61.4210526315789,42.65,38.5,35.2352941176471,38.15,29.55,44.85,43.05,39.05,56.55,54.5,65.2,46.2,26.65,41.2,44.9,56.7,52.5294117647059,58.1428571428571,64.21875,45.0833333333333,54.85,55.5,52.25,18.8947368421053,23.6666666666667,40.4,40.3,42.45,60.35,55.7368421052632,57.05,68.45,51.3,44.4,48.85,49.95,50.35,54.65,36.5,48.75,64.6,65.95,49.1,43.9,55.25,80.2,36.2,31.25,38,42.55,61.375,56.3636363636364,64.25,85.55,67.4,52.7,39.2777777777778,35.7,37.45,42.8,78.85,74.8,78.9,41.95,62.4,65.9473684210526,36.5,27.3,28.65,32.95,38.65,43.8333333333333,49.7368421052632,58.95,107.6,72.7,77.35,93.75,107.9,116.95,116.65,13.95,26.65,39.1,37.85,38.7,23.3333333333333,26.85,57.3,70.5,85.05,148.85,127,108.15,166.7,143.65,35.25,47.6,46.5454545454545,67.59375,60.5263157894737,89.65,112.6,156.05,224.85,130.95,124.75,137.4,101.85,105.6,156.5,31.7894736842105,26.8421052631579,43.15,60,74.2631578947368,77.8947368421053,122.15,79.3,84.25,106.75,172.083333333333,145.4,202.7,148.055555555556,144.05,170.5625,194.7,173.75,153.15,112.333333333333,85.2105263157895,87.65,112.65625,106.961538461538,147.2,99.65,136.052631578947,145.1,173.75,134.526315789474,99.3,135.5,102.05,35.95,46.6,76.55,69.9473684210526,99.8,106.473684210526,123.157894736842],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,21.6842105263158,21.8,24.95,39.2631578947368,56.4,49.3157894736842,48.6315789473684,48.75,51.8421052631579,39.4583333333333,34.4444444444444,39.35,43,48.5,43.1578947368421,27.7,25,39.6842105263158,32.3125,26.3684210526316,36.0526315789474,33.2105263157895,29.4,42.2105263157895,45.8333333333333,60.5294117647059,68.1875,29.9473684210526,28,10.8421052631579,7,null,null,null,null,null,null,null,null,null,null,null,44,41.9,42.75,45.35,52.15,48.3,42.9473684210526,44.15,60.95,41.4210526315789,50.9,22.35,9.57894736842105,28.05,38.7,46.0526315789474,60.2,37.75,44.8,32.75,24.85,23.65,53.35,59.2631578947368,14.1578947368421,20.8,40.35,25.3888888888889,71.8571428571429,52.35,32.8421052631579,22.65,34.55,28.5833333333333,null,null,null,65.5,39.7894736842105,50.1176470588235,49.6315789473684,14.9,19.2631578947368,21.2222222222222,7.25,15.6842105263158,21.3157894736842,16.9473684210526,16.8947368421053,19.95,22.3636363636364,null,15.4,25.25,54.85,21.4,29.5,42.3333333333333,60.95,79.9,103.421052631579,116.2,45.3333333333333,18.55,22.7,16.7894736842105,24.9,43,23.4210526315789,19.5,18.25,27,27.35,28.75,null,58.625,27.0833333333333,24.4705882352941,24.125,31,8,18.4705882352941,17.3,8,18.15,39.6470588235294,45.7058823529412,25.95,45.95,29.25,74.25,46.75,47.7894736842105,40.85,25.25,20.2,17.75,18.4736842105263,32.8,34,55.7,69.8421052631579,49.6315789473684,58.9473684210526,44.1,14.1,13.55,36.05,33.55,24.6,35.55,63.8333333333333,77.6428571428571,79.8571428571429,61,49.125,49.375,67.75,42.6666666666667,43.55,35.2777777777778,9,29.5882352941176,36.9615384615385,27.625,15,51.3333333333333,37.3,41.6,69.7,55.5,46.45,33.1,35.65,26.4,18.25,39.0588235294118,43.6,37.25,60.3,83.4,101.75,152.5,122,53.8,47.65,35.15,35.75,24.95,29.85,35.45,33.15,30.6315789473684,40.6,30.3,41.05,67.5,37.5,36.3,30.6,10.5625,35.5,35.1,51.9473684210526,41.75,46.35,37.6,38.15,23.95,28,25.1052631578947,54.6666666666667,72.05,46.7,33.4,28.3,45.15,24.45,21.3684210526316,23.25,12.1,9.9,8.3125,18.35,48.1,47.15,27.35,22.1,22.35,39.2,41.7,30.1764705882353,24.95,13.34375,9.8,31.4285714285714,40.45,37.7,30.8,10.3529411764706,12.45,29.15,25.15,14.5,14.25,14.9,14.55,20.5,31.5789473684211,53.55,43.45,28.55,28.25,25.5,24.4,27.7,37.7142857142857,30.05,20.25,19.95,32.15,17.125,null,19.4444444444444,16.55,16.6,13.7222222222222,11.25,14.5,7.8125,16.75,11.55,12,9.1875,7.36666666666667,8.75,7.1,5.8125,6.75,17.28125,17.2,33.5,37.65,24.1052631578947,47.6666666666667,12,18.8888888888889,null,25.2,16.45,14.3,13.45,12.2631578947368,10.8,10.7692307692308,15.2,22.9473684210526,25.85,30.3,20.5,10.2222222222222,18.3,19.3,31.4,48.25,34.2,8.5625,12.9375,19.1666666666667,36.0909090909091,32.05,36.85,39.0555555555556,63.35,29.75,37.95,59.55,31.65,9.65,6,3.82352941176471,2.09090909090909,10.5,15.7,32.5,39.9,45.2,29.6666666666667,null,56.8,40.95,14.2222222222222,15.85,35.85,41.55,53.28125,9.45,13.6,29.55,36.7,14.45,22.15,18.1111111111111,29.95,24.15,12.55,20.8888888888889,8.54166666666667,14.6842105263158,18.2,26.25,17.1578947368421,11.8421052631579,7.2,23,35,35.25,39,45.1764705882353,null,null,null,41.3636363636364,36.6428571428571,8.05,12.3,21.15,14.8,9.38888888888889,19.05,22.85,27.05,24.55,12.15,24.3,25.95,28.1,27.15,14.3,14.45,25.55,24.7,33.3,20.8846153846154,7.71428571428571,12.3,9.6,32.3,40.1,28.1,16.15,27.9473684210526,23.45,34.1,28.35,17.05,20.6,7.5,11.45,16.45,36.9,81.45,63,46.7,34.6,13.2631578947368,9.0625,26.1,65.05,72.15,41.25,72.2,49.95,66.35,92.25,72.5,37.3,24.1,16.3,5.96666666666667,12,17.6,8.22222222222222,18.7,29.55,40.6,56.85,68.15,61.65,56.6,67.8,72.65,48.3529411764706,55.6333333333333,43.3,44.3,58.1578947368421,67.15,46.15,49.85,30.05,24.7,32.5,36.7,46.55,55.25,88.05,88.3,23.45,31.75,47.45,46.95,43.45,15.7,36.85,33.45,36.85,42.4375],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,36.5263157894737,29.8,13.8,11.8,10.05,16.9473684210526,22.1111111111111,43.45,27.6842105263158,17.15,18.6842105263158,18,24.625,29.35,18.3684210526316,33.8666666666667,32.1052631578947,28.6,28.4,20.4736842105263,25.8333333333333,29.9473684210526,25.85,24,8.16666666666667,14.8888888888889,26.84375,31.3684210526316,34.5263157894737,25,15.5,null,null,null,null,null,null,null,null,null,null,null,29,39.7,74.6,42.2,42.5263157894737,42.6,41.9,72.45,61.2105263157895,38.6,30.2,22.9,35.3157894736842,109.3,84.4736842105263,35.95,37.95,20.9473684210526,44,59.8333333333333,87.2222222222222,58.3157894736842,36.5263157894737,59,48.7,124.157894736842,105.75,69.3333333333333,50.6428571428571,26.7,30.75,33.6842105263158,25.8,34.5,58.1,43.25,64.7368421052632,72.85,114.8,53.7894736842105,74.1052631578947,54.75,47.7894736842105,67.1111111111111,98.15,78.7894736842105,33.2631578947368,39.3684210526316,41,74.8,49.6842105263158,51.3333333333333,146.576923076923,222.4,67.7,45.7,51.7,38.5263157894737,44.2,135.631578947368,84.95,207.75,null,null,72.5,65.45,40.0526315789474,61.1578947368421,28.6315789473684,51.45,58.625,56,124.789473684211,156.85,163.125,115.25,88.5,39.9411764705882,56.6666666666667,44,null,36.5294117647059,61.5,51.65,98.25,56.8333333333333,35.5,101.75,53.8333333333333,62.4210526315789,92.2,75.8421052631579,35.45,25.35,26.85,47.45,38.75,35.1052631578947,39.05,57.85,68.1,65.5263157894737,76.85,44.6315789473684,41.8,47.4736842105263,37.25,43.95,69.7,57.1,60.55,56.1578947368421,37.4,69.1,67.4,29.3,75.4,88.75,82.8,18.15,22.05,24.85,57.55,83.1,60.4444444444444,71.8,43.05,43.15,38.7894736842105,91.8421052631579,36.1428571428571,null,51.7,41.1,37.5789473684211,25.75,35.9,51.2,102.2,84.15,63.3,68.65,52.4,86.25,55.25,58.9,28.4,26.8333333333333,34.05,63.25,46.5,44.3,66.05,43.45,51.2,80.75,110.45,65.1578947368421,32.2,51.7,27.55,27.75,24.34375,55,80.8181818181818,41.8,52.85,44.3,41.6,57.35,89.5789473684211,98.9666666666667,69.1578947368421,48.5,35.75,36.2,46.2631578947368,36.45,60.35,67.15,30.8,48,28.35,79.3,54.7222222222222,69.4,35.5,30.2,42.8,28.3,35.35,49.1666666666667,28.45,16.3,47.95,64.25,86.95,69.9,86.8,31.45,29.35,41.75,54.4,58.55,21.5,37.7,19.2,36.7,27.85,37.25,39.4,32.1,30.8,29.25,43,19.5,29.4,35.45,55.5,86.7,54.2,25.35,20.95,16.0833333333333,53.5,34.8947368421053,45.5,39.3,37.45,28.9,26.95,45.4,22.9,26.25,26.2,18.1,40.55,32.55,21.55,18.8947368421053,11.55,10.6315789473684,10.6470588235294,17.85,21.6666666666667,44.55,51.45,40.1,46.9,55.9,64.55,30.35,29.35,36.3684210526316,39.65,42.1578947368421,37.05,40.3,22.6,34.65,44.1,60,69.1052631578947,35.75,13.65,12.75,17.85,16.7,26.45,21.75,17.05,6.625,11.4230769230769,11.35,11.3,17.55,12.4210526315789,14.25,21.1,16.5,18.7,20.55,17.5,19.85,25.65,24.15,21.3,21.7,19.8421052631579,25.75,18.9,18.9473684210526,27.2,27.7,33.1,40.15,59.95,67.15,61.15,36.7,28.9,39.95,39.45,63.65,64.8333333333333,null,null,29.625,25.35,15.25,5,5.625,8.29411764705882,24.2,11.75,17.55,9.35,12.9375,22.4,29.45,27.95,18.05,11.7368421052632,7.66666666666667,5.13333333333333,32.8947368421053,44.05,10.7666666666667,18,11.0588235294118,29.6111111111111,13.6666666666667,18.9444444444444,14.8235294117647,15.6,14.7,13.1,26.9,18.95,26.15,15.3,35.7368421052632,28.85,15.35,25.85,23.8125,7.38461538461539,5.5,19,18.95,34,27.2777777777778,16.5,26.5,21.45,15.3,20.4,18.55,30.55,64.55,70.9,69.9,64.65,34.35,21,18.15,38,51.8,39.85,55.95,90.45,49.15,18.1,23,63,114.25,47.85,31,15.85,28.6,60.75,52.35,39.15,112.45,73.05,25.8,55.3,109.25,33.25,29.05,80.8,118.3,45.3333333333333,88.5,131.222222222222,91.75,22.7,20.3,34.65,39.25,25.35,70.6,154.05,121.3,40.1,66.85,47.1,36.1,96.6,148.4,29.15,22.7,20.85,36.6,44.2,73.8,58.65,49],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,9.21052631578947,13,42.7,50.4,32.45,9.23529411764706,17,10.5,23.7894736842105,33.7894736842105,51,56,54.25,82.15,26.7894736842105,54.0666666666667,35.1578947368421,21.1,33.8125,36.4736842105263,75.2105263157895,75.5789473684211,33.75,22.0526315789474,67.5,81.15,16.5625,13.6842105263158,13.3157894736842,69.8421052631579,43.5,null,null,null,null,null,null,null,null,null,null,null,56,97.35,140.85,102.894736842105,48.95,239,156.85,22.0526315789474,28.8421052631579,28.85,27.65,83.85,110.052631578947,150.210526315789,172.8,84.05,82.5,162.75,349.2,662.75,346.15,199.4,130.8,184.210526315789,141,101.95,107.4,81.7777777777778,72.7142857142857,92.25,110.842105263158,57.85,51.4210526315789,68.75,41.95,79.8,154.684210526316,156.65,104.55,93.5263157894737,36.3,34.25,41.5789473684211,37.8888888888889,106.65,185.210526315789,174.166666666667,85.05,72.7368421052632,90.7894736842105,194.6,173.333333333333,246.4375,61.2631578947368,31.2105263157895,49.2,69.45,124.9,57.6842105263158,162.105263157895,264.684210526316,178.6,46.55,100.65,58.1578947368421,105.55,132.684210526316,165,44.2105263157895,50.05,54.375,131,59.95,119.3,159.125,123.375,120.916666666667,109.823529411765,109.166666666667,44,188,null,38.2222222222222,124.85,104.25,141.263157894737,44.3529411764706,50.45,96.3,91.35,94.8,56.8947368421053,49.65,40.35,72.4,34.6315789473684,21.7,47.8,40.25,34.2,38.3684210526316,35.5,31,35.9,62.35,46.4210526315789,71.4736842105263,40.05,85.1,68.85,71.3,36.85,67.9,85.75,104.55,122.8,112.35,110.65,47.45,23.8,20.8,22.35,47.05,60.65,40.1052631578947,86.9,124.75,120.65,49.3,64.875,56.35,114.5,146.7,51.4736842105263,43.05,50.4,80.6,119.1,139.066666666667,72.125,32.8888888888889,49.625,91.05,63,26.6,23.15,34.25,34.15,60.1,31.45,50.85,23.55,28.25,50.9,53.15,96.8,96.75,61.15,53.4,41.9,54.35,42.85,37.25,58.55,30.45,23.2,39.95,38.7,41.75,38.45,26.25,52.4210526315789,74.4,82.85,57.7,11.6,19.25,32.3,47.3,18.6,36,56,76.55,54.95,36.4285714285714,40.55,28.8,38.85,63.45,41,53.45,45.6315789473684,36,56,null,55.0909090909091,68.75,48.5882352941176,41.3888888888889,30.15,32.8,20.3157894736842,34.95,11.55,48.1,42.45,42.3,47.3,36.25,32.15,18.8,46.2,63.6875,31.95,28.75,45.45,51.6,47.25,37.95,64.9,74.8,60.25,37.45,56.65,55.2,42.3157894736842,34.4736842105263,16.7368421052632,14.5,44.95,48.8888888888889,57.8,39.5555555555556,40.59375,39,26.9166666666667,36.75,55.95,74.8,32.0588235294118,39.25,35.8333333333333,57.95,47.8,30.6315789473684,27.7777777777778,26.3076923076923,22.7777777777778,19.5,74,61.9473684210526,57,36.05,41.7,18.5789473684211,10.3928571428571,25.375,34.4210526315789,29.25,18.2307692307692,40.35,62.15,41,39.15,25.125,21.2,40.05,38.1,62.65,24.65,20,9.95833333333333,10.9166666666667,24.1578947368421,26,21.1578947368421,30.35,46.6,42.4166666666667,17.71875,20.7647058823529,32.0555555555556,38.7368421052632,13.25,11.5416666666667,19.0714285714286,8.18181818181818,31.6842105263158,28.65,14.6428571428571,32.1666666666667,34.8823529411765,25.2777777777778,9.78947368421053,4.52941176470588,2.75,15.25,16.4736842105263,26.4117647058824,31.9444444444444,45.3157894736842,48.6842105263158,34.7368421052632,36.9,42.9473684210526,29.6315789473684,35.5,48.65,71.2,54.8947368421053,43.75,null,null,null,17.3,47.1,45.6,34.4736842105263,40.9,31.3,33.5,73.4,23.15,17.45,48.5,76.5,54.85,60.65,32.75,26.2,28.7,42.4,60.8,16.85,22.1,49.4,27.55,71.7,75.85,107.666666666667,null,null,23.4285714285714,66.1875,47,53.5,167.444444444444,46.65,31.85,88.85,91.75,18.75,93.3,40.35,35.9,44.35,17.7,65.25,48.7,75.85,117.05,197.7,102.15,206.25,61.45,79.3,38.96875,57.7,58.4,82.5,43.4,32.25,91.75,202.35,77.25,48,36.65,23,16.7,43.3,76.95,79.2,97.45,83.65,65.65,64.55,61.55,22.05,52.35,108.15,91.6,20.75,69.05,71.9615384615385,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]]},&#34;evals&#34;:[&#34;attrs.interactionModel&#34;],&#34;jsHooks&#34;:[]}&lt;/script&gt;
&lt;/div&gt;
&lt;div id=&#34;stacked-bar-chart&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Stacked Bar Chart&lt;/h2&gt;
&lt;p&gt;What if we compare the pollution levels for different cities in 2016? We can see Chengdu city has the worst air quality condition, while Guangzhou seems to have beter air quality condition in the comparison.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;p&amp;lt;- aq_df %&amp;gt;% select(city, Day, value) %&amp;gt;% 
  filter(between(Day, as.Date(&amp;#39;2016-01-01&amp;#39;), as.Date(&amp;#39;2016-12-31&amp;#39;))) %&amp;gt;% 
  group_by(Day, city) %&amp;gt;% summarise(avgvalue = mean(value, tr = 0.1, na.rm = TRUE)) %&amp;gt;% 
  ungroup() %&amp;gt;% 
  mutate(pollution_level = case_when(
  findInterval(.$avgvalue, c(0, 51)) == 1 ~ &amp;quot;Good&amp;quot;,
  findInterval(.$avgvalue, c(51, 101)) == 1 ~ &amp;quot;Moderate&amp;quot;,
  findInterval(.$avgvalue, c(101, 150)) == 1 ~ &amp;quot;Unhealthy(SensitiveGroups)&amp;quot;,
  findInterval(.$avgvalue, c(151, 201)) == 1 ~ &amp;quot;Unhealthy&amp;quot;,
  findInterval(.$avgvalue, c(201, 300)) == 1 ~ &amp;quot;VeryUnhealthy&amp;quot;,
  .$avgvalue &amp;gt; 300 ~ &amp;quot;Hazardous&amp;quot;)) %&amp;gt;% 
  group_by(pollution_level, city) %&amp;gt;% 
  summarise(num_days = n()) %&amp;gt;% 
  group_by(city) %&amp;gt;% 
  mutate(per = round(num_days/sum(num_days)*100, 2)) %&amp;gt;% 
  ungroup() %&amp;gt;% 
  select(pollution_level, city, per) %&amp;gt;% 
  ggplot(aes(x = city, fill = pollution_level)) +   
  geom_bar(stat=&amp;quot;identity&amp;quot;, position=&amp;quot;fill&amp;quot;, aes(y = per)) + 
  scale_y_continuous(labels = percent_format()) +
  ggtitle(&amp;quot;Percentage of Days at different Air Pollution levels in 2016&amp;quot;) + 
  labs(x = &amp;quot;City&amp;quot; , y = &amp;quot;Percentage&amp;quot;)

ggplotly(p)&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;htmlwidget-d9dbabf11a5144e1c980&#34; style=&#34;width:672px;height:480px;&#34; class=&#34;plotly html-widget&#34;&gt;&lt;/div&gt;
&lt;script type=&#34;application/json&#34; data-for=&#34;htmlwidget-d9dbabf11a5144e1c980&#34;&gt;{&#34;x&#34;:{&#34;data&#34;:[{&#34;x&#34;:[1,2,3,4,5],&#34;y&#34;:[0.477,0.370737073707371,0.8601,0.6734,0.6176],&#34;text&#34;:[&#34;per: 0.47700000&lt;br&gt;city: Beijing&lt;br&gt;pollution_level: Good&#34;,&#34;per: 0.37073707&lt;br&gt;city: Chengdu&lt;br&gt;pollution_level: Good&#34;,&#34;per: 0.86010000&lt;br&gt;city: Guangzhou&lt;br&gt;pollution_level: Good&#34;,&#34;per: 0.67340000&lt;br&gt;city: Shanghai&lt;br&gt;pollution_level: Good&#34;,&#34;per: 0.61760000&lt;br&gt;city: Shenyang&lt;br&gt;pollution_level: Good&#34;],&#34;type&#34;:&#34;bar&#34;,&#34;marker&#34;:{&#34;autocolorscale&#34;:false,&#34;color&#34;:&#34;rgba(248,118,109,1)&#34;,&#34;line&#34;:{&#34;width&#34;:1.88976377952756,&#34;color&#34;:&#34;transparent&#34;}},&#34;name&#34;:&#34;Good&#34;,&#34;legendgroup&#34;:&#34;Good&#34;,&#34;showlegend&#34;:true,&#34;xaxis&#34;:&#34;x&#34;,&#34;yaxis&#34;:&#34;y&#34;,&#34;hoverinfo&#34;:&#34;text&#34;,&#34;frame&#34;:null},{&#34;x&#34;:[1],&#34;y&#34;:[0.0144000000000001],&#34;text&#34;:&#34;per: 0.01440000&lt;br&gt;city: Beijing&lt;br&gt;pollution_level: Hazardous&#34;,&#34;type&#34;:&#34;bar&#34;,&#34;marker&#34;:{&#34;autocolorscale&#34;:false,&#34;color&#34;:&#34;rgba(183,159,0,1)&#34;,&#34;line&#34;:{&#34;width&#34;:1.88976377952756,&#34;color&#34;:&#34;transparent&#34;}},&#34;name&#34;:&#34;Hazardous&#34;,&#34;legendgroup&#34;:&#34;Hazardous&#34;,&#34;showlegend&#34;:true,&#34;xaxis&#34;:&#34;x&#34;,&#34;yaxis&#34;:&#34;y&#34;,&#34;hoverinfo&#34;:&#34;text&#34;,&#34;frame&#34;:null},{&#34;x&#34;:[1,2,3,4,5],&#34;y&#34;:[0.3132,0.431043104310431,0.1312,0.2832,0.2915],&#34;text&#34;:[&#34;per: 0.31320000&lt;br&gt;city: Beijing&lt;br&gt;pollution_level: Moderate&#34;,&#34;per: 0.43104310&lt;br&gt;city: Chengdu&lt;br&gt;pollution_level: Moderate&#34;,&#34;per: 0.13120000&lt;br&gt;city: Guangzhou&lt;br&gt;pollution_level: Moderate&#34;,&#34;per: 0.28320000&lt;br&gt;city: Shanghai&lt;br&gt;pollution_level: Moderate&#34;,&#34;per: 0.29150000&lt;br&gt;city: Shenyang&lt;br&gt;pollution_level: Moderate&#34;],&#34;type&#34;:&#34;bar&#34;,&#34;marker&#34;:{&#34;autocolorscale&#34;:false,&#34;color&#34;:&#34;rgba(0,186,56,1)&#34;,&#34;line&#34;:{&#34;width&#34;:1.88976377952756,&#34;color&#34;:&#34;transparent&#34;}},&#34;name&#34;:&#34;Moderate&#34;,&#34;legendgroup&#34;:&#34;Moderate&#34;,&#34;showlegend&#34;:true,&#34;xaxis&#34;:&#34;x&#34;,&#34;yaxis&#34;:&#34;y&#34;,&#34;hoverinfo&#34;:&#34;text&#34;,&#34;frame&#34;:null},{&#34;x&#34;:[1,2,3,4,5],&#34;y&#34;:[0.0402,0.0345034503450345,0.0029,0.0087,0.0125],&#34;text&#34;:[&#34;per: 0.04020000&lt;br&gt;city: Beijing&lt;br&gt;pollution_level: Unhealthy&#34;,&#34;per: 0.03450345&lt;br&gt;city: Chengdu&lt;br&gt;pollution_level: Unhealthy&#34;,&#34;per: 0.00290000&lt;br&gt;city: Guangzhou&lt;br&gt;pollution_level: Unhealthy&#34;,&#34;per: 0.00870000&lt;br&gt;city: Shanghai&lt;br&gt;pollution_level: Unhealthy&#34;,&#34;per: 0.01250000&lt;br&gt;city: Shenyang&lt;br&gt;pollution_level: Unhealthy&#34;],&#34;type&#34;:&#34;bar&#34;,&#34;marker&#34;:{&#34;autocolorscale&#34;:false,&#34;color&#34;:&#34;rgba(0,191,196,1)&#34;,&#34;line&#34;:{&#34;width&#34;:1.88976377952756,&#34;color&#34;:&#34;transparent&#34;}},&#34;name&#34;:&#34;Unhealthy&#34;,&#34;legendgroup&#34;:&#34;Unhealthy&#34;,&#34;showlegend&#34;:true,&#34;xaxis&#34;:&#34;x&#34;,&#34;yaxis&#34;:&#34;y&#34;,&#34;hoverinfo&#34;:&#34;text&#34;,&#34;frame&#34;:null},{&#34;x&#34;:[1,2,3,4,5],&#34;y&#34;:[0.1092,0.158015801580158,0.0058,0.0347,0.0721],&#34;text&#34;:[&#34;per: 0.10920000&lt;br&gt;city: Beijing&lt;br&gt;pollution_level: Unhealthy(SensitiveGroups)&#34;,&#34;per: 0.15801580&lt;br&gt;city: Chengdu&lt;br&gt;pollution_level: Unhealthy(SensitiveGroups)&#34;,&#34;per: 0.00580000&lt;br&gt;city: Guangzhou&lt;br&gt;pollution_level: Unhealthy(SensitiveGroups)&#34;,&#34;per: 0.03470000&lt;br&gt;city: Shanghai&lt;br&gt;pollution_level: Unhealthy(SensitiveGroups)&#34;,&#34;per: 0.07210000&lt;br&gt;city: Shenyang&lt;br&gt;pollution_level: Unhealthy(SensitiveGroups)&#34;],&#34;type&#34;:&#34;bar&#34;,&#34;marker&#34;:{&#34;autocolorscale&#34;:false,&#34;color&#34;:&#34;rgba(97,156,255,1)&#34;,&#34;line&#34;:{&#34;width&#34;:1.88976377952756,&#34;color&#34;:&#34;transparent&#34;}},&#34;name&#34;:&#34;Unhealthy(SensitiveGroups)&#34;,&#34;legendgroup&#34;:&#34;Unhealthy(SensitiveGroups)&#34;,&#34;showlegend&#34;:true,&#34;xaxis&#34;:&#34;x&#34;,&#34;yaxis&#34;:&#34;y&#34;,&#34;hoverinfo&#34;:&#34;text&#34;,&#34;frame&#34;:null},{&#34;x&#34;:[1,2,5],&#34;y&#34;:[0.046,0.0057005700570057,0.0063],&#34;text&#34;:[&#34;per: 0.04600000&lt;br&gt;city: Beijing&lt;br&gt;pollution_level: VeryUnhealthy&#34;,&#34;per: 0.00570057&lt;br&gt;city: Chengdu&lt;br&gt;pollution_level: VeryUnhealthy&#34;,&#34;per: 0.00630000&lt;br&gt;city: Shenyang&lt;br&gt;pollution_level: VeryUnhealthy&#34;],&#34;type&#34;:&#34;bar&#34;,&#34;marker&#34;:{&#34;autocolorscale&#34;:false,&#34;color&#34;:&#34;rgba(245,100,227,1)&#34;,&#34;line&#34;:{&#34;width&#34;:1.88976377952756,&#34;color&#34;:&#34;transparent&#34;}},&#34;name&#34;:&#34;VeryUnhealthy&#34;,&#34;legendgroup&#34;:&#34;VeryUnhealthy&#34;,&#34;showlegend&#34;:true,&#34;xaxis&#34;:&#34;x&#34;,&#34;yaxis&#34;:&#34;y&#34;,&#34;hoverinfo&#34;:&#34;text&#34;,&#34;frame&#34;:null}],&#34;layout&#34;:{&#34;margin&#34;:{&#34;t&#34;:43.7625570776256,&#34;r&#34;:7.30593607305936,&#34;b&#34;:40.1826484018265,&#34;l&#34;:48.9497716894977},&#34;plot_bgcolor&#34;:&#34;rgba(235,235,235,1)&#34;,&#34;paper_bgcolor&#34;:&#34;rgba(255,255,255,1)&#34;,&#34;font&#34;:{&#34;color&#34;:&#34;rgba(0,0,0,1)&#34;,&#34;family&#34;:&#34;&#34;,&#34;size&#34;:14.6118721461187},&#34;title&#34;:&#34;Percentage of Days at different Air Pollution levels in 2016&#34;,&#34;titlefont&#34;:{&#34;color&#34;:&#34;rgba(0,0,0,1)&#34;,&#34;family&#34;:&#34;&#34;,&#34;size&#34;:17.5342465753425},&#34;xaxis&#34;:{&#34;domain&#34;:[0,1],&#34;type&#34;:&#34;linear&#34;,&#34;autorange&#34;:false,&#34;tickmode&#34;:&#34;array&#34;,&#34;range&#34;:[0.4,5.6],&#34;ticktext&#34;:[&#34;Beijing&#34;,&#34;Chengdu&#34;,&#34;Guangzhou&#34;,&#34;Shanghai&#34;,&#34;Shenyang&#34;],&#34;tickvals&#34;:[1,2,3,4,5],&#34;ticks&#34;:&#34;outside&#34;,&#34;tickcolor&#34;:&#34;rgba(51,51,51,1)&#34;,&#34;ticklen&#34;:3.65296803652968,&#34;tickwidth&#34;:0.66417600664176,&#34;showticklabels&#34;:true,&#34;tickfont&#34;:{&#34;color&#34;:&#34;rgba(77,77,77,1)&#34;,&#34;family&#34;:&#34;&#34;,&#34;size&#34;:11.689497716895},&#34;tickangle&#34;:-0,&#34;showline&#34;:false,&#34;linecolor&#34;:null,&#34;linewidth&#34;:0,&#34;showgrid&#34;:true,&#34;gridcolor&#34;:&#34;rgba(255,255,255,1)&#34;,&#34;gridwidth&#34;:0.66417600664176,&#34;zeroline&#34;:false,&#34;anchor&#34;:&#34;y&#34;,&#34;title&#34;:&#34;City&#34;,&#34;titlefont&#34;:{&#34;color&#34;:&#34;rgba(0,0,0,1)&#34;,&#34;family&#34;:&#34;&#34;,&#34;size&#34;:14.6118721461187},&#34;hoverformat&#34;:&#34;.2f&#34;},&#34;yaxis&#34;:{&#34;domain&#34;:[0,1],&#34;type&#34;:&#34;linear&#34;,&#34;autorange&#34;:false,&#34;tickmode&#34;:&#34;array&#34;,&#34;range&#34;:[-0.05,1.05],&#34;ticktext&#34;:[&#34;0%&#34;,&#34;25%&#34;,&#34;50%&#34;,&#34;75%&#34;,&#34;100%&#34;],&#34;tickvals&#34;:[0,0.25,0.5,0.75,1],&#34;ticks&#34;:&#34;outside&#34;,&#34;tickcolor&#34;:&#34;rgba(51,51,51,1)&#34;,&#34;ticklen&#34;:3.65296803652968,&#34;tickwidth&#34;:0.66417600664176,&#34;showticklabels&#34;:true,&#34;tickfont&#34;:{&#34;color&#34;:&#34;rgba(77,77,77,1)&#34;,&#34;family&#34;:&#34;&#34;,&#34;size&#34;:11.689497716895},&#34;tickangle&#34;:-0,&#34;showline&#34;:false,&#34;linecolor&#34;:null,&#34;linewidth&#34;:0,&#34;showgrid&#34;:true,&#34;gridcolor&#34;:&#34;rgba(255,255,255,1)&#34;,&#34;gridwidth&#34;:0.66417600664176,&#34;zeroline&#34;:false,&#34;anchor&#34;:&#34;x&#34;,&#34;title&#34;:&#34;Percentage&#34;,&#34;titlefont&#34;:{&#34;color&#34;:&#34;rgba(0,0,0,1)&#34;,&#34;family&#34;:&#34;&#34;,&#34;size&#34;:14.6118721461187},&#34;hoverformat&#34;:&#34;.2f&#34;},&#34;shapes&#34;:[{&#34;type&#34;:&#34;rect&#34;,&#34;fillcolor&#34;:null,&#34;line&#34;:{&#34;color&#34;:null,&#34;width&#34;:0,&#34;linetype&#34;:[]},&#34;yref&#34;:&#34;paper&#34;,&#34;xref&#34;:&#34;paper&#34;,&#34;x0&#34;:0,&#34;x1&#34;:1,&#34;y0&#34;:0,&#34;y1&#34;:1}],&#34;showlegend&#34;:true,&#34;legend&#34;:{&#34;bgcolor&#34;:&#34;rgba(255,255,255,1)&#34;,&#34;bordercolor&#34;:&#34;transparent&#34;,&#34;borderwidth&#34;:1.88976377952756,&#34;font&#34;:{&#34;color&#34;:&#34;rgba(0,0,0,1)&#34;,&#34;family&#34;:&#34;&#34;,&#34;size&#34;:11.689497716895},&#34;y&#34;:0.93503937007874,&#34;traceorder&#34;:&#34;reversed&#34;},&#34;annotations&#34;:[{&#34;text&#34;:&#34;pollution_level&#34;,&#34;x&#34;:1.02,&#34;y&#34;:1,&#34;showarrow&#34;:false,&#34;ax&#34;:0,&#34;ay&#34;:0,&#34;font&#34;:{&#34;color&#34;:&#34;rgba(0,0,0,1)&#34;,&#34;family&#34;:&#34;&#34;,&#34;size&#34;:14.6118721461187},&#34;xref&#34;:&#34;paper&#34;,&#34;yref&#34;:&#34;paper&#34;,&#34;textangle&#34;:-0,&#34;xanchor&#34;:&#34;left&#34;,&#34;yanchor&#34;:&#34;bottom&#34;,&#34;legendTitle&#34;:true}],&#34;barmode&#34;:&#34;stack&#34;,&#34;hovermode&#34;:&#34;closest&#34;,&#34;dragmode&#34;:&#34;zoom&#34;},&#34;config&#34;:{&#34;doubleClick&#34;:&#34;reset&#34;,&#34;modeBarButtonsToAdd&#34;:[{&#34;name&#34;:&#34;Collaborate&#34;,&#34;icon&#34;:{&#34;width&#34;:1000,&#34;ascent&#34;:500,&#34;descent&#34;:-50,&#34;path&#34;:&#34;M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z&#34;},&#34;click&#34;:&#34;function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == &#39;?viewer_pane=1&#39;) {\n          alert(&#39;To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html&#39;);\n        } else {\n          window.open(&#39;https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html&#39;, &#39;_blank&#39;);\n        }\n      }&#34;}],&#34;modeBarButtonsToRemove&#34;:[&#34;sendDataToCloud&#34;]},&#34;source&#34;:&#34;A&#34;,&#34;attrs&#34;:{&#34;36386128b61&#34;:{&#34;y&#34;:{},&#34;x&#34;:{},&#34;fill&#34;:{},&#34;type&#34;:&#34;ggplotly&#34;}},&#34;cur_data&#34;:&#34;36386128b61&#34;,&#34;visdat&#34;:{&#34;36386128b61&#34;:[&#34;function (y) &#34;,&#34;x&#34;]},&#34;highlight&#34;:{&#34;on&#34;:&#34;plotly_selected&#34;,&#34;off&#34;:&#34;plotly_relayout&#34;,&#34;persistent&#34;:false,&#34;dynamic&#34;:false,&#34;color&#34;:null,&#34;selectize&#34;:false,&#34;defaultValues&#34;:null,&#34;opacityDim&#34;:0.2,&#34;hoverinfo&#34;:null,&#34;showInLegend&#34;:false},&#34;base_url&#34;:&#34;https://plot.ly&#34;},&#34;evals&#34;:[&#34;config.modeBarButtonsToAdd.0.click&#34;],&#34;jsHooks&#34;:{&#34;render&#34;:[{&#34;code&#34;:&#34;function(el, x) {\n    var ctConfig = crosstalk.var(&#39;plotlyCrosstalkOpts&#39;).set({\&#34;on\&#34;:\&#34;plotly_selected\&#34;,\&#34;off\&#34;:\&#34;plotly_relayout\&#34;,\&#34;persistent\&#34;:false,\&#34;dynamic\&#34;:false,\&#34;color\&#34;:{},\&#34;selectize\&#34;:false,\&#34;defaultValues\&#34;:{},\&#34;opacityDim\&#34;:0.2,\&#34;hoverinfo\&#34;:{},\&#34;showInLegend\&#34;:false});\n  }&#34;,&#34;data&#34;:null}]}}&lt;/script&gt;
&lt;/div&gt;
&lt;div id=&#34;aggregated-monthly-time-series-plots&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Aggregated Monthly Time Series Plots&lt;/h2&gt;
&lt;p&gt;Since we are interested to investigate a broad annual seasonal pattern and there are some irregularities in our data, it would be more helpful to further aggregate on the monthly basis. We can then show the monthly time series plots with the seasonal adjustment. Note that we can only compute the seasonal adjustment for time series of air quality in Beijing since other time series have less than 2 periods. We can observe the seasonal effect of winter season(November - January) is mostly apparent in Beijing. It also seems the air quality is worse during the winters in Shanghai and Chengdu.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# monthly aggregation graphic:
aq_df %&amp;gt;%
  mutate(Month = substring(Day, 1, 7)) %&amp;gt;% group_by(city, Month) %&amp;gt;%
  summarise(avgvalue = mean(value, na.rm = TRUE)) %&amp;gt;%
  ungroup() %&amp;gt;% 
  mutate(Month = as.Date(paste0(Month, &amp;quot;-15&amp;quot;))) %&amp;gt;%
  ggplot(aes(x = Month, y = avgvalue)) + 
   facet_wrap(~ city, ncol = 1, scale = &amp;quot;free_y&amp;quot;) + 
    geom_line(colour = &amp;quot;grey50&amp;quot;, linetype = 2) +
   stat_stl(s.window = &amp;quot;periodic&amp;quot;, frequency = 12, colour = &amp;quot;steelblue&amp;quot;) +
   ggtitle(&amp;quot;Airborne fine particulate matter in Chinese cities (PM2.5)&amp;quot;,
           subtitle = &amp;quot;Showing original and seasonally adjusted&amp;quot;) +
   labs(x = &amp;quot;Seasonal adjustment&amp;quot;, 
        y = &amp;quot;Trimmed mean monthly PM2.5 concentration&amp;quot;,
        caption = &amp;quot;Data: U.S. Embassy and Consulates in China&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning: Computation failed in `stat_stl()`:
## series is not periodic or has less than two periods

## Warning: Computation failed in `stat_stl()`:
## series is not periodic or has less than two periods

## Warning: Computation failed in `stat_stl()`:
## series is not periodic or has less than two periods

## Warning: Computation failed in `stat_stl()`:
## series is not periodic or has less than two periods&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;#####../content/blog/ChinaAirQualityAnalysis_files/figure-html/unnamed-chunk-16-1.png&#34; width=&#34;960&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;wrap-up&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Wrap up&lt;/h1&gt;
&lt;p&gt;In this post, we show how to get the data and how to slice and dice the data in different ways for exploratory data analysis. We found that the air quality in Beijing does indeed improve but still about 25% of times PM2.5 is larger than 100, which could pose various degrees of risks to health. Furthermore, we can identify winter season is a seasonal effect typically for cities like Beijing, Chengdu, Shenyang and Shanghai in northern China. As the PM2.5 trend is an key indicator for the air pollution in China, we should keep close eyes on it and take effective and strict actions to prevent the smog problem break out in winters.&lt;/p&gt;
&lt;p&gt;Next, we will focus on the air quality condition in Beijing to do more in-depth time series anlysis. Stay tuned for the next post. :)&lt;/p&gt;
&lt;p&gt;Thank you for reading! Please let me know if you have any feedback or suggestions.&lt;/p&gt;
&lt;/div&gt;



&lt;!-- BLOGDOWN-HEAD

&lt;script src=&#34;#####../content/blog/ChinaAirQualityAnalysis_files/htmlwidgets/htmlwidgets.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;#####../content/blog/ChinaAirQualityAnalysis_files/chart.js/./dist/Chart.min.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;#####../content/blog/ChinaAirQualityAnalysis_files/chartJSRadar-binding/chartJSRadar.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;#####../content/blog/ChinaAirQualityAnalysis_files/jquery/jquery.min.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;#####../content/blog/ChinaAirQualityAnalysis_files/dygraphs/dygraph.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;#####../content/blog/ChinaAirQualityAnalysis_files/dygraphs/dygraph-combined.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;#####../content/blog/ChinaAirQualityAnalysis_files/moment/moment.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;#####../content/blog/ChinaAirQualityAnalysis_files/moment-timezone/moment-timezone-with-data.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;#####../content/blog/ChinaAirQualityAnalysis_files/dygraphs-binding/dygraphs.js&#34;&gt;&lt;/script&gt;
&lt;link href=&#34;#####../content/blog/ChinaAirQualityAnalysis_files/plotlyjs/plotly-htmlwidgets.css&#34; rel=&#34;stylesheet&#34; /&gt;
&lt;script src=&#34;#####../content/blog/ChinaAirQualityAnalysis_files/plotlyjs/plotly-latest.min.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;#####../content/blog/ChinaAirQualityAnalysis_files/plotly-binding/plotly.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;#####../content/blog/ChinaAirQualityAnalysis_files/crosstalk/js/crosstalk.js&#34;&gt;&lt;/script&gt;





/BLOGDOWN-HEAD --&gt;
</description>
    </item>
    
  </channel>
</rss>